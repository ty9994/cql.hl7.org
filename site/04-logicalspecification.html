<!DOCTYPE html>
<!-- saved from url=(0043)http://hl7.org/fhir/2016May/FHIRPath.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

  <title>4. Logical Specification</title>

  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="http://cql.hl7.org" name="author"/>

  <link rel="stylesheet" href="dist/fhir.css"/>
  <link rel="Prev" href="history.html"/>

    <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="dist/bootstrap.css"/>
  <link rel="stylesheet" href="dist/bootstrap-fhir.css"/>

    <!-- Project extras -->
  <link rel="stylesheet" href="dist/project.css"/>
  <link rel="stylesheet" href="dist/prism.css"/>
  <link rel="stylesheet" href="dist/pygments-manni.css"/>
	<link rel="stylesheet" href="dist/jquery-ui.css"/>
	<link rel="stylesheet" href="dist/cql.css"/>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- [if lt IE 9]>
  <script src="./assets/js/html5shiv.js"></script>
  <script src="./assets/js/respond.min.js"></script>
  <![endif] -->

    <!-- Favicons -->
  <link sizes="144x144" rel="apple-touch-icon-precomposed" href="dist/apple-touch-icon-144-precomposed.png"/>
  <link sizes="114x114" rel="apple-touch-icon-precomposed" href="dist/apple-touch-icon-114-precomposed.png"/>
  <link sizes="72x72" rel="apple-touch-icon-precomposed" href="dist/apple-touch-icon-72-precomposed.png"/>
  <link rel="apple-touch-icon-precomposed" href="dist/apple-touch-icon-57-precomposed.png"/>
  <link rel="shortcut icon" href="dist/favicon.png"/>

</head>
<body data-feedly-mini="yes">
	<div id="segment-header" class="segment">  <!-- segment-header -->
		<div class="container">  <!-- container -->
			<a id="logo" no-external="true" href="index.html"><img alt="Clinical Quality Language" src="dist/cql-logo.png" width="100" height="75"/> </a>
			<div id="hl7-status">
				<b>Clinical Quality Language Release 1</b>
			</div>

			<div id="hl7-nav">
				 <a id="hl7-logo" no-external="true" href="http://www.hl7.org/">
					<img height="75" alt="visit the hl7 website" width="100" src="dist/hl7-logo.png"/>
				</a>
			</div>
			<!--<div id="hl7-nav"><a id="hl7-logo" no-external="true" href="http://cql.hl7.org/search.cfm"><img alt="Search CQL" src="dist/search.png"/></a></div>-->
		</div>
		<div class="container">  <!-- container -->
	</div></div>  <!-- /segment-header -->

	<div id="segment-navbar" class="segment">  <!-- segment-navbar -->
		<div id="stripe"> </div>
		<div class="container">  <!-- container -->
   <!-- HEADER CONTENT -->


			<nav class="navbar navbar-inverse">
				<div class="container">
					<button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
						<span class="icon-bar"> </span>
						<span class="icon-bar"> </span>
						<span class="icon-bar"> </span>
					</button>
					<a class="navbar-brand hidden" href="index.html">CQL</a>
					<div class="nav-collapse collapse navbar-inverse-collapse">
						<ul class="nav navbar-nav">
              <li class = "dropdown">
				  <a href="index.html" class = "dropbtn">Documentation</a>
			  <div class = "dropdown-content">
				  <a href="01-introduction.html">Chapter 1 - Introduction</a>
				  <a href="02-authorsguide.html">Chapter 2 - Author's Guide</a>
				  <a href="03-developersguide.html">Chapter 3 - Developer's Guide</a>
				  <a href="04-logicalspecification.html">Chapter 4 - Logical Specification</a>
				  <a href="05-languagesemantics.html">Chapter 5 - Language Semantics</a>
				  <a href="06-translationsemantics.html">Chapter 6 - Translation Semantics</a>
				  <a href="07-physicalrepresentation.html">Chapter 7 - Physical Representation</a>
				  <a href="08-a-cqlsyntax.html">Appendix A - CQL Syntax Formal Specification</a>
				  <a href="09-b-cqlreference.html">Appendix B - CQL Reference</a>
				  <a href="10-c-referenceimplementations.html">Appendix C - Reference Implementations</a>
				  <a href="11-d-references.html">Appendix D - References</a>
				  <a href="12-e-acronyms.html">Appendix E - Acronyms</a>
				  <a href="13-f-glossary.html">Appendix F - Glossary</a>
				  <a href="14-g-formattingconventions.html">Appendix G - Conventions</a>
				  <a href="15-h-timeintervalcalculations.html">Appendix H - Time Interval Calculation Examples</a>
				  <a href="16-i-fhirpathtranslation.html">Appendix I - FHIRPath Function Translation</a>
				  <a href="17-j-listoftables.html">Appendix J - List Of Tables</a>
				  <a href="18-k-listoffigures.html">Appendix K - List Of Figures</a>
          <a href="19-l-cqlsyntaxdiagrams.html">Appendix L - CQL Syntax Diagrams</a>
			  </div>
			  </li>
        <li><a href="02-authorsguide.html">Author's Guide</a></li>
        <li><a href="03-developersguide.html">Developer's Guide</a></li>
        <li><a href="09-b-cqlreference.html">CQL Reference</a></li>
              <li><a href="grammar.html">Grammar</a></li>
			  <li><a href="elm.html">ELM</a></li>
			  <li><a href="examples.html">Examples</a></li>
              <li><a href="tests.html">Tests</a></li>
							<li><a href="downloads.html">Downloads</a></li>
              <li><a href="http://cql.hl7.org/history.html">Version History</a><!--current--></li>

						</ul>
					</div>  <!-- /.nav-collapse -->

          </div>  <!-- /.container -->
			</nav>  <!-- /.navbar -->


  <!-- /HEADER CONTENT -->
		</div>  <!-- /container -->
	</div>  <!-- /segment-navbar -->

	<div id="segment-content" class="segment">  <!-- segment-content -->
	<div class="container">  <!-- container -->
            <div class="row">
            	<div class="inner-wrapper">
  <!-- CONTENT CONTENT -->


<div class="col-9">

<!--ReleaseHeader--><p id="publish-box">Publication Build: This will be filled in by the publication tooling</p><!--EndReleaseHeader-->


<table class="colsn"><tbody><tr><td id="wg"><a href="http://www.hl7.org/special/committees/dss/index.cfm" _target="blank">Clinical Decision Support</a> Work Group</td><td id="fmm"><a href="http://hl7.org/fhir/versions.html#maturity">Maturity Level</a>: N</td><td id="ballot"><a href="http://hl7.org/fhir/versions.html#std-process">Standards Status</a>: <a style="padding-left: 3px; padding-right: 3px; color: black;" title="Unless otherwise specified explicitly, content on this page is normative.">Normative</a></td></tr></tbody></table>


	<h1>4. Logical Specification</h1>



	<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#simple-values">1. Simple Values</a>
<ul class="sectlevel2">
<li><a href="#literal">1.1. Literal</a></li>
</ul>
</li>
<li><a href="#structured-values">2. Structured Values</a>
<ul class="sectlevel2">
<li><a href="#tuple">2.1. Tuple</a></li>
<li><a href="#instance">2.2. Instance</a></li>
<li><a href="#property">2.3. Property</a></li>
</ul>
</li>
<li><a href="#clinical-values">3. Clinical Values</a>
<ul class="sectlevel2">
<li><a href="#code">3.1. Code</a></li>
<li><a href="#codedef">3.2. CodeDef</a></li>
<li><a href="#coderef">3.3. CodeRef</a></li>
<li><a href="#codesystemdef">3.4. CodeSystemDef</a></li>
<li><a href="#codesystemref">3.5. CodeSystemRef</a></li>
<li><a href="#concept">3.6. Concept</a></li>
<li><a href="#conceptdef">3.7. ConceptDef</a></li>
<li><a href="#conceptref">3.8. ConceptRef</a></li>
<li><a href="#quantity">3.9. Quantity</a></li>
<li><a href="#ratio">3.10. Ratio</a></li>
<li><a href="#valuesetdef">3.11. ValueSetDef</a></li>
<li><a href="#valuesetref">3.12. ValueSetRef</a></li>
</ul>
</li>
<li><a href="#type-specifiers">4. Type Specifiers</a>
<ul class="sectlevel2">
<li><a href="#typespecifier">4.1. TypeSpecifier</a></li>
<li><a href="#namedtypespecifier">4.2. NamedTypeSpecifier</a></li>
<li><a href="#intervaltypespecifier">4.3. IntervalTypeSpecifier</a></li>
<li><a href="#listtypespecifier">4.4. ListTypeSpecifier</a></li>
<li><a href="#tupletypespecifier">4.5. TupleTypeSpecifier</a></li>
<li><a href="#choicetypespecifier">4.6. ChoiceTypeSpecifier</a></li>
</ul>
</li>
<li><a href="#libraries-2">5. Libraries</a>
<ul class="sectlevel2">
<li><a href="#library">5.1. Library</a></li>
<li><a href="#includedef">5.2. IncludeDef</a></li>
<li><a href="#versionedidentifier">5.3. VersionedIdentifier</a></li>
<li><a href="#contextdef">5.4. ContextDef</a></li>
</ul>
</li>
<li><a href="#data-model">6. Data Model</a>
<ul class="sectlevel2">
<li><a href="#usingdef">6.1. UsingDef</a></li>
</ul>
</li>
<li><a href="#parameters">7. Parameters</a>
<ul class="sectlevel2">
<li><a href="#parameterdef">7.1. ParameterDef</a></li>
<li><a href="#parameterref">7.2. ParameterRef</a></li>
</ul>
</li>
<li><a href="#expressions">8. Expressions</a>
<ul class="sectlevel2">
<li><a href="#expression">8.1. Expression</a></li>
<li><a href="#operatorexpression">8.2. OperatorExpression</a></li>
<li><a href="#unaryexpression">8.3. UnaryExpression</a></li>
<li><a href="#binaryexpression">8.4. BinaryExpression</a></li>
<li><a href="#ternaryexpression">8.5. TernaryExpression</a></li>
<li><a href="#naryexpression">8.6. NaryExpression</a></li>
<li><a href="#aggregateexpression">8.7. AggregateExpression</a></li>
</ul>
</li>
<li><a href="#reusing-logic">9. Reusing Logic</a>
<ul class="sectlevel2">
<li><a href="#expressiondef">9.1. ExpressionDef</a></li>
<li><a href="#expressionref">9.2. ExpressionRef</a></li>
<li><a href="#functiondef">9.3. FunctionDef</a></li>
<li><a href="#functionref">9.4. FunctionRef</a></li>
<li><a href="#operandref">9.5. OperandRef</a></li>
</ul>
</li>
<li><a href="#queries">10. Queries</a>
<ul class="sectlevel2">
<li><a href="#query">10.1. Query</a></li>
<li><a href="#aliasedquerysource">10.2. AliasedQuerySource</a></li>
<li><a href="#aliasref">10.3. AliasRef</a></li>
<li><a href="#bycolumn">10.4. ByColumn</a></li>
<li><a href="#bydirection">10.5. ByDirection</a></li>
<li><a href="#byexpression">10.6. ByExpression</a></li>
<li><a href="#identifierref">10.7. IdentifierRef</a></li>
<li><a href="#letclause">10.8. LetClause</a></li>
<li><a href="#queryletref">10.9. QueryLetRef</a></li>
<li><a href="#relationshipclause">10.10. RelationshipClause</a></li>
<li><a href="#returnclause">10.11. ReturnClause</a></li>
<li><a href="#aggregateclause">10.12. AggregateClause</a></li>
<li><a href="#sortclause">10.13. SortClause</a></li>
<li><a href="#with">10.14. With</a></li>
<li><a href="#without">10.15. Without</a></li>
</ul>
</li>
<li><a href="#external-data">11. External Data</a>
<ul class="sectlevel2">
<li><a href="#retrieve">11.1. Retrieve</a></li>
<li><a href="#includeelement">11.2. IncludeElement</a></li>
</ul>
</li>
<li><a href="#comparison-operators-1">12. Comparison Operators</a>
<ul class="sectlevel2">
<li><a href="#equal">12.1. Equal</a></li>
<li><a href="#equivalent">12.2. Equivalent</a></li>
<li><a href="#greater">12.3. Greater</a></li>
<li><a href="#greaterorequal">12.4. GreaterOrEqual</a></li>
<li><a href="#less">12.5. Less</a></li>
<li><a href="#lessorequal">12.6. LessOrEqual</a></li>
<li><a href="#not-equal">12.7. NotEqual</a></li>
</ul>
</li>
<li><a href="#logical-operators-1">13. Logical Operators</a>
<ul class="sectlevel2">
<li><a href="#and">13.1. And</a></li>
<li><a href="#implies">13.2. Implies</a></li>
<li><a href="#not">13.3. Not</a></li>
<li><a href="#or">13.4. Or</a></li>
<li><a href="#xor">13.5. Xor</a></li>
</ul>
</li>
<li><a href="#nullological-operators">14. Nullological Operators</a>
<ul class="sectlevel2">
<li><a href="#null">14.1. Null</a></li>
<li><a href="#coalesce">14.2. Coalesce</a></li>
<li><a href="#isfalse">14.3. IsFalse</a></li>
<li><a href="#isnull">14.4. IsNull</a></li>
<li><a href="#istrue">14.5. IsTrue</a></li>
</ul>
</li>
<li><a href="#conditional-operators">15. Conditional Operators</a>
<ul class="sectlevel2">
<li><a href="#case">15.1. Case</a></li>
<li><a href="#if">15.2. If</a></li>
</ul>
</li>
<li><a href="#arithmetic-operators">16. Arithmetic Operators</a>
<ul class="sectlevel2">
<li><a href="#abs">16.1. Abs</a></li>
<li><a href="#add">16.2. Add</a></li>
<li><a href="#ceiling">16.3. Ceiling</a></li>
<li><a href="#divide">16.4. Divide</a></li>
<li><a href="#exp">16.5. Exp</a></li>
<li><a href="#floor">16.6. Floor</a></li>
<li><a href="#highboundary">16.7. HighBoundary</a></li>
<li><a href="#log">16.8. Log</a></li>
<li><a href="#lowboundary">16.9. LowBoundary</a></li>
<li><a href="#ln">16.10. Ln</a></li>
<li><a href="#maxvalue">16.11. MaxValue</a></li>
<li><a href="#minvalue">16.12. MinValue</a></li>
<li><a href="#modulo">16.13. Modulo</a></li>
<li><a href="#multiply">16.14. Multiply</a></li>
<li><a href="#negate">16.15. Negate</a></li>
<li><a href="#power">16.16. Power</a></li>
<li><a href="#precision">16.17. Precision</a></li>
<li><a href="#predecessor">16.18. Predecessor</a></li>
<li><a href="#round">16.19. Round</a></li>
<li><a href="#subtract">16.20. Subtract</a></li>
<li><a href="#successor">16.21. Successor</a></li>
<li><a href="#truncate">16.22. Truncate</a></li>
<li><a href="#truncateddivide">16.23. TruncatedDivide</a></li>
</ul>
</li>
<li><a href="#string-operators">17. String Operators</a>
<ul class="sectlevel2">
<li><a href="#combine">17.1. Combine</a></li>
<li><a href="#concatenate">17.2. Concatenate</a></li>
<li><a href="#endswith">17.3. EndsWith</a></li>
<li><a href="#equal-2">17.4. Equal</a></li>
<li><a href="#equivalent-2">17.5. Equivalent</a></li>
<li><a href="#indexer">17.6. Indexer</a></li>
<li><a href="#lastpositionof">17.7. LastPositionOf</a></li>
<li><a href="#length">17.8. Length</a></li>
<li><a href="#lower">17.9. Lower</a></li>
<li><a href="#matches">17.10. Matches</a></li>
<li><a href="#not-equal-2">17.11. Not Equal</a></li>
<li><a href="#positionof">17.12. PositionOf</a></li>
<li><a href="#replacematches">17.13. ReplaceMatches</a></li>
<li><a href="#split">17.14. Split</a></li>
<li><a href="#splitonmatches">17.15. SplitOnMatches</a></li>
<li><a href="#startswith">17.16. StartsWith</a></li>
<li><a href="#substring">17.17. Substring</a></li>
<li><a href="#upper">17.18. Upper</a></li>
</ul>
</li>
<li><a href="#date-and-time-operators">18. Date and Time Operators</a>
<ul class="sectlevel2">
<li><a href="#add-2">18.1. Add</a></li>
<li><a href="#after">18.2. After</a></li>
<li><a href="#before">18.3. Before</a></li>
<li><a href="#equal-3">18.4. Equal</a></li>
<li><a href="#equivalent-3">18.5. Equivalent</a></li>
<li><a href="#date">18.6. Date</a></li>
<li><a href="#datefrom">18.7. DateFrom</a></li>
<li><a href="#datetime">18.8. DateTime</a></li>
<li><a href="#datetimecomponentfrom">18.9. DateTimeComponentFrom</a></li>
<li><a href="#differencebetween">18.10. DifferenceBetween</a></li>
<li><a href="#durationbetween">18.11. DurationBetween</a></li>
<li><a href="#not-equal-3">18.12. Not Equal</a></li>
<li><a href="#now">18.13. Now</a></li>
<li><a href="#sameas">18.14. SameAs</a></li>
<li><a href="#sameorbefore">18.15. SameOrBefore</a></li>
<li><a href="#sameorafter">18.16. SameOrAfter</a></li>
<li><a href="#subtract-2">18.17. Subtract</a></li>
<li><a href="#time">18.18. Time</a></li>
<li><a href="#timefrom">18.19. TimeFrom</a></li>
<li><a href="#timezoneoffsetfrom">18.20. TimezoneOffsetFrom</a></li>
<li><a href="#timeofday">18.21. TimeOfDay</a></li>
<li><a href="#today">18.22. Today</a></li>
</ul>
</li>
<li><a href="#interval-operators">19. Interval Operators</a>
<ul class="sectlevel2">
<li><a href="#interval">19.1. Interval</a></li>
<li><a href="#after-1">19.2. After</a></li>
<li><a href="#before-1">19.3. Before</a></li>
<li><a href="#collapse">19.4. Collapse</a></li>
<li><a href="#contains">19.5. Contains</a></li>
<li><a href="#end">19.6. End</a></li>
<li><a href="#ends">19.7. Ends</a></li>
<li><a href="#equal-4">19.8. Equal</a></li>
<li><a href="#equivalent-4">19.9. Equivalent</a></li>
<li><a href="#except">19.10. Except</a></li>
<li><a href="#expand">19.11. Expand</a></li>
<li><a href="#in">19.12. In</a></li>
<li><a href="#includes">19.13. Includes</a></li>
<li><a href="#included-in">19.14. IncludedIn</a></li>
<li><a href="#intersect">19.15. Intersect</a></li>
<li><a href="#meets">19.16. Meets</a></li>
<li><a href="#meetsbefore">19.17. MeetsBefore</a></li>
<li><a href="#meetsafter">19.18. MeetsAfter</a></li>
<li><a href="#not-equal-4">19.19. Not Equal</a></li>
<li><a href="#overlaps">19.20. Overlaps</a></li>
<li><a href="#overlapsbefore">19.21. OverlapsBefore</a></li>
<li><a href="#overlapsafter">19.22. OverlapsAfter</a></li>
<li><a href="#pointfrom">19.23. PointFrom</a></li>
<li><a href="#proper-contains">19.24. ProperContains</a></li>
<li><a href="#proper-in">19.25. ProperIn</a></li>
<li><a href="#proper-includes">19.26. ProperIncludes</a></li>
<li><a href="#proper-included-in">19.27. ProperIncludedIn</a></li>
<li><a href="#size">19.28. Size</a></li>
<li><a href="#start">19.29. Start</a></li>
<li><a href="#starts">19.30. Starts</a></li>
<li><a href="#union">19.31. Union</a></li>
<li><a href="#width">19.32. Width</a></li>
</ul>
</li>
<li><a href="#list-operators">20. List Operators</a>
<ul class="sectlevel2">
<li><a href="#list">20.1. List</a></li>
<li><a href="#contains-2">20.2. Contains</a></li>
<li><a href="#current">20.3. Current</a></li>
<li><a href="#distinct">20.4. Distinct</a></li>
<li><a href="#equal-5">20.5. Equal</a></li>
<li><a href="#equivalent-5">20.6. Equivalent</a></li>
<li><a href="#except-2">20.7. Except</a></li>
<li><a href="#exists">20.8. Exists</a></li>
<li><a href="#filter">20.9. Filter</a></li>
<li><a href="#first">20.10. First</a></li>
<li><a href="#flatten">20.11. Flatten</a></li>
<li><a href="#foreach">20.12. ForEach</a></li>
<li><a href="#in-2">20.13. In</a></li>
<li><a href="#includes-2">20.14. Includes</a></li>
<li><a href="#includedin">20.15. IncludedIn</a></li>
<li><a href="#indexof">20.16. IndexOf</a></li>
<li><a href="#intersect-2">20.17. Intersect</a></li>
<li><a href="#last">20.18. Last</a></li>
<li><a href="#not-equal-5">20.19. Not Equal</a></li>
<li><a href="#propercontains">20.20. ProperContains</a></li>
<li><a href="#properin">20.21. ProperIn</a></li>
<li><a href="#properincludes">20.22. ProperIncludes</a></li>
<li><a href="#properincludedin">20.23. ProperIncludedIn</a></li>
<li><a href="#repeat">20.24. Repeat</a></li>
<li><a href="#singletonfrom">20.25. SingletonFrom</a></li>
<li><a href="#slice">20.26. Slice</a></li>
<li><a href="#sort">20.27. Sort</a></li>
<li><a href="#times">20.28. Times</a></li>
<li><a href="#union-2">20.29. Union</a></li>
</ul>
</li>
<li><a href="#aggregate-operators">21. Aggregate Operators</a>
<ul class="sectlevel2">
<li><a href="#alltrue">21.1. AllTrue</a></li>
<li><a href="#anytrue">21.2. AnyTrue</a></li>
<li><a href="#avg">21.3. Avg</a></li>
<li><a href="#count">21.4. Count</a></li>
<li><a href="#geometricmean">21.5. GeometricMean</a></li>
<li><a href="#product">21.6. Product</a></li>
<li><a href="#max">21.7. Max</a></li>
<li><a href="#median">21.8. Median</a></li>
<li><a href="#min">21.9. Min</a></li>
<li><a href="#mode">21.10. Mode</a></li>
<li><a href="#populationvariance">21.11. PopulationVariance</a></li>
<li><a href="#populationstddev">21.12. PopulationStdDev</a></li>
<li><a href="#sum">21.13. Sum</a></li>
<li><a href="#stddev">21.14. StdDev</a></li>
<li><a href="#variance">21.15. Variance</a></li>
</ul>
</li>
<li><a href="#type-operators">22. Type Operators</a>
<ul class="sectlevel2">
<li><a href="#as">22.1. As</a></li>
<li><a href="#canconvert">22.2. CanConvert</a></li>
<li><a href="#canconvertquantity">22.3. CanConvertQuantity</a></li>
<li><a href="#children">22.4. Children</a></li>
<li><a href="#convert">22.5. Convert</a></li>
<li><a href="#convertquantity">22.6. ConvertQuantity</a></li>
<li><a href="#convertstoboolean">22.7. ConvertsToBoolean</a></li>
<li><a href="#convertstodate">22.8. ConvertsToDate</a></li>
<li><a href="#convertstodatetime">22.9. ConvertsToDateTime</a></li>
<li><a href="#convertstodecimal">22.10. ConvertsToDecimal</a></li>
<li><a href="#convertstolong">22.11. ConvertsToLong</a></li>
<li><a href="#convertstointeger">22.12. ConvertsToInteger</a></li>
<li><a href="#convertstoquantity">22.13. ConvertsToQuantity</a></li>
<li><a href="#convertstoratio">22.14. ConvertsToRatio</a></li>
<li><a href="#convertstostring">22.15. ConvertsToString</a></li>
<li><a href="#convertstotime">22.16. ConvertsToTime</a></li>
<li><a href="#descendents">22.17. Descendents</a></li>
<li><a href="#is">22.18. Is</a></li>
<li><a href="#toboolean">22.19. ToBoolean</a></li>
<li><a href="#tochars">22.20. ToChars</a></li>
<li><a href="#toconcept">22.21. ToConcept</a></li>
<li><a href="#todate">22.22. ToDate</a></li>
<li><a href="#todatetime">22.23. ToDateTime</a></li>
<li><a href="#todecimal">22.24. ToDecimal</a></li>
<li><a href="#tointeger">22.25. ToInteger</a></li>
<li><a href="#tolist">22.26. ToList</a></li>
<li><a href="#tolong">22.27. ToLong</a></li>
<li><a href="#toquantity">22.28. ToQuantity</a></li>
<li><a href="#toratio">22.29. ToRatio</a></li>
<li><a href="#tostring">22.30. ToString</a></li>
<li><a href="#totime">22.31. ToTime</a></li>
</ul>
</li>
<li><a href="#clinical-operators">23. Clinical Operators</a>
<ul class="sectlevel2">
<li><a href="#anyincodesystem">23.1. AnyInCodeSystem</a></li>
<li><a href="#anyinvalueset">23.2. AnyInValueSet</a></li>
<li><a href="#calculateage">23.3. CalculateAge</a></li>
<li><a href="#calculateageat">23.4. CalculateAgeAt</a></li>
<li><a href="#equal-6">23.5. Equal</a></li>
<li><a href="#equivalent-6">23.6. Equivalent</a></li>
<li><a href="#incodesystem">23.7. InCodeSystem</a></li>
<li><a href="#invalueset">23.8. InValueSet</a></li>
<li><a href="#expandvalueset">23.9. ExpandValueSet</a></li>
<li><a href="#not-equal-6">23.10. Not Equal</a></li>
<li><a href="#subsumedby">23.11. SubsumedBy</a></li>
<li><a href="#subsumes">23.12. Subsumes</a></li>
</ul>
</li>
<li><a href="#errors-and-messages">24. Errors and Messages</a>
<ul class="sectlevel2">
<li><a href="#message">24.1. Message</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes the Expression Logical Model (ELM) and how it is used to represent clinical knowledge within a quality artifact.</p>
</div>
<div class="paragraph">
<p>The ELM defines a mechanism for representing artifact logic independent of syntax and special-purpose constructs introduced at the syntactic level. ELM is equivalent to CQL syntax in terms of expressive power: every possible expression in CQL has an equivalent canonical-form expression in ELM. Higher-level constructs such as timing phrases and implicit conversions are represented in terms of the more primitive operators in ELM. This takes the burden of interpretation of higher-level constructs off of implementers, allowing them to focus on the implementation of a more primitive set of functionality.</p>
</div>
<div class="paragraph">
<p>Expressions within ELM are represented as Abstract Syntax Trees. ELM defines the base <em>Expression</em> class, and all language elements and operators are then defined as descendants of the base <em>Expression</em>. For example, the <em>Add</em> class descends from <em>BinaryExpression</em>, which introduces two operands, each of type <em>Expression</em>. The <em>Literal</em> class descends from <em>Expression</em> and allows primitive-typed values such as strings and integers to be represented directly. Using these classes, the expression 2 <span class="sym">+</span> 2 can be represented as instances of the appropriate classes:</p>
</div>
<div id="figure-4-a" class="paragraph">
<p><span class="image"><img src="extracted-media/media/image10.png" alt="image" width="107" height="99"/></span></p>
</div>
<div class="paragraph">
<p>Figure 4‑A - A diagram to explain how ELM represents addition of 2 literal values</p>
</div>
<div class="paragraph">
<p>By combining instances of the appropriate classes of ELM, the logic for any expression can be represented. Note that the type of the expression can be inferred from the representation, Integer in this example.</p>
</div>
<div class="paragraph">
<p>The ELM consists of the following components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Expression – This component defines the core structures for representing expressions, as well as the operations available within those expressions.</p>
</li>
<li>
<p>Clinical Expression – This component extends the Expression component to introduce expressions specific to the clinical quality domain.</p>
</li>
<li>
<p>Library – This component defines the structure of a library, the container, and the basic unit of sharing.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each of these components is defined fully within the ELM UML model. This model is defined formally as an XMI, and the model definition is also presented as an Enterprise Architect Project file (.eap) for viewing.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="elm/model/elm.xmi">Raw XMI Model Definition</a></p>
</li>
<li>
<p><a href="elm/model/ELM.eap">Raw EAP Model Definition</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The documentation provided here serves only as a high-level structural reference for the ELM. The actual content of the specification is defined by the XMI file, and that provides the “source-of-truth” for the ELM specification.</p>
</div>
<div class="paragraph">
<p>Note that the semantics for the operations described here are defined both in the UML model as comments on the node for each operator, as well as the equivalent CQL operation as defined in <a href="09-b-cqlreference.html">Appendix B – CQL Reference</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="simple-values"><a class="anchor" href="#simple-values"></a>1. Simple Values</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Support for simple values is provided by the <em>Literal</em> class. This class defines properties to represent the type of the value, as well as the value itself.</p>
</div>
<div class="sect2">
<h3 id="literal"><a class="anchor" href="#literal"></a>1.1. Literal</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Literal : Expression
  ¦
  1..1 --&gt; valueType
  ¦
  0..1 --&gt; value</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Literal type defines a single scalar value. For example, the literal 5, the boolean value true or the string "antithrombotic".</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="structured-values"><a class="anchor" href="#structured-values"></a>2. Structured Values</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Structured values in ELM are values with sets of named elements (tuples), each of which may have a value of any type. Structured values are most commonly used to represent clinical information such as encounters, problems, and procedures.</p>
</div>
<div class="paragraph">
<p>The <em>Tuple</em> class represents construction of a new structured value, with the values for each element supplied by <em>TupleElement</em> instances.</p>
</div>
<div class="paragraph">
<p>To access elements of a structured value, use the <em>Property</em> expression. A property expression has a <em>path</em> attribute, an optional <em>source</em> element, and a <em>value</em> element. The source element returns the structured value to be accessed. In some usages, such as within a <em>Filter</em> expression, the source is implicit. If used outside such a usage, a source must be provided.</p>
</div>
<div class="paragraph">
<p>The path attribute specifies a property path relative to the source structured value. The property expression returns the value of the property specified by the property path. Property paths are allowed to include qualifiers (<span class="sym">.</span>) as well as indexers (<span class="sym">[x]</span>) to indicate that subelements should be traversed. Indexers specified in paths must be literal integer values.</p>
</div>
<div class="sect2">
<h3 id="tuple"><a class="anchor" href="#tuple"></a>2.1. Tuple</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Tuple : Expression
  ¦
  0..* --&gt; element : TupleElement</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Tuple expression allows tuples of any type to be built up as an expression. The tupleType attribute specifies the type of the tuple being built, if any, and the list of tuple elements specify the values for the elements of the tuple. Note that the value of an element may be any expression, including another Tuple.</p>
</div>
<div class="paragraph">
<p>The following example illustrates the construction of a tuple using the <em>Tuple</em> class:</p>
</div>
<div id="figure-4-h" class="paragraph">
<p><span class="image"><img src="extracted-media/media/image17.png" alt="image" width="190" height="157"/></span></p>
</div>
<div class="paragraph">
<p>Figure 4‑H - A diagram to explain how ELM represents the construction of a <span class="kw">Tuple</span></p>
</div>
</div>
<div class="sect2">
<h3 id="instance"><a class="anchor" href="#instance"></a>2.2. Instance</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Instance : Expression
  ¦
  0..* --&gt; element : InstanceElement
  ¦
  1..1 --&gt; classType</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Instance expression allows class instances of any type to be built up as an expression. The classType attribute specifies the type of the class instance being built, and the list of instance elements specify the values for the elements of the class instance. Note that the value of an element may be any expression, including another Instance.</p>
</div>
<div class="paragraph">
<p>The following example illustrates the construction of a structured value using the <em>Instance</em> class:</p>
</div>
<div id="figure-4-i" class="paragraph">
<p><span class="image"><img src="extracted-media/media/image18.png" alt="image" width="184" height="152"/></span></p>
</div>
<div class="paragraph">
<p>Figure 4‑I - A diagram to explain how ELM represents the construction of a structured value using the <span class="kw">Instance</span> class</p>
</div>
</div>
<div class="sect2">
<h3 id="property"><a class="anchor" href="#property"></a>2.3. Property</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Property : Expression
  ¦
  0..1 --&gt; source : Expression
  ¦
  1..1 --&gt; path
  ¦
  0..1 --&gt; scope</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Property operator returns the value of the property on source specified by the path attribute.</p>
</div>
<div class="paragraph">
<p>If the result of evaluating source is null, the result is null.</p>
</div>
<div class="paragraph">
<p>The path attribute may include qualifiers (.) and indexers ([x]). Indexers must be literal integer values.</p>
</div>
<div class="paragraph">
<p>If the path attribute contains qualifiers or indexers, each qualifier or indexer is traversed to obtain the actual value. If the object of the property access at any point in traversing the path is null, the result is null.</p>
</div>
<div class="paragraph">
<p>If a scope is specified, the name is used to resolve the scope in which the path will be resolved. Scopes can be named by operators such as Filter and ForEach.</p>
</div>
<div class="paragraph">
<p>Property expressions can also be used to access the individual points and closed indicators for interval types using the property names low, high, lowClosed, and highClosed.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="clinical-values"><a class="anchor" href="#clinical-values"></a>3. Clinical Values</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following represents clinical information in ELM.</p>
</div>
<div class="sect2">
<h3 id="code"><a class="anchor" href="#code"></a>3.1. Code</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Code : Expression
  ¦
  1..1 --&gt; system : CodeSystemRef
  ¦
  1..1 --&gt; code
  ¦
  0..1 --&gt; display</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Code type represents a literal code selector.</p>
</div>
</div>
<div class="sect2">
<h3 id="codedef"><a class="anchor" href="#codedef"></a>3.2. CodeDef</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">CodeDef : Element
  ¦
  0..1 --&gt; codeSystem : CodeSystemRef <b class="conum">(1)</b>
  ¦
  1..1 --&gt; name
  ¦
  1..1 --&gt; id
  ¦
  0..1 --&gt; display
  ¦
  0..1 --&gt; accessLevel</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The code system that contains the code being referenced.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The CodeDef type defines a code identifier that can then be used to reference single codes anywhere within an expression.</p>
</div>
</div>
<div class="sect2">
<h3 id="coderef"><a class="anchor" href="#coderef"></a>3.3. CodeRef</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">CodeRef : Expression
  ¦
  0..1 --&gt; name
  ¦
  0..1 --&gt; libraryName</code></pre>
</div>
</div>
<div class="paragraph">
<p>The CodeRef expression allows a previously defined code to be referenced within an expression.</p>
</div>
</div>
<div class="sect2">
<h3 id="codesystemdef"><a class="anchor" href="#codesystemdef"></a>3.4. CodeSystemDef</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">CodeSystemDef : Element
  ¦
  1..1 --&gt; name
  ¦
  1..1 --&gt; id
  ¦
  0..1 --&gt; version
  ¦
  0..1 --&gt; accessLevel</code></pre>
</div>
</div>
<div class="paragraph">
<p>The CodeSystemDef type defines a code system identifier that can then be used to identify code systems involved in value set definitions.</p>
</div>
</div>
<div class="sect2">
<h3 id="codesystemref"><a class="anchor" href="#codesystemref"></a>3.5. CodeSystemRef</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">CodeSystemRef : Expression
  ¦
  0..1 --&gt; name
  ¦
  0..1 --&gt; libraryName</code></pre>
</div>
</div>
<div class="paragraph">
<p>The CodeSystemRef expression allows a previously defined named code system to be referenced within an expression. Conceptually, referencing a code system returns the set of codes in the code system. Note that this operation should almost never be performed in practice. Code system references are allowed in order to allow for testing of code membership in a particular code system.</p>
</div>
</div>
<div class="sect2">
<h3 id="concept"><a class="anchor" href="#concept"></a>3.6. Concept</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Concept : Expression
  ¦
  1..* --&gt; code : Code
  ¦
  0..1 --&gt; display</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Concept type represents a literal concept selector.</p>
</div>
</div>
<div class="sect2">
<h3 id="conceptdef"><a class="anchor" href="#conceptdef"></a>3.7. ConceptDef</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ConceptDef : Element
  ¦
  1..* --&gt; code : CodeRef <b class="conum">(1)</b>
  ¦
  1..1 --&gt; name
  ¦
  0..1 --&gt; display
  ¦
  0..1 --&gt; accessLevel</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>A code that makes up the concept. All codes within a given concept must be synonyms.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The ConceptDef type defines a concept identifier that can then be used to reference single concepts anywhere within an expression.</p>
</div>
</div>
<div class="sect2">
<h3 id="conceptref"><a class="anchor" href="#conceptref"></a>3.8. ConceptRef</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ConceptRef : Expression
  ¦
  0..1 --&gt; name
  ¦
  0..1 --&gt; libraryName</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ConceptRef expression allows a previously defined concept to be referenced within an expression.</p>
</div>
</div>
<div class="sect2">
<h3 id="quantity"><a class="anchor" href="#quantity"></a>3.9. Quantity</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Quantity : Expression
  ¦
  0..1 --&gt; value
  ¦
  0..1 --&gt; unit</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Quantity type defines a clinical quantity. For example, the quantity 10 days or 30 mmHg. The value is a decimal, while the unit is expected to be a valid UCUM unit or calendar duration keyword, singular or plural.</p>
</div>
</div>
<div class="sect2">
<h3 id="ratio"><a class="anchor" href="#ratio"></a>3.10. Ratio</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Ratio : Expression
  ¦
  1..1 --&gt; numerator : Quantity
  ¦
  1..1 --&gt; denominator : Quantity</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Ratio type defines a ratio between two quantities. For example, the titre 1:128, or the concentration ratio 5 mg/10 mL. The numerator and denominator are both quantities.</p>
</div>
</div>
<div class="sect2">
<h3 id="valuesetdef"><a class="anchor" href="#valuesetdef"></a>3.11. ValueSetDef</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ValueSetDef : Element
  ¦
  0..* --&gt; codeSystem : CodeSystemRef <b class="conum">(1)</b>
  ¦
  0..1 --&gt; name
  ¦
  1..1 --&gt; id
  ¦
  0..1 --&gt; version
  ¦
  0..1 --&gt; accessLevel</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The code system that should be used to construct the expansion set. Note that the recommended approach to statically binding to an expansion set is to use a value set definition that specifies the version of each code system used. The codeSystem elements are provided only to ensure static binding can be achieved when the value set definition does not specify code system versions as part of the definition header.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The ValueSetDef type defines a value set identifier that can be referenced by name anywhere within an expression.</p>
</div>
<div class="paragraph">
<p>The id specifies the globally unique identifier for the value set. This may be an HL7 OID, a FHIR URL, or a CTS2 value set URL.</p>
</div>
<div class="paragraph">
<p>If version is specified, it will be used to resolve the version of the value set definition to be used. Otherwise, the most current published version of the value set is assumed.</p>
</div>
<div class="paragraph">
<p>If codeSystems are specified, they will be used to resolve the code systems used within the value set definition to construct the expansion set.
Note that the recommended approach to statically binding to an expansion set is to use a value set definition that specifies the version of each code system used. The codeSystemVersions attribute is provided only to ensure static binding can be achieved when the value set definition does not specify code system versions as part of the definition header.</p>
</div>
</div>
<div class="sect2">
<h3 id="valuesetref"><a class="anchor" href="#valuesetref"></a>3.12. ValueSetRef</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ValueSetRef : Expression
  ¦
  0..1 --&gt; name
  ¦
  0..1 --&gt; libraryName
  |
  0..1 --&gt; preserve</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ValueSetRef expression allows a previously defined named value set to be referenced within an expression. Conceptually, referencing a value set returns the expansion set for the value set as a list of codes.</p>
</div>
<div class="paragraph">
<p>The preserve attribute is trial-use in CQL 1.5.2 and was introduced to allow engines to determine whether or not to expand a ValueSetRef (the 1.4 behavior), ensuring that 1.5 engines can run 1.4 ELM.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="type-specifiers"><a class="anchor" href="#type-specifiers"></a>4. Type Specifiers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ELM provides the following elements for type specifiers.</p>
</div>
<div class="sect2">
<h3 id="typespecifier"><a class="anchor" href="#typespecifier"></a>4.1. TypeSpecifier</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">TypeSpecifier : Element</code></pre>
</div>
</div>
<div class="paragraph">
<p>TypeSpecifier is the abstract base type for all type specifiers.</p>
</div>
</div>
<div class="sect2">
<h3 id="namedtypespecifier"><a class="anchor" href="#namedtypespecifier"></a>4.2. NamedTypeSpecifier</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">NamedTypeSpecifier : TypeSpecifier
  ¦
  1..1 --&gt; name</code></pre>
</div>
</div>
<div class="paragraph">
<p>NamedTypeSpecifier defines a type identified by a name, such as Integer, String, Patient, or Encounter.</p>
</div>
</div>
<div class="sect2">
<h3 id="intervaltypespecifier"><a class="anchor" href="#intervaltypespecifier"></a>4.3. IntervalTypeSpecifier</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">IntervalTypeSpecifier : TypeSpecifier
  ¦
  1..1 --&gt; pointType : TypeSpecifier</code></pre>
</div>
</div>
<div class="paragraph">
<p>IntervalTypeSpecifier defines an interval type by specifying the point type. Any type can serve as the point type for an interval, so long as it supports comparison operators, minimum and maximum value determination, as well as predecessor and successor functions.</p>
</div>
</div>
<div class="sect2">
<h3 id="listtypespecifier"><a class="anchor" href="#listtypespecifier"></a>4.4. ListTypeSpecifier</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ListTypeSpecifier : TypeSpecifier
  ¦
  1..1 --&gt; elementType : TypeSpecifier</code></pre>
</div>
</div>
<div class="paragraph">
<p>ListTypeSpecifier defines a list type by specifying the type of elements the list may contain.</p>
</div>
</div>
<div class="sect2">
<h3 id="tupletypespecifier"><a class="anchor" href="#tupletypespecifier"></a>4.5. TupleTypeSpecifier</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">TupleTypeSpecifier : TypeSpecifier
  ¦
  0..* --&gt; element : TupleElementDefinition</code></pre>
</div>
</div>
<div class="paragraph">
<p>TupleTypeSpecifier defines the possible elements of a tuple.</p>
</div>
</div>
<div class="sect2">
<h3 id="choicetypespecifier"><a class="anchor" href="#choicetypespecifier"></a>4.6. ChoiceTypeSpecifier</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ChoiceTypeSpecifier : TypeSpecifier
  ¦
  0..* --&gt; type : TypeSpecifier <b class="conum">(1)</b>
  ¦
  0..* --&gt; choice : TypeSpecifier</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This element is deprecated. New implementations should use the new choice element.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>ChoiceTypeSpecifier defines the possible types of a choice type.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="libraries-2"><a class="anchor" href="#libraries-2"></a>5. Libraries</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ELM defines the notion of a library as the basic container for logic constructs. Libraries consist of sets of declarations including data model references, library references, valueset definitions, parameters, functions, and named expressions. The <em>Library</em> class defines this unit and defines properties for each of these types of declarations.</p>
</div>
<div class="paragraph">
<p>Once defined, libraries can then be referenced by other libraries with the <em>IncludeDef</em> class, which defines properties for the name and version of the library being referenced, as well as a local name that is used to access components of the library.</p>
</div>
<div class="sect2">
<h3 id="library"><a class="anchor" href="#library"></a>5.1. Library</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Library : Element
  ¦
  1..1 --&gt; identifier : VersionedIdentifier <b class="conum">(1)</b>
  ¦
  1..1 --&gt; schemaIdentifier : VersionedIdentifier <b class="conum">(2)</b>
  ¦
  0..1 --&gt; usings <b class="conum">(3)</b>
  ¦        ¦
  ¦        1..* --&gt; def : UsingDef <b class="conum">(4)</b>
  ¦
  0..1 --&gt; includes <b class="conum">(5)</b>
  ¦        ¦
  ¦        1..* --&gt; def : IncludeDef <b class="conum">(6)</b>
  ¦
  0..1 --&gt; parameters <b class="conum">(7)</b>
  ¦        ¦
  ¦        0..* --&gt; def : ParameterDef
  ¦
  0..1 --&gt; codeSystems <b class="conum">(8)</b>
  ¦        ¦
  ¦        0..* --&gt; def : CodeSystemDef
  ¦
  0..1 --&gt; valueSets <b class="conum">(9)</b>
  ¦        ¦
  ¦        0..* --&gt; def : ValueSetDef
  ¦
  0..1 --&gt; codes <b class="conum">(10)</b>
  ¦        ¦
  ¦        0..* --&gt; def : CodeDef
  ¦
  0..1 --&gt; concepts <b class="conum">(11)</b>
  ¦        ¦
  ¦        0..* --&gt; def : ConceptDef
  ¦
  0..1 --&gt; contexts <b class="conum">(12)</b>
  ¦        ¦
  ¦        0..* --&gt; def : ContextDef
  ¦
  0..1 --&gt; statements <b class="conum">(13)</b>
           ¦
           0..* --&gt; def : ExpressionDef</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The identifier element defines a unique identifier for this library, and optionally, a system (or namespace) and version.</p>
</li>
<li>
<p>This is the identifier of the XML schema (and its version) which governs the structure of this Library.</p>
</li>
<li>
<p>Set of data models referenced in the Expression objects in this knowledge artifact.</p>
</li>
<li>
<p>A reference to a data model that is used in the artifact, e.g., the Virtual Medical Record.</p>
</li>
<li>
<p>Set of libraries referenced by this artifact. Components of referenced libraries may be used within this artifact.</p>
</li>
<li>
<p>A reference to a library whose components can be used within the artifact.</p>
</li>
<li>
<p>The parameters defined within this library.</p>
</li>
<li>
<p>The code systems defined within this library.</p>
</li>
<li>
<p>The value sets defined within this library.</p>
</li>
<li>
<p>The codes defined within this library.</p>
</li>
<li>
<p>The concepts defined within this library.</p>
</li>
<li>
<p>The contexts used within this library.</p>
</li>
<li>
<p>The statements section contains the expression and function definitions for the library.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A Library is an instance of a CQL-ELM library.</p>
</div>
</div>
<div class="sect2">
<h3 id="includedef"><a class="anchor" href="#includedef"></a>5.2. IncludeDef</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">IncludeDef : Element
  ¦
  1..1 --&gt; localIdentifier
  ¦
  0..1 --&gt; mediaType
  ¦
  1..1 --&gt; path
  ¦
  0..1 --&gt; version</code></pre>
</div>
</div>
<div class="paragraph">
<p>Includes a library for use within the artifact.</p>
</div>
</div>
<div class="sect2">
<h3 id="versionedidentifier"><a class="anchor" href="#versionedidentifier"></a>5.3. VersionedIdentifier</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">VersionedIdentifier
  ¦
  0..1 --&gt; id
  ¦
  0..1 --&gt; system
  ¦
  0..1 --&gt; version</code></pre>
</div>
</div>
<div class="paragraph">
<p>VersionedIdentifier is composed of three parts: (1) an optional system, or
  namespace, which provides a globally unique, stable scope for the identifier,
  (2) an identifier which identifies the set of all versions of a given resource, and
  (3) the actual version of the instance of interest in this set. The VersionedIdentifier
  therefore points to an individual 'versioned' instance of a resource such as the third
  version of a library.</p>
</div>
</div>
<div class="sect2">
<h3 id="contextdef"><a class="anchor" href="#contextdef"></a>5.4. ContextDef</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ContextDef : Element
  ¦
  1..1 --&gt; name <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The name of the context</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The ContextDef type defines a context used within the library.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="data-model"><a class="anchor" href="#data-model"></a>6. Data Model</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ELM does not reference any specific data model, and so can be used to represent logic expressed against any data model. These data models are specified using the <em>UsingDef</em> class. This class provides attributes for specifying the name and version of the data model. An ELM library can reference any number of models.</p>
</div>
<div class="paragraph">
<p>The name of the model is an implementation-specific identifier that provides the environment with a mechanism for finding the model description. The details of how that model description is provided are part of the physical representation.</p>
</div>
<div class="sect2">
<h3 id="usingdef"><a class="anchor" href="#usingdef"></a>6.1. UsingDef</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">UsingDef : Element
  ¦
  1..1 --&gt; localIdentifier
  ¦
  1..1 --&gt; uri
  ¦
  0..1 --&gt; version</code></pre>
</div>
</div>
<div class="paragraph">
<p>Defines a data model that is available within the artifact.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="parameters"><a class="anchor" href="#parameters"></a>7. Parameters</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In addition to external data, ELM provides a mechanism for defining parameters to an artifact. A library can define any number of parameters, each of which has a name, and a defined type, as well as an optional default value.</p>
</div>
<div class="paragraph">
<p>Parameter values, if any, are expected to be provided as part of the evaluation request, and can be accessed with a <em>ParameterRef</em> expression in any expression throughout the library.</p>
</div>
<div class="sect2">
<h3 id="parameterdef"><a class="anchor" href="#parameterdef"></a>7.1. ParameterDef</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ParameterDef : Element
  ¦
  0..1 --&gt; default : Expression
  ¦
  0..1 --&gt; parameterTypeSpecifier : TypeSpecifier
  ¦
  0..1 --&gt; name
  ¦
  0..1 --&gt; parameterType
  ¦
  0..1 --&gt; accessLevel</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ParameterDef type defines a parameter that can be referenced by name anywhere within an expression.</p>
</div>
<div class="paragraph">
<p>Parameters are defined at the artifact level, and may be provided as part of the payload for an evaluation request.</p>
</div>
<div class="paragraph">
<p>If no parameter value is provided, the default element is used to provide the value for the parameter.</p>
</div>
<div class="paragraph">
<p>If no parameter or default is provided, the parameter is defined to be null.</p>
</div>
<div class="paragraph">
<p>Note that the expression specified in the default element must be able to be evaluated at compile-time (i.e. without reference to any run-time capabilities such as data, terminology, and library references, both local and included).</p>
</div>
</div>
<div class="sect2">
<h3 id="parameterref"><a class="anchor" href="#parameterref"></a>7.2. ParameterRef</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ParameterRef : Expression
  ¦
  0..1 --&gt; name
  ¦
  0..1 --&gt; libraryName</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ParameterRef expression allows the value of a parameter to be referenced as part of an expression.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="expressions"><a class="anchor" href="#expressions"></a>8. Expressions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The ELM Expression component defines a mechanism for representing the structure of logic.</p>
</div>
<div class="paragraph">
<p>Every expression in ELM is represented as a descendant of the abstract base element <em>Expression</em>. In addition, several abstract descendants are introduced to support the representation of unary, binary, ternary, and n-ary operators. Note that an expression need not descend from one of these descendants, it may descend from <em>Expression</em> directly.</p>
</div>
<div class="sect2">
<h3 id="expression"><a class="anchor" href="#expression"></a>8.1. Expression</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Expression : Element</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Expression type defines the abstract base type for all expressions used in the ELM expression language.</p>
</div>
</div>
<div class="sect2">
<h3 id="operatorexpression"><a class="anchor" href="#operatorexpression"></a>8.2. OperatorExpression</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">OperatorExpression : Expression
  ¦
  0..* --&gt; signature : TypeSpecifier <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Specifies the declared signature of the operator or function being called. If no signature is specified, the run-time types of the operands should be used to resolve any overload.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The Operator type defines the abstract base type for all built-in operators used in the ELM expression language. This explicitly excludes FunctionRef, which is the concrete type for all function invocations.</p>
</div>
</div>
<div class="sect2">
<h3 id="unaryexpression"><a class="anchor" href="#unaryexpression"></a>8.3. UnaryExpression</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">UnaryExpression : OperatorExpression
  ¦
  1..1 --&gt; operand : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The UnaryExpression type defines the abstract base type for expressions that take a single argument.</p>
</div>
</div>
<div class="sect2">
<h3 id="binaryexpression"><a class="anchor" href="#binaryexpression"></a>8.4. BinaryExpression</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">BinaryExpression : OperatorExpression
  ¦
  2..2 --&gt; operand : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The BinaryExpression type defines the abstract base type for expressions that take two arguments.</p>
</div>
</div>
<div class="sect2">
<h3 id="ternaryexpression"><a class="anchor" href="#ternaryexpression"></a>8.5. TernaryExpression</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">TernaryExpression : OperatorExpression
  ¦
  3..3 --&gt; operand : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The TernaryExpression type defines the abstract base type for expressions that take three arguments.</p>
</div>
</div>
<div class="sect2">
<h3 id="naryexpression"><a class="anchor" href="#naryexpression"></a>8.6. NaryExpression</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">NaryExpression : OperatorExpression
  ¦
  0..* --&gt; operand : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The NaryExpression type defines an abstract base class for an expression that takes any number of arguments, including zero.</p>
</div>
</div>
<div class="sect2">
<h3 id="aggregateexpression"><a class="anchor" href="#aggregateexpression"></a>8.7. AggregateExpression</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">AggregateExpression : Expression
  ¦
  0..* --&gt; signature : TypeSpecifier <b class="conum">(1)</b>
  ¦
  1..1 --&gt; source : Expression
  ¦
  0..1 --&gt; path</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Specifies the declared signature of the operator or function being called. If no signature is specified, the run-time types of the operands should be used to resolve any overload.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Aggregate expressions perform operations on lists of data, either directly on a list of scalars, or indirectly on a list of objects, with a reference to a property present on each object in the list.</p>
</div>
<div class="paragraph">
<p>Aggregate expressions deal with missing information by excluding missing values from consideration before performing the aggregated operation. For example, in a Sum over Dose, any instance of Medication with no value for Dose would be ignored.</p>
</div>
<div class="paragraph">
<p>An aggregate operation performed over an empty list is defined to return null, except as noted in the documentation for each operator (Count, AllTrue, and AnyTrue are the exceptions).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="reusing-logic"><a class="anchor" href="#reusing-logic"></a>9. Reusing Logic</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ELM provides a mechanism for reusing expressions by declaring a named expression. This construct is similar to a function call with no parameters in a traditional imperative language, with the exception that since ELM is a pure-functional system, the result of the evaluation could be cached by an implementation to avoid performing the same computation multiple times.</p>
</div>
<div class="paragraph">
<p>In addition, ELM provides a more traditional function call with named parameters that can then be accessed by the expression in the function body, and passed as part of the call from the invoking environment.</p>
</div>
<div class="paragraph">
<p>The <em>ExpressionDef</em> class is used to define a named expression that can then be referenced by other expressions. The <em>FunctionDef</em> class is used to define a function and its parameters.</p>
</div>
<div class="paragraph">
<p>Note that circular expression references are not allowed, but that named expressions can be defined in any order, so long as the actual references do not result in a cycle.</p>
</div>
<div class="paragraph">
<p>The <em>ExpressionDef</em> class introduces the notion of <em>context</em> which specifies the name of a context defined by the model, such as Patient, Practitioner, or Unfiltered. This context defines how the contained expression is evaluated, either with respect to a single subject, defined by the evaluation environment, or with respect to the entire system. For more information about patient context, please refer to the <a href="#external-data">External Data</a> section.</p>
</div>
<div class="sect2">
<h3 id="expressiondef"><a class="anchor" href="#expressiondef"></a>9.1. ExpressionDef</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ExpressionDef : Element
  ¦
  0..1 --&gt; expression : Expression
  ¦
  0..1 --&gt; name
  ¦
  0..1 --&gt; context
  ¦
  0..1 --&gt; accessLevel</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ExpressionDef type defines an expression and an associated name that can be referenced by any expression in the artifact. The name must be unique within the artifact.</p>
</div>
<div class="paragraph">
<p>The context attribute specifies the context of the execution and is used by the environment to determine whether or not to filter the data returned from retrieves based on the current context.</p>
</div>
</div>
<div class="sect2">
<h3 id="expressionref"><a class="anchor" href="#expressionref"></a>9.2. ExpressionRef</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ExpressionRef : Expression
  ¦
  0..1 --&gt; name
  ¦
  0..1 --&gt; libraryName</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ExpressionRef type defines an expression that references a previously defined NamedExpression. The result of evaluating an ExpressionReference is the result of evaluating the referenced NamedExpression.</p>
</div>
</div>
<div class="sect2">
<h3 id="functiondef"><a class="anchor" href="#functiondef"></a>9.3. FunctionDef</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">FunctionDef : ExpressionDef
  ¦
  0..* --&gt; operand : OperandDef
  ¦
  0..1 --&gt; external
  ¦
  0..1 --&gt; fluent</code></pre>
</div>
</div>
<div class="paragraph">
<p>The FunctionDef type defines a named function that can be invoked by any expression in the artifact. Function names must be unique within the artifact. Functions may take any number of operands.</p>
</div>
</div>
<div class="sect2">
<h3 id="functionref"><a class="anchor" href="#functionref"></a>9.4. FunctionRef</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">FunctionRef : ExpressionRef
  ¦
  0..* --&gt; signature : TypeSpecifier <b class="conum">(1)</b>
  ¦
  0..* --&gt; operand : Expression</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Specifies the declared signature of the function being called. If no signature is specified, the run-time types of the operands should be used to resolve any overload.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The FunctionRef type defines an expression that invokes a previously defined function. The result of evaluating each operand is passed to the function.</p>
</div>
</div>
<div class="sect2">
<h3 id="operandref"><a class="anchor" href="#operandref"></a>9.5. OperandRef</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">OperandRef : Expression
  ¦
  0..1 --&gt; name</code></pre>
</div>
</div>
<div class="paragraph">
<p>The OperandRef expression allows the value of an operand to be referenced as part of an expression within the body of a function definition.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="queries"><a class="anchor" href="#queries"></a>10. Queries</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ELM provides a mechanism for expressing the structure of a query.</p>
</div>
<div class="paragraph">
<p>For more information on query semantics, refer to the <a href="02-authorsguide.html#queries">Queries</a> section of the <a href="02-authorsguide.html">Author’s Guide</a>, as well as the <a href="03-developersguide.html#multi-source-queries">Multi-Source Queries</a> and <a href="03-developersguide.html#non-retrieve-queries">Non-Retrieve Queries</a> sections of the <a href="03-developersguide.html">Developer’s Guide</a>.</p>
</div>
<div class="sect2">
<h3 id="query"><a class="anchor" href="#query"></a>10.1. Query</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Query : Expression
  ¦
  1..* --&gt; source : AliasedQuerySource
  ¦
  0..* --&gt; let : LetClause
  ¦
  0..* --&gt; relationship : RelationshipClause
  ¦
  0..1 --&gt; where : Expression
  ¦
  0..1 --&gt; return : ReturnClause
  ¦
  0..1 --&gt; aggregate : AggregateClause
  ¦
  0..1 --&gt; sort : SortClause</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Query operator represents a clause-based query. The result of the query is determined by the type of sources included, as well as the clauses used in the query.</p>
</div>
</div>
<div class="sect2">
<h3 id="aliasedquerysource"><a class="anchor" href="#aliasedquerysource"></a>10.2. AliasedQuerySource</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">AliasedQuerySource : Element
  ¦
  1..1 --&gt; expression : Expression
  ¦
  1..1 --&gt; alias</code></pre>
</div>
</div>
<div class="paragraph">
<p>The AliasedQuerySource element defines a single source for inclusion in a query scope. The type of the source is determined by the expression element, and the source can be accessed within the query scope by the given alias.</p>
</div>
</div>
<div class="sect2">
<h3 id="aliasref"><a class="anchor" href="#aliasref"></a>10.3. AliasRef</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">AliasRef : Expression
  ¦
  0..1 --&gt; name</code></pre>
</div>
</div>
<div class="paragraph">
<p>The AliasRef expression allows for the reference of a specific source within the scope of a query.</p>
</div>
</div>
<div class="sect2">
<h3 id="bycolumn"><a class="anchor" href="#bycolumn"></a>10.4. ByColumn</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ByColumn : SortByItem
  ¦
  0..1 --&gt; path</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ByColumn element specifies that the sort should be performed using the given column and direction. This approach is used to specify the sort order for a query when the result is a list of tuples.</p>
</div>
</div>
<div class="sect2">
<h3 id="bydirection"><a class="anchor" href="#bydirection"></a>10.5. ByDirection</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ByDirection : SortByItem</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ByDirection element specifies that the sort should be performed using the given direction. This approach is used when the result of the query is a list of non-tuple elements and only the sort direction needs to be specified.</p>
</div>
</div>
<div class="sect2">
<h3 id="byexpression"><a class="anchor" href="#byexpression"></a>10.6. ByExpression</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ByExpression : SortByItem
  ¦
  1..1 --&gt; expression : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ByExpression element specifies that the sort should be performed using the given expression and direction. This approach is used to specify the sort order as a calculated expression.</p>
</div>
</div>
<div class="sect2">
<h3 id="identifierref"><a class="anchor" href="#identifierref"></a>10.7. IdentifierRef</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">IdentifierRef : Expression
  ¦
  1..1 --&gt; name
  ¦
  0..1 --&gt; libraryName</code></pre>
</div>
</div>
<div class="paragraph">
<p>The IdentifierRef type defines an expression that references an identifier that is either unresolved, or has been resolved to an attribute in an unambiguous iteration scope such as a sort. Implementations should attempt to resolve the identifier, only throwing an error at compile-time (or run-time for an interpretive system) if the identifier reference cannot be resolved.</p>
</div>
</div>
<div class="sect2">
<h3 id="letclause"><a class="anchor" href="#letclause"></a>10.8. LetClause</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">LetClause : Element
  ¦
  1..1 --&gt; expression : Expression
  ¦
  1..1 --&gt; identifier</code></pre>
</div>
</div>
<div class="paragraph">
<p>The LetClause element allows any number of expression definitions to be introduced within a query scope. Defined expressions can be referenced by name within the query scope.</p>
</div>
</div>
<div class="sect2">
<h3 id="queryletref"><a class="anchor" href="#queryletref"></a>10.9. QueryLetRef</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">QueryLetRef : Expression
  ¦
  0..1 --&gt; name</code></pre>
</div>
</div>
<div class="paragraph">
<p>The QueryLetRef expression allows for the reference of a specific let definition within the scope of a query.</p>
</div>
</div>
<div class="sect2">
<h3 id="relationshipclause"><a class="anchor" href="#relationshipclause"></a>10.10. RelationshipClause</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">RelationshipClause : AliasedQuerySource
  ¦
  1..1 --&gt; suchThat : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The RelationshipClause element allows related sources to be used to restrict the elements included from another source in a query scope. Note that the elements referenced by the relationship clause can only be accessed within the suchThat condition, and that elements of the related source are not included in the query scope.</p>
</div>
</div>
<div class="sect2">
<h3 id="returnclause"><a class="anchor" href="#returnclause"></a>10.11. ReturnClause</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ReturnClause : Element
  ¦
  1..1 --&gt; expression : Expression
  ¦
  0..1 --&gt; distinct</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ReturnClause element defines the shape of the result set of the query.</p>
</div>
</div>
<div class="sect2">
<h3 id="aggregateclause"><a class="anchor" href="#aggregateclause"></a>10.12. AggregateClause</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">AggregateClause : Element
  ¦
  1..1 --&gt; expression : Expression
  ¦
  0..1 --&gt; starting : Expression
  ¦
  1..1 --&gt; identifier
  ¦
  0..1 --&gt; distinct</code></pre>
</div>
</div>
<div class="paragraph">
<p>The AggregateClause element defines the result of the query in terms of an aggregation expression performed for each item in the query.</p>
</div>
</div>
<div class="sect2">
<h3 id="sortclause"><a class="anchor" href="#sortclause"></a>10.13. SortClause</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">SortClause : Element
  ¦
  1..* --&gt; by : SortByItem</code></pre>
</div>
</div>
<div class="paragraph">
<p>The SortClause element defines the sort order for the query.</p>
</div>
</div>
<div class="sect2">
<h3 id="with"><a class="anchor" href="#with"></a>10.14. With</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">With : RelationshipClause</code></pre>
</div>
</div>
<div class="paragraph">
<p>The With clause restricts the elements of a given source to only those elements that have elements in the related source that satisfy the suchThat condition. This operation is known as a semi-join in database languages.</p>
</div>
</div>
<div class="sect2">
<h3 id="without"><a class="anchor" href="#without"></a>10.15. Without</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Without : RelationshipClause</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Without clause restricts the elements of a given source to only those elements that do not have elements in the related source that satisfy the suchThat condition. This operation is known as a semi-difference in database languages.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="external-data"><a class="anchor" href="#external-data"></a>11. External Data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All access to external data within ELM is represented by <em>Retrieve</em> expressions.</p>
</div>
<div class="paragraph">
<p>The <em>Retrieve</em> class defines the data type of the request, which determines the type of elements to be returned. The result will always be a list of values of the type specified in the request.</p>
</div>
<div class="paragraph">
<p>The type of the elements to be returned is specified with the <em>dataType</em> attribute of the <em>Retrieve</em>, and must refer to the name of a type within a known data model specified in the <em>dataModels</em> element of the library definition.</p>
</div>
<div class="paragraph">
<p>In addition, the <em>Retrieve</em> introduces the ability to specify optional criteria for the request. The available criteria are intentionally restricted to the set of codes involved, and the date range involved. If these criteria are omitted, the request is interpreted to mean all data of that type.</p>
</div>
<div class="paragraph">
<p>Note that because every expression is being evaluated within a context (such as Patient, Practitioner, or Unfiltered) as defined by the containing <em>ExpressionDef</em>, the data returned by a retrieve depends on the context. For example, for the Patient context, the data is returned for a single patient only, as defined by the evaluation environment. Whereas for the Unfiltered context, the data is returned for the entire source.</p>
</div>
<div class="sect2">
<h3 id="retrieve"><a class="anchor" href="#retrieve"></a>11.1. Retrieve</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Retrieve : Expression
  ¦
  0..1 --&gt; id : Expression
  ¦
  0..1 --&gt; codes : Expression
  ¦
  0..1 --&gt; dateRange : Expression
  ¦
  0..1 --&gt; context : Expression
  ¦
  0..* --&gt; include : IncludeElement
  ¦
  1..1 --&gt; dataType
  ¦
  0..1 --&gt; templateId
  ¦
  0..1 --&gt; idProperty
  ¦
  0..1 --&gt; idSearch
  ¦
  0..1 --&gt; contextProperty
  ¦
  0..1 --&gt; contextSearch
  ¦
  0..1 --&gt; codeProperty
  ¦
  0..1 --&gt; codeSearch
  ¦
  0..1 --&gt; codeComparator
  ¦
  0..1 --&gt; valueSetProperty
  ¦
  0..1 --&gt; dateProperty
  ¦
  0..1 --&gt; dateLowProperty
  ¦
  0..1 --&gt; dateHighProperty
  ¦
  0..1 --&gt; dateSearch</code></pre>
</div>
</div>
<div class="paragraph">
<p>The retrieve expression defines clinical data that will be used by the artifact. This expression allows clinically relevant filtering criteria to be provided in a well-defined and computable way. This operation defines the integration boundary for artifacts. The result of a retrieve is defined to return the same data for subsequent invocations within the same evaluation request. This means in particular that patient data updates made during the evaluation request are not visible to the artifact. In effect, the patient data is a snapshot of the data as of the start of the evaluation. This ensures strict deterministic and functional behavior of the artifact, and allows the implementation engine freedom to cache intermediate results in order to improve performance.</p>
</div>
<div class="sect3">
<h4 id="id"><a class="anchor" href="#id"></a>11.1.1. id</h4>
<div class="paragraph">
<p>The id element optionally specifies an expression that results in a value that can be used to filter the retrieve to a specific id.</p>
</div>
</div>
<div class="sect3">
<h4 id="codes"><a class="anchor" href="#codes"></a>11.1.2. codes</h4>
<div class="paragraph">
<p>The codes element optionally specifies an expression that results in a List&lt;Code&gt; to match against. Only those clinical statements that match at least one of the specified codes will be returned.</p>
</div>
</div>
<div class="sect3">
<h4 id="daterange"><a class="anchor" href="#daterange"></a>11.1.3. dateRange</h4>
<div class="paragraph">
<p>The dateRange element optionally specifies an expression that results in an Interval&lt;DateTime&gt; to match against. Only those clinical statements whose date falls within the specified date range will be returned.</p>
</div>
</div>
<div class="sect3">
<h4 id="context"><a class="anchor" href="#context"></a>11.1.4. context</h4>
<div class="paragraph">
<p>If specified, the context element references an expression that, when evaluated, provides the context for the retrieve. The expression evaluates to the instance id that will be used as the context for the retrieve.</p>
</div>
</div>
<div class="sect3">
<h4 id="include"><a class="anchor" href="#include"></a>11.1.5. include</h4>
<div class="paragraph">
<p>Specifies a related data type to be included in the result as part of the retrieve.</p>
</div>
</div>
<div class="sect3">
<h4 id="datatype"><a class="anchor" href="#datatype"></a>11.1.6. dataType</h4>
<div class="paragraph">
<p>The dataType attribute specifies the type of data being requested.</p>
</div>
</div>
<div class="sect3">
<h4 id="templateid"><a class="anchor" href="#templateid"></a>11.1.7. templateId</h4>
<div class="paragraph">
<p>For data models that support templates (also called profiles), The templateId attribute specifies an optional template to be used. If specified, the retrieve is defined to return only objects that conform to the template.</p>
</div>
</div>
<div class="sect3">
<h4 id="idproperty"><a class="anchor" href="#idproperty"></a>11.1.8. idProperty</h4>
<div class="paragraph">
<p>The idProperty attribute specifies which property of the model contains the Id for the clinical statement.</p>
</div>
<div class="paragraph">
<p>This property may be specified as a path, including qualifiers and constant indexers. The &lt;simplePath&gt; production rule in the CQL grammar provides the formal semantics for this path.</p>
</div>
</div>
<div class="sect3">
<h4 id="idsearch"><a class="anchor" href="#idsearch"></a>11.1.9. idSearch</h4>
<div class="paragraph">
<p>The idSearch attribute specifies the name of the search path to use for searching for the values in the id element.</p>
</div>
</div>
<div class="sect3">
<h4 id="contextproperty"><a class="anchor" href="#contextproperty"></a>11.1.10. contextProperty</h4>
<div class="paragraph">
<p>The contextProperty attribute optionally specifies which property of the model contains the context value.</p>
</div>
<div class="paragraph">
<p>Note that implementers could also specify this information elsewhere as part of an implementation catalog, rather than on each Retrieve expression, but allowing it to be specified in the retrieve expression gives the most flexibility. Note also that even in the case of an implementation catalog, implementations would still need to respect contextProperty values in the ELM due to the possibility of the retrieve specifying alternate context paths. From the persepctive of ELM, the specification ensures that ELM can be processed without reference to the model information.</p>
</div>
<div class="paragraph">
<p>This property may be specified as a path, including qualifiers and constant indexers. The &lt;simplePath&gt; production rule in the CQL grammar provides the formal semantics for this path.</p>
</div>
</div>
<div class="sect3">
<h4 id="contextsearch"><a class="anchor" href="#contextsearch"></a>11.1.11. contextSearch</h4>
<div class="paragraph">
<p>The contextSearch attribute specifies the name of the search path to use for searching for the context values.</p>
</div>
</div>
<div class="sect3">
<h4 id="codeproperty"><a class="anchor" href="#codeproperty"></a>11.1.12. codeProperty</h4>
<div class="paragraph">
<p>The codeProperty attribute optionally specifies which property of the model contains the Code or Codes for the clinical statement.</p>
</div>
<div class="paragraph">
<p>Note that implementers could also specify this information elsewhere as part of an implementation catalog, rather than on each Retrieve expression, but allowing it to be specified in the retrieve expression gives the most flexibility. Note also that even in the case of an implementation catalog, implementations would still need to respect codeProperty values in the ELM due to the possibility of the retrieve specifying alternate code filters. From the perspective of ELM, the specification ensures that ELM can be processed without reference to the model information.</p>
</div>
<div class="paragraph">
<p>This property may be specified as a path, including qualifiers and constant indexers. The &lt;simplePath&gt; production rule in the CQL grammar provides the formal semantics for this path.</p>
</div>
</div>
<div class="sect3">
<h4 id="codesearch"><a class="anchor" href="#codesearch"></a>11.1.13. codeSearch</h4>
<div class="paragraph">
<p>The codeSearch attribute specifies the name of the search path to use for searching for the values in the code element.</p>
</div>
</div>
<div class="sect3">
<h4 id="codecomparator"><a class="anchor" href="#codecomparator"></a>11.1.14. codeComparator</h4>
<div class="paragraph">
<p>The codeComparator attribute specifies how elements of the code property should be matched to the terminology. One of 'in', '=', or '~'. Note that 'in' will resolve to the appropriate terminology matching operator, resulting in equivalence semantics for value set and code system membership testing.</p>
</div>
</div>
<div class="sect3">
<h4 id="valuesetproperty"><a class="anchor" href="#valuesetproperty"></a>11.1.15. valueSetProperty</h4>
<div class="paragraph">
<p>The valueSetProperty attribute optionally specifies which property of the model contains a value set identifier that can be used as an alternative mechanism for matching the value set of the retrieve, in the case when no code is specified in the source data.</p>
</div>
<div class="paragraph">
<p>This attribute is intended to address the case where systems representing negation rationale for an activity not performed do so by indicating a valueset identifier rather than a code. For example, when indicating that a medication was not administered, the value set identifier for the expected medication is used, rather than indicating a specific medication that was not administered. In this case, the valueSetProperty attribute allows the retrieve to specify where to look for the value set identifier without needing to change the conceptual data model or the CQL logic describing the negated activity.</p>
</div>
<div class="paragraph">
<p>Note that implementers could also specify this information elsewhere as part of an implementation catalog, rather than on each Retrieve expression, but allowing it to be specified in the retrieve expression gives the most flexibility. From the perspective of ELM, the specification ensures that ELM can be processed without reference to the model information.</p>
</div>
<div class="paragraph">
<p>This property may be specified as a path, including qualifiers and constant indexers. The &lt;simplePath&gt; production rule in the CQL grammar provides the formal semantics for this path.</p>
</div>
</div>
<div class="sect3">
<h4 id="dateproperty"><a class="anchor" href="#dateproperty"></a>11.1.16. dateProperty</h4>
<div class="paragraph">
<p>The dateProperty attribute optionally specifies which property of the model contains the clinically relevant date for the clinical statement.</p>
</div>
<div class="paragraph">
<p>This property is expected to reference a property that is either a Date or DateTime, or an interval of Date or DateTime. In either case, the result set will only include instances where the value of the dateProperty is during the date range. For Date or DateTime values, this means the date is both the same or after the beginning of the range, and the same or before the end of the range. For Date- or DateTime-based interval values, this means that the entire interval is included in the date range.</p>
</div>
<div class="paragraph">
<p>Instances with no value for the dateProperty will not be included in the result set if a date range is specified.</p>
</div>
<div class="paragraph">
<p>Note that if the dateProperty is specified, the dateLowProperty and dateHighProperty attributes must not be present. And conversely, if the dateLowProperty and dateHighProperty attributes are specified, the dateProperty must not be present. If specified, the dateLowProperty and dateHighProperty values will be used to construct an interval with inclusive boundaries for the date range.</p>
</div>
<div class="paragraph">
<p>This property may be specified as a path, including qualifiers and constant indexers. The &lt;simplePath&gt; production rule in the CQL grammar provides the formal semantics for this path.</p>
</div>
</div>
<div class="sect3">
<h4 id="datelowproperty"><a class="anchor" href="#datelowproperty"></a>11.1.17. dateLowProperty</h4>
<div class="paragraph">
<p>The dateLowProperty attribute optionally specifies which property of the model contains the low component of the clinically relevant date for the clinical statement.</p>
</div>
<div class="paragraph">
<p>Note that if the dateProperty is specified, the dateLowProperty and dateHighProperty attributes must not be present. And conversely, if the dateLowProperty and dateHighProperty attributes are specified, the dateProperty must not be present.</p>
</div>
<div class="paragraph">
<p>This property may be specified as a path, including qualifiers and constant indexers. The &lt;simplePath&gt; production rule in the CQL grammar provides the formal semantics for this path.</p>
</div>
</div>
<div class="sect3">
<h4 id="datehighproperty"><a class="anchor" href="#datehighproperty"></a>11.1.18. dateHighProperty</h4>
<div class="paragraph">
<p>The dateHighProperty attribute optionally specifies which property of the model contains the high component of the clinically relevant date for the clinical statement.</p>
</div>
<div class="paragraph">
<p>Note that if the dateProperty is specified, the dateLowProperty and dateHighProperty attributes must not be present. And conversely, if the dateLowProperty and dateHighProperty attributes are specified, the dateProperty must not be present.</p>
</div>
<div class="paragraph">
<p>This property may be specified as a path, including qualifiers and constant indexers. The &lt;simplePath&gt; production rule in the CQL grammar provides the formal semantics for this path.</p>
</div>
</div>
<div class="sect3">
<h4 id="datesearch"><a class="anchor" href="#datesearch"></a>11.1.19. dateSearch</h4>
<div class="paragraph">
<p>The dateSearch attribute specifies the name of the search path to use for searching for values in the date range specified by the dateRange element.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="includeelement"><a class="anchor" href="#includeelement"></a>11.2. IncludeElement</h3>
<div class="paragraph">
<p>The IncludeElement type specifies include information for an include within a retrieve.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">IncludeElement : Element
  ¦
  0..1 --&gt; relatedDataType
  ¦
  0..1 --&gt; relatedProperty
  ¦
  0..1 --&gt; relatedSearch
  ¦
  0..1 --&gt; isReverse</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="relateddatatype"><a class="anchor" href="#relateddatatype"></a>11.2.1. relatedDataType</h4>
<div class="paragraph">
<p>The relatedDataType attribute specifies the type of the related data being requested.</p>
</div>
</div>
<div class="sect3">
<h4 id="relatedproperty"><a class="anchor" href="#relatedproperty"></a>11.2.2. relatedProperty</h4>
<div class="paragraph">
<p>The relatedProperty attribute specifies which property of the relatedDataType contains the relatedId for the clinical statement.</p>
</div>
<div class="paragraph">
<p>This property may be specified as a path, including qualifiers and constant indexers. The &lt;simplePath&gt; production rule in the CQL grammar provides the formal semantics for this path.</p>
</div>
</div>
<div class="sect3">
<h4 id="relatedsearch"><a class="anchor" href="#relatedsearch"></a>11.2.3. relatedSearch</h4>
<div class="paragraph">
<p>The relatedSearch attribute specifies the name of the search path to use for searching for data of the relatedDataType.</p>
</div>
</div>
<div class="sect3">
<h4 id="isreverse"><a class="anchor" href="#isreverse"></a>11.2.4. isReverse</h4>
<div class="paragraph">
<p>The isReverse attribute indicates that the include is reverse, i.e. that the relatedDataType is referencing the data being retrieved, rather than the retrieved data referencing the relatedDataType.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="comparison-operators-1"><a class="anchor" href="#comparison-operators-1"></a>12. Comparison Operators</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ELM defines a standard set of comparison operators for use with simple values. Each comparison operator takes two arguments of the same type, and returns a boolean indicating the result of the comparison. Note that for comparison operators, if either or both operands evaluate to null, the result of the comparison is <em>null</em>, not false.</p>
</div>
<div class="paragraph">
<p>For more information on the semantics of the various comparison operators, see the <a href="09-b-cqlreference.html#comparison-operators-4">Comparison Operators</a> section of the <a href="09-b-cqlreference.html">CQL Reference</a>.</p>
</div>
<div class="sect2">
<h3 id="equal"><a class="anchor" href="#equal"></a>12.1. Equal</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Equal : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Equal operator returns true if the arguments are equal; false if the arguments are known unequal, and null otherwise. Equality semantics are defined to be value-based.</p>
</div>
<div class="paragraph">
<p>For simple types, this means that equality returns true if and only if the result of each argument evaluates to the same value.</p>
</div>
<div class="paragraph">
<p>For string values, equality is strictly lexical based on the Unicode values for the individual characters in the strings.</p>
</div>
<div class="paragraph">
<p>For decimal values, trailing zeroes are ignored.</p>
</div>
<div class="paragraph">
<p>For quantities, this means that the dimensions of each quantity must be the same, but not necessarily the unit. For example, units of 'cm' and 'm' are comparable, but units of 'cm2' and 'cm' are not. Attempting to operate on quantities with invalid units will result in null. When a quantity has no units specified, it is treated as a quantity with the default unit ('1').</p>
</div>
<div class="paragraph">
<p>For time-valued quantities, UCUM definite-time duration quantities above days (and weeks) are not comparable to calendar duration quantities above days (and weeks). Definite-time duration unit conversions shall be performed as specified in ISO-8601, while calendar-time duration unit conversions shall be performed according to the calendar duration semantics. In particular, unit conversion between variable length calendar durations (i.e. years and months) and definite-time durations (i.e. days or below) results in null.</p>
</div>
<div class="paragraph">
<p>For ratios, this means that the numerator and denominator must be the same, using quantity equality semantics.</p>
</div>
<div class="paragraph">
<p>For tuple types, this means that equality returns true if and only if the tuples are of the same type, and the values for all elements that have values, by name, are equal.</p>
</div>
<div class="paragraph">
<p>For list types, this means that equality returns true if and only if the lists contain elements of the same type, have the same number of elements, and for each element in the lists, in order, the elements are equal using equality semantics, with the exception that null elements are considered equal.</p>
</div>
<div class="paragraph">
<p>For interval types, equality returns true if and only if the intervals are over the same point type, and they have the same value for the starting and ending points of the interval as determined by the Start and End operators.</p>
</div>
<div class="paragraph">
<p>For Date, DateTime, and Time values, the comparison is performed by considering each precision in order, beginning with years (or hours for time values). If the values are the same, comparison proceeds to the next precision; if the values are different, the comparison stops and the result is false. If one input has a value for the precision and the other does not, the comparison stops and the result is null; if neither input has a value for the precision or the last precision has been reached, the comparison stops and the result is true. For the purposes of comparison, seconds and milliseconds are combined as a single precision using a decimal, with decimal equality semantics.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>The following example illustrates a simple <em>Equal</em> comparison:</p>
</div>
<div id="figure-4-b" class="paragraph">
<p><span class="image"><img src="extracted-media/media/image11.png" alt="image" width="109" height="102"/></span></p>
</div>
<div class="paragraph">
<p>Figure 4‑B - A diagram to explain how ELM represents an equal comparison</p>
</div>
</div>
<div class="sect2">
<h3 id="equivalent"><a class="anchor" href="#equivalent"></a>12.2. Equivalent</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Equivalent : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Equivalent operator returns true if the arguments are the same value, or if they are both null; and false otherwise.</p>
</div>
<div class="paragraph">
<p>With the exception of null behavior and the semantics for specific types defined below, equivalence is the same as equality.</p>
</div>
<div class="paragraph">
<p>For string values, equivalence returns true if the strings are the same value while ignoring case and locale, and normalizing whitespace. Normalizing whitespace means that all whitespace characters are treated as equivalent, with whitespace characters as defined in the whitespace lexical category.</p>
</div>
<div class="paragraph">
<p>For decimals, equivalent means the values are the same with the comparison done on values rounded to the precision of the least precise operand; trailing zeroes after the decimal are ignored in determining precision for equivalent comparison.</p>
</div>
<div class="paragraph">
<p>For quantities, equivalent means the values are the same quantity when considering unit conversion (e.g. 100 'cm' ~ 1 'm') and using decimal equivalent semantics for the value. Note that implementations are not required to support unit conversion and so are allowed to return false for equivalence of quantities with different units.</p>
</div>
<div class="paragraph">
<p>For time-valued quantities, UCUM definite-time duration quantities above days (and weeks) are considered equivalent to their calendar duration counterparts. Definite-time duration unit conversions shall be performed as specified in ISO-8601, while calendar-time duration unit conversions shall be performed according to the calendar duration semantics. In particular, unit conversion between variable length calendar durations (i.e. years and months) and definite-time durations (i.e. days or below) uses the approximations of 365 days in a year, and 30 days in a month.</p>
</div>
<div class="paragraph">
<p>For ratios, equivalent means that the numerator and denominator represent the same ratio (e.g. 1:100 ~ 10:1000).</p>
</div>
<div class="paragraph">
<p>For tuple types, this means that two tuple values are equivalent if and only if the tuples are of the same type, and the values for all elements by name are equivalent.</p>
</div>
<div class="paragraph">
<p>For list types, this means that two lists are equivalent if and only if the lists contain elements of the same type, have the same number of elements, and for each element in the lists, in order, the elements are equivalent.</p>
</div>
<div class="paragraph">
<p>For interval types, this means that two intervals are equivalent if and only if the intervals are over the same point type, and the starting and ending points of the intervals as determined by the Start and End operators are equivalent.</p>
</div>
<div class="paragraph">
<p>For Date, DateTime, and Time values, the comparison is performed in the same way as it is for equality, except that if one input has a value for a given precision and the other does not, the comparison stops and the result is false, rather than null. As with equality, the second and millisecond precisions are combined and combined as a single precision using a decimal, with decimal equivalence semantics.</p>
</div>
<div class="paragraph">
<p>For Code values, equivalence is defined based on the code and system elements only. The display and version elements are ignored for the purposes of determining Code equivalence.</p>
</div>
<div class="paragraph">
<p>For Concept values, equivalence is defined as a non-empty intersection of the codes in each Concept.</p>
</div>
<div class="paragraph">
<p>Note that this operator will always return true or false, even if either or both of its arguments are null or contain null components.</p>
</div>
</div>
<div class="sect2">
<h3 id="greater"><a class="anchor" href="#greater"></a>12.3. Greater</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Greater : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Greater operator returns true if the first argument is greater than the second argument.</p>
</div>
<div class="paragraph">
<p>For comparisons involving quantities, the dimensions of each quantity must be the same, but not necessarily the unit. For example, units of 'cm' and 'm' are comparable, but units of 'cm2' and 'cm' are not. Attempting to operate on quantities with invalid units will result in a <span class="kw">null</span>. When a quantity has no units specified, it is treated as a quantity with the default unit (<span class="lit">'1'</span>).</p>
</div>
<div class="paragraph">
<p>For time-valued quantities, the UCUM definite-quantity durations above days (and weeks) are not comparable to calendar durations. Definite-time duration unit conversions shall be performed as specified in ISO-8601, while calendar-time duration unit conversions shall be performed according to calendar duration semantics. In particular, unit conversion between variable length calendar durations (i.e. years and months) and definite-time durations (i.e. days or below) results in <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>For Date, DateTime, and Time values, the comparison is performed by considering each precision in order, beginning with years (or hours for time values). If the values are the same, comparison proceeds to the next precision; if the first value is greater than the second, the result is true; if the first value is less than the second, the result is false; if one input has a value for the precision and the other does not, the comparison stops and the result is null; if neither input has a value for the precision or the last precision has been reached, the comparison stops and the result is false. For the purposes of comparison, seconds and milliseconds are combined as a single precision using a decimal, with decimal comparison semantics.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>The Greater operator is defined for the Integer, Long, Decimal, String, Date, DateTime, Time, and Quantity types.</p>
</div>
<div class="quoteblock note-info">
<blockquote>
<div class="paragraph">
<p>Note that relative ratio comparisons are not directly supported due to the variance of uses within healthcare. See the discussion in <a href="02-authorsguide.html#ratio-operators">Ratio Operators</a> for more information.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="greaterorequal"><a class="anchor" href="#greaterorequal"></a>12.4. GreaterOrEqual</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">GreaterOrEqual : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The GreaterOrEqual operator returns true if the first argument is greater than or equal to the second argument.</p>
</div>
<div class="paragraph">
<p>For comparisons involving quantities, the dimensions of each quantity must be the same, but not necessarily the unit. For example, units of 'cm' and 'm' are comparable, but units of 'cm2' and 'cm' are not. Attempting to operate on quantities with invalid units will result in a <span class="kw">null</span>. When a quantity has no units specified, it is treated as a quantity with the default unit (<span class="lit">'1'</span>).</p>
</div>
<div class="paragraph">
<p>For time-valued quantities, the UCUM definite-quantity durations above days (and weeks) are not comparable to calendar durations. Definite-time duration unit conversions shall be performed as specified in ISO-8601, while calendar-time duration unit conversions shall be performed according to calendar duration semantics. In particular, unit conversion between variable length calendar durations (i.e. years and months) and definite-time durations (i.e. days or below) results in <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>For Date, DateTime, and Time values, the comparison is performed by considering each precision in order, beginning with years (or hours for time values). If the values are the same, comparison proceeds to the next precision; if the first value is greater than the second, the result is true; if the first value is less than the second, the result is false; if one input has a value for the precision and the other does not, the comparison stops and the result is null; if neither input has a value for the precision or the last precision has been reached, the comparison stops and the result is true. For the purposes of comparison, seconds and milliseconds are combined as a single precision using a decimal, with decimal comparison semantics.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>The GreaterOrEqual operator is defined for the Integer, Long, Decimal, String, Date, DateTime, Time, and Quantity types.</p>
</div>
<div class="quoteblock note-info">
<blockquote>
<div class="paragraph">
<p>Note that relative ratio comparisons are not directly supported due to the variance of uses within healthcare. See the discussion in <a href="02-authorsguide.html#ratio-operators">Ratio Operators</a> for more information.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="less"><a class="anchor" href="#less"></a>12.5. Less</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Less : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Less operator returns true if the first argument is less than the second argument.</p>
</div>
<div class="paragraph">
<p>For comparisons involving quantities, the dimensions of each quantity must be the same, but not necessarily the unit. For example, units of 'cm' and 'm' are comparable, but units of 'cm2' and 'cm' are not. Attempting to operate on quantities with invalid units will result in a <span class="kw">null</span>. When a quantity has no units specified, it is treated as a quantity with the default unit (<span class="lit">'1'</span>).</p>
</div>
<div class="paragraph">
<p>For time-valued quantities, the UCUM definite-quantity durations above days (and weeks) are not comparable to calendar durations. Definite-time duration unit conversions shall be performed as specified in ISO-8601, while calendar-time duration unit conversions shall be performed according to calendar duration semantics. In particular, unit conversion between variable length calendar durations (i.e. years and months) and definite-time durations (i.e. days or below) results in <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>For Date, DateTime, and Time values, the comparison is performed by considering each precision in order, beginning with years (or hours for time values). If the values are the same, comparison proceeds to the next precision; if the first value is less than the second, the result is true; if the first value is greater than the second, the result is false; if one input has a value for the precision and the other does not, the comparison stops and the result is null; if neither input has a value for the precision or the last precision has been reached, the comparison stops and the result is false. For the purposes of comparison, seconds and milliseconds are combined as a single precision using a decimal, with decimal comparison semantics.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>The Less operator is defined for the Integer, Long, Decimal, String, Date, DateTime, Time, and Quantity types.</p>
</div>
<div class="quoteblock note-info">
<blockquote>
<div class="paragraph">
<p>Note that relative ratio comparisons are not directly supported due to the variance of uses within healthcare. See the discussion in <a href="02-authorsguide.html#ratio-operators">Ratio Operators</a> for more information.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="lessorequal"><a class="anchor" href="#lessorequal"></a>12.6. LessOrEqual</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">LessOrEqual : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The LessOrEqual operator returns true if the first argument is less than or equal to the second argument.</p>
</div>
<div class="paragraph">
<p>For comparisons involving quantities, the dimensions of each quantity must be the same, but not necessarily the unit. For example, units of 'cm' and 'm' are comparable, but units of 'cm2' and 'cm' are not. Attempting to operate on quantities with invalid units will result in a <span class="kw">null</span>. When a quantity has no units specified, it is treated as a quantity with the default unit (<span class="lit">'1'</span>).</p>
</div>
<div class="paragraph">
<p>For time-valued quantities, the UCUM definite-quantity durations above days (and weeks) are not comparable to calendar durations. Definite-time duration unit conversions shall be performed as specified in ISO-8601, while calendar-time duration unit conversions shall be performed according to calendar duration semantics. In particular, unit conversion between variable length calendar durations (i.e. years and months) and definite-time durations (i.e. days or below) results in <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>For Date, DateTime, and Time values, the comparison is performed by considering each precision in order, beginning with years (or hours for time values). If the values are the same, comparison proceeds to the next precision; if the first value is less than the second, the result is true; if the first value is greater than the second, the result is false; if one input has a value for the precision and the other does not, the comparison stops and the result is null; if neither input has a value for the precision or the last precision has been reached, the comparison stops and the result is true. For the purposes of comparison, seconds and milliseconds are combined as a single precision using a decimal, with decimal comparison semantics.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>The LessOrEqual operator is defined for the Integer, Long, Decimal, String, Date, DateTime, Time, and Quantity types.</p>
</div>
<div class="quoteblock note-info">
<blockquote>
<div class="paragraph">
<p>Note that relative ratio comparisons are not directly supported due to the variance of uses within healthcare. See the discussion in <a href="02-authorsguide.html#ratio-operators">Ratio Operators</a> for more information.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="not-equal"><a class="anchor" href="#not-equal"></a>12.7. NotEqual</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">NotEqual : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The NotEqual operator returns true if its arguments are not the same value.</p>
</div>
<div class="paragraph">
<p>The NotEqual operator is a shorthand for invocation of logical negation of the Equal operator.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="logical-operators-1"><a class="anchor" href="#logical-operators-1"></a>13. Logical Operators</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ELM defines logical operators that can be used to combine the results of logical expressions. <em>And</em> and <em>Or</em> can be used to combine any number of results, and <em>Not</em> can be used to invert the result of any expression.</p>
</div>
<div class="paragraph">
<p>Note that these operators are defined with 3-valued logic semantics, allowing the operators to deal consistently with missing information.</p>
</div>
<div class="paragraph">
<p>For more information on the semantics of these operators, refer to the <a href="09-b-cqlreference.html#logical-operators-3">Logical Operators</a> section in the <a href="09-b-cqlreference.html">CQL Reference</a>.</p>
</div>
<div class="sect2">
<h3 id="and"><a class="anchor" href="#and"></a>13.1. And</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">And : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The And operator returns the logical conjunction of its arguments. Note that this operator is defined using 3-valued logic semantics. This means that if either argument is false, the result is false; if both arguments are true, the result is true; otherwise, the result is null. Note also that ELM does not prescribe short-circuit evaluation.</p>
</div>
<div class="paragraph">
<p>The following example illustrates a simple <em>And</em> expression:</p>
</div>
<div id="figure-4-c" class="paragraph">
<p><span class="image"><img src="extracted-media/media/image12.png" alt="image" width="138" height="217"/></span></p>
</div>
<div class="paragraph">
<p>Figure 4‑C - A diagram to explain how ELM represents a simple <span class="kw">And</span> expression</p>
</div>
</div>
<div class="sect2">
<h3 id="implies"><a class="anchor" href="#implies"></a>13.2. Implies</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Implies : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Implies operator returns the logical implication of its arguments. Note that this operator is defined using 3-valued logic semantics. This means that if the left operand evaluates to true, this operator returns the boolean evaluation of the right operand. If the left operand evaluates to false, this operator returns true. Otherwise, this operator returns true if the right operand evaluates to true, and null otherwise.</p>
</div>
<div class="paragraph">
<p>Note that implies may use short-circuit evaluation in the case that the first operand evaluates to false.</p>
</div>
</div>
<div class="sect2">
<h3 id="not"><a class="anchor" href="#not"></a>13.3. Not</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Not : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Not operator returns the logical negation of its argument. If the argument is true, the result is false; if the argument is false, the result is true; otherwise, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="or"><a class="anchor" href="#or"></a>13.4. Or</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Or : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Or operator returns the logical disjunction of its arguments. Note that this operator is defined using 3-valued logic semantics. This means that if either argument is true, the result is true; if both arguments are false, the result is false; otherwise, the result is null. Note also that ELM does not prescribe short-circuit evaluation.</p>
</div>
</div>
<div class="sect2">
<h3 id="xor"><a class="anchor" href="#xor"></a>13.5. Xor</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Xor : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Xor operator returns the exclusive or of its arguments. Note that this operator is defined using 3-valued logic semantics. This means that the result is true if and only if one argument is true and the other is false, and that the result is false if and only if both arguments are true or both arguments are false. If either or both arguments are null, the result is null.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="nullological-operators"><a class="anchor" href="#nullological-operators"></a>14. Nullological Operators</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ELM defines several nullological operators that are useful for dealing with potentially missing information. These are <em>Null, IsNull</em>, <em>IsTrue</em>, <em>IsFalse</em>, and <em>Coalesce</em>.</p>
</div>
<div class="paragraph">
<p>For more information on the semantics of these operators, refer to the <a href="09-b-cqlreference.html#nullological-operators-3">Nullological Operators</a> section in the <a href="09-b-cqlreference.html">CQL Reference</a>.</p>
</div>
<div class="sect2">
<h3 id="null"><a class="anchor" href="#null"></a>14.1. Null</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Null : Expression
  ¦
  0..1 --&gt; valueType</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Null operator returns a null, or missing information marker. To avoid the need to cast this result, the operator is allowed to return a typed null.</p>
</div>
</div>
<div class="sect2">
<h3 id="coalesce"><a class="anchor" href="#coalesce"></a>14.2. Coalesce</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Coalesce : NaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Coalesce operator returns the first non-null result in a list of arguments. If all arguments evaluate to null, the result is null. The static type of the first argument determines the type of the result, and all subsequent arguments must be of that same type.</p>
</div>
</div>
<div class="sect2">
<h3 id="isfalse"><a class="anchor" href="#isfalse"></a>14.3. IsFalse</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">IsFalse : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The IsFalse operator determines whether or not its argument evaluates to false. If the argument evaluates to false, the result is true; if the argument evaluates to true or null, the result is false.</p>
</div>
</div>
<div class="sect2">
<h3 id="isnull"><a class="anchor" href="#isnull"></a>14.4. IsNull</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">IsNull : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The IsNull operator determines whether or not its argument evaluates to null. If the argument evaluates to null, the result is true; otherwise, the result is false.</p>
</div>
</div>
<div class="sect2">
<h3 id="istrue"><a class="anchor" href="#istrue"></a>14.5. IsTrue</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">IsTrue : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The IsTrue operator determines whether or not its argument evaluates to true. If the argument evaluates to true, the result is true; if the argument evaluates to false or null, the result is false.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="conditional-operators"><a class="anchor" href="#conditional-operators"></a>15. Conditional Operators</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ELM defines several conditional expressions that can be used to return different values based on a condition, or set of conditions. These are the <em>If</em> (conditional) expression, and the <em>Case</em> expression.</p>
</div>
<div class="paragraph">
<p>The conditional expression allows a simple condition to be used to decide between one expression or another.</p>
</div>
<div class="paragraph">
<p>The case expression has two varieties, one that is equivalent to repeated conditionals, and one that allows a specific comparand to be identified and compared with each item to determine a result.</p>
</div>
<div class="sect2">
<h3 id="case"><a class="anchor" href="#case"></a>15.1. Case</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Case : Expression
  ¦
  0..1 --&gt; comparand : Expression
  ¦
  1..* --&gt; caseItem : CaseItem
  ¦
  1..1 --&gt; else : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Case operator allows for multiple conditional expressions to be chained together in a single expression, rather than having to nest multiple If operators. In addition, the comparand operand provides a variant on the case that allows a single value to be compared in each conditional.</p>
</div>
<div class="paragraph">
<p>If a comparand is not provided, the type of each when element of the caseItems within the Case is expected to be boolean. If a comparand is provided, the type of each when element of the caseItems within the Case is expected to be of the same type as the comparand. An else element must always be provided.</p>
</div>
<div class="paragraph">
<p>The static type of the then argument within the first caseItem determines the type of the result, and the then argument of each subsequent caseItem and the else argument must be of that same type.</p>
</div>
<div class="paragraph">
<p>The following example illustrates a more complex multi-conditional <em>Case</em> expression:</p>
</div>
<div id="figure-4-e" class="paragraph">
<p><span class="image"><img src="extracted-media/media/image14.png" alt="image" width="230" height="397"/></span></p>
</div>
<div class="paragraph">
<p>Figure 4‑E - A diagram to explain how ELM represents a complex multi-conditional <span class="kw">Case</span> expression</p>
</div>
<div class="paragraph">
<p>And finally, an equivalent comparand-based <em>Case</em> expression:</p>
</div>
<div id="figure-4-f" class="paragraph">
<p><span class="image"><img src="extracted-media/media/image15.png" alt="image" width="184" height="286"/></span></p>
</div>
<div class="paragraph">
<p>Figure 4‑F - A diagram to explain how ELM represents a comparand-base <span class="kw">Case</span> expression</p>
</div>
</div>
<div class="sect2">
<h3 id="if"><a class="anchor" href="#if"></a>15.2. If</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">If : Expression
  ¦
  1..1 --&gt; condition : Expression
  ¦
  1..1 --&gt; then : Expression
  ¦
  1..1 --&gt; else : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The If operator evaluates a condition, and returns the then argument if the condition evaluates to true; if the condition evaluates to false or null, the result of the else argument is returned. The static type of the then argument determines the result type of the conditional, and the else argument must be of that same type.</p>
</div>
<div class="paragraph">
<p>The following examples illustrates a simple <em>If</em> expression (i.e. if / then / else):</p>
</div>
<div id="figure-4-d" class="paragraph">
<p><span class="image"><img src="extracted-media/media/image13.png" alt="image" width="143" height="193"/></span></p>
</div>
<div class="paragraph">
<p>Figure 4‑D - A diagram to explain how ELM represents a simple <span class="kw">If</span> expression</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="arithmetic-operators"><a class="anchor" href="#arithmetic-operators"></a>16. Arithmetic Operators</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ELM provides a complete set of arithmetic operators to allow for manipulation of integer and real values within artifacts. In general, these operators have the expected semantics for arithmetic operators.</p>
</div>
<div class="paragraph">
<p>Note that if an operand evaluates to null, the result of the operation is defined to be null. This provides consistent semantics when dealing with missing information.</p>
</div>
<div class="paragraph">
<p>In general, operations that cause arithmetic overflow or underflow, or otherwise cannot be performed (such as division by 0) will result in null, rather than a run-time error.</p>
</div>
<div class="paragraph">
<p>For more information on the semantics of these operators, refer to the <a href="09-b-cqlreference.html#arithmetic-operators-4">Arithmetic Operators</a> section in the <a href="09-b-cqlreference.html">CQL Reference</a>.</p>
</div>
<div class="sect2">
<h3 id="abs"><a class="anchor" href="#abs"></a>16.1. Abs</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Abs : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Abs operator returns the absolute value of its argument.</p>
</div>
<div class="paragraph">
<p>When taking the absolute value of a quantity, the unit is unchanged.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>If the result of taking the absolute value of the input cannot be represented (e.g. Abs(minimum Integer)), the result is null.</p>
</div>
<div class="paragraph">
<p>The Abs operator is defined for the Integer, Long, Decimal, and Quantity types.</p>
</div>
</div>
<div class="sect2">
<h3 id="add"><a class="anchor" href="#add"></a>16.2. Add</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Add : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Add operator performs numeric addition of its arguments.</p>
</div>
<div class="paragraph">
<p>When adding quantities, the dimensions of each quantity must be the same, but not necessarily the unit. For example, units of 'cm' and 'm' can be added, but units of 'cm2' and 'cm' cannot. The unit of the result will be the most granular unit of either input. Attempting to operate on quantities with invalid units will result in a run-time error.</p>
</div>
<div class="paragraph">
<p>The Add operator is defined for the Integer, Long Decimal, and Quantity types. In addition, a time-valued Quantity can be added to a Date, DateTime or Time using this operator.</p>
</div>
<div class="paragraph">
<p>For Date, DateTime, and Time values, the operator returns the value of the first argument, incremented by the time-valued quantity, respecting variable length periods for calendar years and months.</p>
</div>
<div class="paragraph">
<p>For Date values, the quantity unit must be one of years, months, weeks, or days.</p>
</div>
<div class="paragraph">
<p>For DateTime values, the quantity unit must be one of years, months, weeks, days, hours, minutes, seconds, or milliseconds.</p>
</div>
<div class="paragraph">
<p>For Time values, the quantity unit must be one of hours, minutes, seconds, or milliseconds.</p>
</div>
<div class="paragraph">
<p>Note that as with any date and time operations, temporal units may be specified with either singular, plural, or UCUM units. However, to avoid the potential confusion of calendar-based date and time arithmetic with definite-duration date and time arithmetic, it is an error to attempt to add a definite-duration time-valued unit above days (and weeks), a calendar duration must be used.</p>
</div>
<div class="paragraph">
<p>For precisions above seconds, any decimal portion of the time-valued quantity is ignored, since date/time arithmetic above seconds is performed with calendar duration semantics.</p>
</div>
<div class="paragraph">
<p>For partial date/time values where the time-valued quantity is more precise than the partial date/time, the operation is performed by converting the time-based quantity to the highest specified granularity in the first argument (truncating any resulting decimal portion) and then adding it to the first argument.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>If the result of the addition cannot be represented (i.e. arithmetic overflow), the result is null.</p>
</div>
<div class="paragraph">
<p>The following example illustrates a simple <em>Add</em> expression:</p>
</div>
<div id="figure-4-g" class="paragraph">
<p><span class="image"><img src="extracted-media/media/image16.png" alt="image" width="102" height="94"/></span></p>
</div>
<div class="paragraph">
<p>Figure 4‑G - A diagram to explain how ELM represents a simple <span class="kw">Add</span> expression</p>
</div>
</div>
<div class="sect2">
<h3 id="ceiling"><a class="anchor" href="#ceiling"></a>16.3. Ceiling</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Ceiling : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Ceiling operator returns the first integer greater than or equal to the argument.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="divide"><a class="anchor" href="#divide"></a>16.4. Divide</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Divide : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Divide operator performs numeric division of its arguments. Note that the result type of Divide is Decimal, even if its arguments are of type Integer or Long. For integer division, use the truncated divide operator.</p>
</div>
<div class="paragraph">
<p>For division operations involving quantities, the resulting quantity will have the appropriate unit.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>If the result of the division cannot be represented, or the right argument is 0, the result is null.</p>
</div>
<div class="paragraph">
<p>The Divide operator is defined for the Decimal and Quantity types.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp"><a class="anchor" href="#exp"></a>16.5. Exp</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Exp : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Exp operator returns e raised to the given power.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>If the result of the operation cannot be represented, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="floor"><a class="anchor" href="#floor"></a>16.6. Floor</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Floor : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Floor operator returns the first integer less than or equal to the argument.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="highboundary"><a class="anchor" href="#highboundary"></a>16.7. HighBoundary</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">HighBoundary : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The HighBoundary operator returns the greatest possible value of the input to the specified precision.</p>
</div>
<div class="paragraph">
<p>If no precision is specified, the greatest precision of the type of the input value is used (i.e. at least 8 for Decimal, 4 for Date, at least 17 for DateTime, and at least 9 for Time).</p>
</div>
<div class="paragraph">
<p>If the precision is greater than the maximum possible precision of the implementation, the result is null.</p>
</div>
<div class="paragraph">
<p>The operator can be used with Decimal, Date, DateTime, and Time values.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">HighBoundary(1.587, 8) // 1.58799999
HighBoundary(@2014, 6) // @2014-12
HighBoundary(@2014-01-01T08, 17) // @2014-01-01T08:59:59.999
HighBoundary(@T10:30, 9) // @T10:30:59.999</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the input value is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="log"><a class="anchor" href="#log"></a>16.8. Log</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Log : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Log operator computes the logarithm of its first argument, using the second argument as the base.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>If the result of the operation cannot be represented, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="lowboundary"><a class="anchor" href="#lowboundary"></a>16.9. LowBoundary</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">LowBoundary : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The LowBoundary operator returns the least possible value of the input to the specified precision.</p>
</div>
<div class="paragraph">
<p>If no precision is specified, the greatest precision of the type of the input value is used (i.e. at least 8 for Decimal, 4 for Date, at least 17 for DateTime, and at least 9 for Time).</p>
</div>
<div class="paragraph">
<p>If the precision is greater than the maximum possible precision of the implementation, the result is null.</p>
</div>
<div class="paragraph">
<p>The operator can be used with Decimal, Date, DateTime, and Time values.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">LowBoundary(1.587, 8) // 1.58700000
LowBoundary(@2014, 6) // @2014-01
LowBoundary(@2014-01-01T08, 17) // @2014-01-01T08:00:00.000
LowBoundary(@T10:30, 9) // @T10:30:00.000</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the input value is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="ln"><a class="anchor" href="#ln"></a>16.10. Ln</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Ln : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Ln operator computes the natural logarithm of its argument.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>If the result of the operation cannot be represented, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="maxvalue"><a class="anchor" href="#maxvalue"></a>16.11. MaxValue</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">MaxValue : Expression
  ¦
  1..1 --&gt; valueType</code></pre>
</div>
</div>
<div class="paragraph">
<p>The MaxValue operator returns the maximum representable value for the given type.</p>
</div>
<div class="paragraph">
<p>The MaxValue operator is defined for the Integer, Long, Decimal, Quantity, Date, DateTime, and Time types.</p>
</div>
<div class="paragraph">
<p>For Integer, MaxValue returns the maximum signed 32-bit integer, 2^31 - 1.</p>
</div>
<div class="paragraph">
<p>For Long, MaxValue returns the maximum signed 64-bit integer, 2^63 - 1.</p>
</div>
<div class="paragraph">
<p>For Decimal, MaxValue returns the maximum representable Decimal value, (10^28 - 1) / 10^8 (99999999999999999999.99999999).</p>
</div>
<div class="paragraph">
<p>For Quantity, MaxValue returns the maximum representable quantity, i.e. the maximum representable decimal value with a default unit (1).</p>
</div>
<div class="paragraph">
<p>For Date, MaxValue returns the maximum representable Date value, Date(9999, 12, 31).</p>
</div>
<div class="paragraph">
<p>For DateTime, MaxValue returns the maximum representable DateTime value, DateTime(9999, 12, 31, 23, 59, 59, 999).</p>
</div>
<div class="paragraph">
<p>Note that implementations may choose to represent the maximum DateTime value using a constant offset such as UTC.</p>
</div>
<div class="paragraph">
<p>For Time, MaxValue returns the maximum representable Time value, Time(23, 59, 59, 999).</p>
</div>
<div class="paragraph">
<p>For any other type, attempting to invoke MaxValue results in an error.</p>
</div>
</div>
<div class="sect2">
<h3 id="minvalue"><a class="anchor" href="#minvalue"></a>16.12. MinValue</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">MinValue : Expression
  ¦
  1..1 --&gt; valueType</code></pre>
</div>
</div>
<div class="paragraph">
<p>The MinValue operator returns the minimum representable value for the given type.</p>
</div>
<div class="paragraph">
<p>The MinValue operator is defined for the Integer, Long, Decimal, Quantity, Date, DateTime, and Time types.</p>
</div>
<div class="paragraph">
<p>For Integer, MinValue returns the minimum signed 32-bit integer, -(2^31).</p>
</div>
<div class="paragraph">
<p>For Long, MinValue returns the minimum signed 64-bit integer, -(2^63).</p>
</div>
<div class="paragraph">
<p>For Decimal, MinValue returns the minimum representable Decimal value, (-10^28 + 1) / 10^8 (-99999999999999999999.99999999).</p>
</div>
<div class="paragraph">
<p>For Quantity, MinValue returns the minimum representable quantity, i.e. the minimum representable decimal value with a default unit (1).</p>
</div>
<div class="paragraph">
<p>For Date, MinValue returns the minimum representable Date value, Date(1, 1, 1).</p>
</div>
<div class="paragraph">
<p>For DateTime, MinValue returns the minimum representable DateTime value, DateTime(1, 1, 1, 0, 0, 0, 0).</p>
</div>
<div class="paragraph">
<p>Note that implementations may choose to represent the minimum DateTime value using a constant offset such as UTC.</p>
</div>
<div class="paragraph">
<p>For Time, MinValue returns the minimum representable Time value, Time(0, 0, 0, 0).</p>
</div>
<div class="paragraph">
<p>For any other type, attempting to invoke MinValue results in an error.</p>
</div>
</div>
<div class="sect2">
<h3 id="modulo"><a class="anchor" href="#modulo"></a>16.13. Modulo</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Modulo : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Modulo operator computes the remainder of the division of its arguments.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>If the result of the modulo cannot be represented, or the right argument is 0, the result is null.</p>
</div>
<div class="paragraph">
<p>The Modulo operator is defined for the Integer, Long, Decimal, and Quantity types.</p>
</div>
<div class="paragraph">
<p>For Modulo operations involving quantities, the resulting quantity will have the appropriate unit.</p>
</div>
</div>
<div class="sect2">
<h3 id="multiply"><a class="anchor" href="#multiply"></a>16.14. Multiply</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Multiply : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Multiply operator performs numeric multiplication of its arguments.</p>
</div>
<div class="paragraph">
<p>For multiplication operations involving quantities, the resulting quantity will have the appropriate unit.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>If the result of the operation cannot be represented, the result is null.</p>
</div>
<div class="paragraph">
<p>The Multiply operator is defined for the Integer, Long, Decimal and Quantity types.</p>
</div>
</div>
<div class="sect2">
<h3 id="negate"><a class="anchor" href="#negate"></a>16.15. Negate</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Negate : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Negate operator returns the negative of its argument.</p>
</div>
<div class="paragraph">
<p>When negating quantities, the unit is unchanged.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>If the result of negating the argument cannot be represented (e.g. -(minimum Integer)), the result is null.</p>
</div>
<div class="paragraph">
<p>The Negate operator is defined for the Integer, Long, Decimal, and Quantity types.</p>
</div>
</div>
<div class="sect2">
<h3 id="power"><a class="anchor" href="#power"></a>16.16. Power</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Power : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Power operator raises the first argument to the power given by the second argument.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>If the result of the operation cannot be represented, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="precision"><a class="anchor" href="#precision"></a>16.17. Precision</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Precision : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Precision operator returns the number of digits of precision in the input value.</p>
</div>
<div class="paragraph">
<p>The operator can be used with Decimal, Date, DateTime, and Time values.</p>
</div>
<div class="paragraph">
<p>For Decimal values, the operator returns the number of digits of precision after the decimal place in the input value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Precision(1.58700) // 5</code></pre>
</div>
</div>
<div class="paragraph">
<p>For Date and DateTime values, the operator returns the number of digits of precision in the input value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cql" data-lang="cql">Precision(@2014) // 4
Precision(@2014-01-05T10:30:00.000) // 17
Precision(@T10:30) // 4
Precision(@T10:30:00.000) // 9</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="predecessor"><a class="anchor" href="#predecessor"></a>16.18. Predecessor</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Predecessor : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Predecessor operator returns the predecessor of the argument. For example, the predecessor of 2 is 1. If the argument is already the minimum value for the type, a run-time error is thrown.</p>
</div>
<div class="paragraph">
<p>The Predecessor operator is defined for the Integer, Long, Decimal, Quantity, Date, DateTime, and Time types.</p>
</div>
<div class="paragraph">
<p>For Integer, Predecessor is equivalent to subtracting 1.</p>
</div>
<div class="paragraph">
<p>For Long, Predecessor is equivalent to subtracting 1L.</p>
</div>
<div class="paragraph">
<p>For Decimal, Predecessor is equivalent to subtracting the minimum precision value for the Decimal type, or 10^-08.</p>
</div>
<div class="paragraph">
<p>For Date, DateTime, and Time values, Predecessor is equivalent to subtracting a time-unit quantity for the lowest specified precision of the value. For example, if the DateTime is fully specified, Predecessor is equivalent to subtracting 1 millisecond; if the DateTime is specified to the second, Predecessor is equivalent to subtracting one second, etc.</p>
</div>
<div class="paragraph">
<p>For Quantity values, the Predecessor is equivalent to subtracting 1 if the quantity is an integer, and the minimum precision value for Decimal if the quantity is a decimal. The units are unchanged.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>If the result of the operation cannot be represented, the result is null.</p>
</div>
<div class="quoteblock note-warning">
<blockquote>
<div class="paragraph">
<p>Note that implementations that support more precise values than the minimum required precision and scale for Decimal, DateTime, and Time values, the predecessor will reflect the minimum representable step size for the implementation.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="round"><a class="anchor" href="#round"></a>16.19. Round</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Round : OperatorExpression
  ¦
  1..1 --&gt; operand : Expression
  ¦
  0..1 --&gt; precision : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Round operator returns the nearest integer to its argument. The semantics of round are defined as a traditional round, meaning that a decimal value of 0.5 or higher will round to 1.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>Precision determines the decimal place at which the rounding will occur. If precision is not specified or null, 0 is assumed.</p>
</div>
</div>
<div class="sect2">
<h3 id="subtract"><a class="anchor" href="#subtract"></a>16.20. Subtract</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Subtract : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Subtract operator performs numeric subtraction of its arguments.</p>
</div>
<div class="paragraph">
<p>When subtracting quantities, the dimensions of each quantity must be the same, but not necessarily the unit. For example, units of 'cm' and 'm' can be subtracted, but units of 'cm2' and 'cm' cannot. The unit of the result will be the most granular unit of either input. Attempting to operate on quantities with invalid units will result in a run-time error.</p>
</div>
<div class="paragraph">
<p>The Subtract operator is defined for the Integer, Long, Decimal, and Quantity types. In addition, a time-valued Quantity can be subtracted from a Date, DateTime, or Time using this operator.</p>
</div>
<div class="paragraph">
<p>For Date, DateTime, Time values, the operator returns the value of the first argument, decremented by the time-valued quantity, respecting variable length periods for calendar years and months.</p>
</div>
<div class="paragraph">
<p>For Date values, the quantity unit must be one of years, months, weeks, or days.</p>
</div>
<div class="paragraph">
<p>For DateTime values, the quantity unit must be one of years, months, weeks, days, hours, minutes, seconds, or milliseconds.</p>
</div>
<div class="paragraph">
<p>For Time values, the quantity unit must be one of hours, minutes, seconds, or milliseconds.</p>
</div>
<div class="paragraph">
<p>Note that as with any Date, Time, or DateTime operations, temporal units may be specified with either singular, plural, or UCUM units. However, to avoid the potential confusion of calendar-based date and time arithmetic with definite-duration date and time arithmetic, it is an error to attempt to subtract a definite-duration time-valued unit above days (and weeks), a calendar duration must be used.</p>
</div>
<div class="paragraph">
<p>For precisions above seconds, any decimal portion of the time-valued quantity is ignored, since date/time arithmetic above seconds is performed with calendar duration semantics.</p>
</div>
<div class="paragraph">
<p>For partial date/time values where the time-valued quantity is more precise than the partial date/time, the operation is performed by converting the time-based quantity to the highest specified granularity in the first argument (truncating any resulting decimal portion) and then subtracting it from the first argument.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>If the result of the operation cannot be represented, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="successor"><a class="anchor" href="#successor"></a>16.21. Successor</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Successor : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <span class="id">Successor</span> operator returns the successor of the argument. For example, the successor of 1 is 2. If the argument is already the maximum value for the type, a run-time error is thrown.</p>
</div>
<div class="paragraph">
<p>The <span class="id">Successor</span> operator is defined for the Integer, Long, Decimal, Quantity, Date, DateTime, and Time types.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Integer</span>, <span class="id">Successor</span> is equivalent to adding 1.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Long</span>, <span class="id">Successor</span> is equivalent to adding 1L.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Decimal</span>, <span class="id">Successor</span> is equivalent to adding the minimum precision value for the <span class="id">Decimal</span> type, or 10^-08.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Date</span>, <span class="id">DateTime</span>, and <span class="id">Time</span> values, <span class="id">Successor</span> is equivalent to adding a time-unit quantity for the lowest specified precision of the value. For example, if the <span class="id">DateTime</span> is fully specified, <span class="id">Successor</span> is equivalent to adding 1 millisecond; if the <span class="id">DateTime</span> is specified to the second, <span class="id">Successor</span> is equivalent to adding one second, etc.</p>
</div>
<div class="paragraph">
<p>For <span class="id">Quantity</span> values, <span class="id">Successor</span> is equivalent to adding 1 if the quantity is an integer, and the minimum precision value for the <span class="id">Decimal</span> type if the quantity is a decimal. The units are unchanged.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>If the result of the operation cannot be represented, the result is <span class="kw">null</span>.</p>
</div>
<div class="quoteblock note-warning">
<blockquote>
<div class="paragraph">
<p>Note that implementations that support more precise values than the minimum required precision and scale for Decimal, DateTime, and Time values, the successor will reflect the minimum representable step size for the implementation.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="truncate"><a class="anchor" href="#truncate"></a>16.22. Truncate</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Truncate : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Truncate operator returns the integer component of its argument.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="truncateddivide"><a class="anchor" href="#truncateddivide"></a>16.23. TruncatedDivide</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">TruncatedDivide : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The TruncatedDivide operator performs integer division of its arguments.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>If the result of the operation cannot be represented, or the right argument is 0, the result is null.</p>
</div>
<div class="paragraph">
<p>The TruncatedDivide operator is defined for the Integer, Long, Decimal, and Quantity types.</p>
</div>
<div class="paragraph">
<p>For TruncatedDivide operations involving quantities, the resulting quantity will have the appropriate unit.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="string-operators"><a class="anchor" href="#string-operators"></a>17. String Operators</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ELM defines a set of string operators to allow for manipulation of string values within artifact definitions.</p>
</div>
<div class="paragraph">
<p>Indexes within strings are defined to be 0-based.</p>
</div>
<div class="paragraph">
<p>Note that except as noted within the documentation for each operator, if any argument evaluates to null, the result of the operation is also defined to be null.</p>
</div>
<div class="paragraph">
<p>For more information on the semantics of these operators, refer to the <a href="09-b-cqlreference.html#string-operators-3">String Operators</a> section in the <a href="09-b-cqlreference.html">CQL Reference</a>.</p>
</div>
<div class="sect2">
<h3 id="combine"><a class="anchor" href="#combine"></a>17.1. Combine</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Combine : OperatorExpression
  ¦
  1..1 --&gt; source : Expression
  ¦
  0..1 --&gt; separator : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Combine operator combines a list of strings, optionally separating each string with the given separator.</p>
</div>
<div class="paragraph">
<p>If either argument is null, or any element in the source list of strings is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="concatenate"><a class="anchor" href="#concatenate"></a>17.2. Concatenate</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Concatenate : NaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Concatenate operator performs string concatenation of its arguments.</p>
</div>
<div class="paragraph">
<p>If any argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="endswith"><a class="anchor" href="#endswith"></a>17.3. EndsWith</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">EndsWith : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The EndsWith operator returns true if the given string ends with the given suffix.</p>
</div>
<div class="paragraph">
<p>If the suffix is the empty string, the result is true.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="equal-2"><a class="anchor" href="#equal-2"></a>17.4. Equal</h3>
<div class="paragraph">
<p>Refer to the <a href="#equal">Equal section</a> in the Comparison Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="equivalent-2"><a class="anchor" href="#equivalent-2"></a>17.5. Equivalent</h3>
<div class="paragraph">
<p>Refer to the <a href="#equivalent">Equivalent section</a> in the Comparison Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="indexer"><a class="anchor" href="#indexer"></a>17.6. Indexer</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Indexer : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Indexer operator returns the index<sup>th</sup> element in a string or list.</p>
</div>
<div class="paragraph">
<p>Indexes in strings and lists are defined to be 0-based.</p>
</div>
<div class="paragraph">
<p>If the index is less than 0 or greater than the length of the string or list being indexed, the result is null.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="lastpositionof"><a class="anchor" href="#lastpositionof"></a>17.7. LastPositionOf</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">LastPositionOf : OperatorExpression
  ¦
  1..1 --&gt; pattern : Expression
  ¦
  1..1 --&gt; string : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The LastPositionOf operator returns the 0-based index of the beginning of the last appearance of the given pattern in the given string.</p>
</div>
<div class="paragraph">
<p>If the pattern is not found, the result is -1.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="length"><a class="anchor" href="#length"></a>17.8. Length</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Length : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Length operator returns the length of its argument.</p>
</div>
<div class="paragraph">
<p>For strings, the length is the number of characters in the string.</p>
</div>
<div class="paragraph">
<p>For lists, the length is the number of elements in the list.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is 0.</p>
</div>
</div>
<div class="sect2">
<h3 id="lower"><a class="anchor" href="#lower"></a>17.9. Lower</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Lower : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Lower operator returns the given string with all characters converted to their lowercase equivalents.</p>
</div>
<div class="paragraph">
<p>Note that the definition of lowercase for a given character is a locale-dependent determination, and is not specified by CQL. Implementations are expected to provide appropriate and consistent handling of locale for their environment.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="matches"><a class="anchor" href="#matches"></a>17.10. Matches</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Matches : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Matches operator returns true if the given string matches the given regular expression pattern. Regular expressions should function consistently, regardless of any culture- and locale-specific settings in the environment, should be case-sensitive, use single line mode, and allow Unicode characters.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>Platforms will typically use native regular expression implementations. These are typically fairly similar, but there will always be small differences. As such, CQL does not prescribe a particular dialect, but recommends the use of the <a href="http://www.pcre.org">PCRE</a> dialect.</p>
</div>
</div>
<div class="sect2">
<h3 id="not-equal-2"><a class="anchor" href="#not-equal-2"></a>17.11. Not Equal</h3>
<div class="paragraph">
<p>Refer to the <a href="#not-equal">Not Equal section</a> in the Comparison Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="positionof"><a class="anchor" href="#positionof"></a>17.12. PositionOf</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">PositionOf : OperatorExpression
  ¦
  1..1 --&gt; pattern : Expression
  ¦
  1..1 --&gt; string : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The PositionOf operator returns the 0-based index of the beginning given pattern in the given string.</p>
</div>
<div class="paragraph">
<p>If the pattern is not found, the result is -1.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="replacematches"><a class="anchor" href="#replacematches"></a>17.13. ReplaceMatches</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ReplaceMatches : TernaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ReplaceMatches operator matches the given string using the regular expression pattern, replacing each match with the given substitution. The substitution string may refer to identified match groups in the regular expression. Regular expressions should function consistently, regardless of any culture- and locale-specific settings in the environment, should be case-sensitive, use single line mode and allow Unicode characters.</p>
</div>
<div class="paragraph">
<p>If any argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>Platforms will typically use native regular expression implementations. These are typically fairly similar, but there will always be small differences. As such, CQL does not prescribe a particular dialect, but recommends the use of the <a href="http://www.pcre.org">PCRE</a> dialect.</p>
</div>
</div>
<div class="sect2">
<h3 id="split"><a class="anchor" href="#split"></a>17.14. Split</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Split : OperatorExpression
  ¦
  1..1 --&gt; stringToSplit : Expression
  ¦
  0..1 --&gt; separator : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Split operator splits a string into a list of strings using a separator.</p>
</div>
<div class="paragraph">
<p>If the stringToSplit argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>If the stringToSplit argument does not contain any appearances of the separator, the result is a list of strings containing one element that is the value of the stringToSplit argument.</p>
</div>
</div>
<div class="sect2">
<h3 id="splitonmatches"><a class="anchor" href="#splitonmatches"></a>17.15. SplitOnMatches</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">SplitOnMatches : OperatorExpression
  ¦
  1..1 --&gt; stringToSplit : Expression
  ¦
  1..1 --&gt; separatorPattern : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The SplitOnMatches operator splits a string into a list of strings using matches of a regex pattern.</p>
</div>
<div class="paragraph">
<p>The separatorPattern argument is a regex pattern, following the same semantics as the Matches operator.</p>
</div>
<div class="paragraph">
<p>If the stringToSplit argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>If the stringToSplit argument does not contain any appearances of the separator pattern, the result is a list of strings containing one element that is the input value of the stringToSplit argument.</p>
</div>
</div>
<div class="sect2">
<h3 id="startswith"><a class="anchor" href="#startswith"></a>17.16. StartsWith</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">StartsWith : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The StartsWith operator returns true if the given string starts with the given prefix.</p>
</div>
<div class="paragraph">
<p>If the prefix is the empty string, the result is true.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="substring"><a class="anchor" href="#substring"></a>17.17. Substring</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Substring : OperatorExpression
  ¦
  1..1 --&gt; stringToSub : Expression
  ¦
  1..1 --&gt; startIndex : Expression
  ¦
  0..1 --&gt; length : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Substring operator returns the string within stringToSub, starting at the 0-based index startIndex, and consisting of length characters.</p>
</div>
<div class="paragraph">
<p>If length is omitted, the substring returned starts at startIndex and continues to the end of stringToSub.</p>
</div>
<div class="paragraph">
<p>If stringToSub or startIndex is null, or startIndex is out of range, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="upper"><a class="anchor" href="#upper"></a>17.18. Upper</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Upper : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Upper operator returns the given string with all characters converted to their upper case equivalents.</p>
</div>
<div class="paragraph">
<p>Note that the definition of uppercase for a given character is a locale-dependent determination, and is not specified by CQL. Implementations are expected to provide appropriate and consistent handling of locale for their environment.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="date-and-time-operators"><a class="anchor" href="#date-and-time-operators"></a>18. Date and Time Operators</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ELM defines several operators for representing the manipulation of date and time values. These operators are defined using a common precision type that allows the various precisions (e.g. day, month, week, hour, minute, second) of time to be manipulated.</p>
</div>
<div class="paragraph">
<p>Except as noted within the documentation for each operator, if any argument evaluates to null, the result of the operation is also defined to be null.</p>
</div>
<div class="paragraph">
<p>For more information on the semantics of these operators, refer to the <a href="09-b-cqlreference.html#datetime-operators-2">Date, DateTime, and Time Operators</a> section in the <a href="09-b-cqlreference.html">CQL Reference</a>.</p>
</div>
<div class="sect2">
<h3 id="add-2"><a class="anchor" href="#add-2"></a>18.1. Add</h3>
<div class="paragraph">
<p>Refer to the <a href="#add">Add section</a> in the Arithmetic Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="after"><a class="anchor" href="#after"></a>18.2. After</h3>
<div class="paragraph">
<p>Refer to the <a href="#after-1">After section</a> in the Interval Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="before"><a class="anchor" href="#before"></a>18.3. Before</h3>
<div class="paragraph">
<p>Refer to the <a href="#before-1">Before section</a> in the Interval Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="equal-3"><a class="anchor" href="#equal-3"></a>18.4. Equal</h3>
<div class="paragraph">
<p>Refer to the <a href="#equal">Equal section</a> in the Comparison Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="equivalent-3"><a class="anchor" href="#equivalent-3"></a>18.5. Equivalent</h3>
<div class="paragraph">
<p>Refer to the <a href="#equivalent">Equivalent section</a> in the Comparison Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="date"><a class="anchor" href="#date"></a>18.6. Date</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Date : OperatorExpression
  ¦
  1..1 --&gt; year : Expression
  ¦
  0..1 --&gt; month : Expression
  ¦
  0..1 --&gt; day : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Date operator constructs a date value from the given components.</p>
</div>
<div class="paragraph">
<p>At least one component must be specified, and no component may be specified at a precision below an unspecified precision. For example, month may be null, but if it is, day must be null as well.</p>
</div>
</div>
<div class="sect2">
<h3 id="datefrom"><a class="anchor" href="#datefrom"></a>18.7. DateFrom</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">DateFrom : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The DateFrom operator returns the date (with no time components specified) of the argument.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="datetime"><a class="anchor" href="#datetime"></a>18.8. DateTime</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">DateTime : OperatorExpression
  ¦
  1..1 --&gt; year : Expression
  ¦
  0..1 --&gt; month : Expression
  ¦
  0..1 --&gt; day : Expression
  ¦
  0..1 --&gt; hour : Expression
  ¦
  0..1 --&gt; minute : Expression
  ¦
  0..1 --&gt; second : Expression
  ¦
  0..1 --&gt; millisecond : Expression
  ¦
  0..1 --&gt; timezoneOffset : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The DateTime operator constructs a DateTime value from the given components.</p>
</div>
<div class="paragraph">
<p>At least one component other than timezoneOffset must be specified, and no component may be specified at a precision below an unspecified precision. For example, hour may be null, but if it is, minute, second, and millisecond must all be null as well.</p>
</div>
<div class="paragraph">
<p>If all the arguments are <span class="kw">null</span>, the result is <span class="kw">null</span>, as opposed to a <span class="id">DateTime</span> with no components specified.</p>
</div>
<div class="paragraph">
<p>Although the milliseconds are specified with a separate component, seconds and milliseconds are combined and represented as a <span class="id">Decimal</span> for the purposes of comparison.</p>
</div>
<div class="paragraph">
<p>If timezoneOffset is not specified, it is defaulted to the timezone offset of the evaluation request.</p>
</div>
</div>
<div class="sect2">
<h3 id="datetimecomponentfrom"><a class="anchor" href="#datetimecomponentfrom"></a>18.9. DateTimeComponentFrom</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">DateTimeComponentFrom : UnaryExpression
  ¦
  0..1 --&gt; precision</code></pre>
</div>
</div>
<div class="paragraph">
<p>The DateTimeComponentFrom operator returns the specified component of the argument.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>The precision must be one of Year, Month, Day, Hour, Minute, Second, or Millisecond. Note specifically that since there is variability how weeks are counted, Week precision is not supported, and will result in an error.</p>
</div>
</div>
<div class="sect2">
<h3 id="differencebetween"><a class="anchor" href="#differencebetween"></a>18.10. DifferenceBetween</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">DifferenceBetween : BinaryExpression
  ¦
  0..1 --&gt; precision</code></pre>
</div>
</div>
<div class="paragraph">
<p>The DifferenceBetween operator returns the number of boundaries crossed for the specified precision between the first and second arguments. If the first argument is after the second argument, the result is negative. Because this operation is only counting boundaries crossed, the result is always an integer.</p>
</div>
<div class="paragraph">
<p>For Date values, precision must be one of Year, Month, Week, or Day.</p>
</div>
<div class="paragraph">
<p>For Time values, precision must be one of Hour, Minute, Second, or Millisecond.</p>
</div>
<div class="paragraph">
<p>For calculations involving weeks, Sunday is considered to be the first day of the week for the purposes of determining boundaries.</p>
</div>
<div class="paragraph">
<p>When calculating the difference between DateTime values with different timezone offsets, implementations should normalize to the timezone offset of the evaluation request timestamp, but only when the comparison precision is hours, minutes, seconds, or milliseconds.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>Note that this operator can be implemented using Uncertainty as described in the CQL specification, Chapter 5, Precision-Based Timing.</p>
</div>
</div>
<div class="sect2">
<h3 id="durationbetween"><a class="anchor" href="#durationbetween"></a>18.11. DurationBetween</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">DurationBetween : BinaryExpression
  ¦
  0..1 --&gt; precision</code></pre>
</div>
</div>
<div class="paragraph">
<p>The DurationBetween operator returns the number of whole calendar periods for the specified precision between the first and second arguments. If the first argument is after the second argument, the result is negative. The result of this operation is always an integer; any fractional periods are dropped.</p>
</div>
<div class="paragraph">
<p>For Date values, precision must be one of Year, Month, Week, or Day.</p>
</div>
<div class="paragraph">
<p>For Time values, precision must be one of Hour, Minute, Second, or Millisecond.</p>
</div>
<div class="paragraph">
<p>For calculations involving weeks, the duration of a week is equivalent to 7 days.</p>
</div>
<div class="paragraph">
<p>When calculating duration between DateTime values with different timezone offsets, implementations should normalize to the timezone offset of the evaluation request timestamp, but only when the comparison precision is hours, minutes, seconds, or milliseconds.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>Note that this operator can be implemented using Uncertainty as described in the CQL specification, Chapter 5, Precision-Based Timing.</p>
</div>
</div>
<div class="sect2">
<h3 id="not-equal-3"><a class="anchor" href="#not-equal-3"></a>18.12. Not Equal</h3>
<div class="paragraph">
<p>Refer to the <a href="#not-equal">Not Equal section</a> in the Comparison Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="now"><a class="anchor" href="#now"></a>18.13. Now</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Now : OperatorExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Now operator returns the date and time of the start timestamp associated with the evaluation request. Now is defined in this way for two reasons:
1) The operation will always return the same value within any given evaluation, ensuring that the result of an expression containing Now will always return the same result.</p>
</div>
<div class="paragraph">
<p>2) The operation will return the timestamp associated with the evaluation request, allowing the evaluation to be performed with the same timezone offset information as the data delivered with the evaluation request.</p>
</div>
</div>
<div class="sect2">
<h3 id="sameas"><a class="anchor" href="#sameas"></a>18.14. SameAs</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">SameAs : BinaryExpression
  ¦
  0..1 --&gt; precision</code></pre>
</div>
</div>
<div class="paragraph">
<p>The SameAs operator is defined for Date, DateTime, and Time values, as well as intervals.</p>
</div>
<div class="paragraph">
<p>For the Interval overloads, the SameAs operator returns true if the intervals start and end at the same value, using the semantics described in the Start and End operator to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>The SameAs operator compares two Date, DateTime, or Time values to the specified precision for equality. Individual component values are compared starting from the year component down to the specified precision. If all values are specified and have the same value for each component, then the result is true. If a compared component is specified in both dates, but the values are not the same, then the result is false. Otherwise the result is null, as there is not enough information to make a determination.</p>
</div>
<div class="paragraph">
<p>If no precision is specified, the comparison is performed beginning with years (or hours for time values) and proceeding to the finest precision specified in either input.</p>
</div>
<div class="paragraph">
<p>For Date values, precision must be one of year, month, or day.</p>
</div>
<div class="paragraph">
<p>For DateTime values, precision must be one of year, month, day, hour, minute, second, or millisecond.</p>
</div>
<div class="paragraph">
<p>For Time values, precision must be one of hour, minute, second, or millisecond.</p>
</div>
<div class="paragraph">
<p>Note specifically that due to variability in the way week numbers are determined, comparisons involving weeks are not supported.</p>
</div>
<div class="paragraph">
<p>When comparing DateTime values with different timezone offsets, implementations should normalize to the timezone offset of the evaluation request timestamp, but only when the comparison precision is hours, minutes, seconds, or milliseconds.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="sameorbefore"><a class="anchor" href="#sameorbefore"></a>18.15. SameOrBefore</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">SameOrBefore : BinaryExpression
  ¦
  0..1 --&gt; precision</code></pre>
</div>
</div>
<div class="paragraph">
<p>The SameOrBefore operator is defined for Date, DateTime, and Time values, as well as intervals.</p>
</div>
<div class="paragraph">
<p>For the Interval overload, the SameOrBefore operator returns true if the first interval ends on or before the second one starts. In other words, if the ending point of the first interval is less than or equal to the starting point of the second interval, using the semantics described in the Start and End operators to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>The SameOrBefore operator compares two Date, DateTime, or Time values to the specified precision to determine whether the first argument is the same or before the second argument. The comparison is performed by considering each precision in order, beginning with years (or hours for time values). If the values are the same, comparison proceeds to the next precision; if the first value is less than the second, the result is true; if the first value is greater than the second, the result is false; if either input has no value for the precision, the comparison stops and the result is null; if the specified precision has been reached, the comparison stops and the result is true.</p>
</div>
<div class="paragraph">
<p>If no precision is specified, the comparison is performed beginning with years (or hours for time values) and proceeding to the finest precision specified in either input.</p>
</div>
<div class="paragraph">
<p>For Date values, precision must be one of year, month, or day.</p>
</div>
<div class="paragraph">
<p>For DateTime values, precision must be one of year, month, day, hour, minute, second, or millisecond.</p>
</div>
<div class="paragraph">
<p>For Time values, precision must be one of hour, minute, second, or millisecond.</p>
</div>
<div class="paragraph">
<p>Note specifically that due to variability in the way week numbers are determined, comparisons involving weeks are not supported.</p>
</div>
<div class="paragraph">
<p>When comparing DateTime values with different timezone offsets, implementations should normalize to the timezone offset of the evaluation request timestamp, but only when the comparison precision is hours, minutes, seconds, or milliseconds.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="sameorafter"><a class="anchor" href="#sameorafter"></a>18.16. SameOrAfter</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">SameOrAfter : BinaryExpression
  ¦
  0..1 --&gt; precision</code></pre>
</div>
</div>
<div class="paragraph">
<p>The SameOrAfter operator is defined for Date, DateTime, and Time values, as well as intervals.</p>
</div>
<div class="paragraph">
<p>For the Interval overload, the SameOrAfter operator returns true if the first interval starts on or after the second one ends. In other words, if the starting point of the first interval is greater than or equal to the ending point of the second interval, using the semantics described in the Start and End operators to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>For the Date, DateTime, and Time overloads, this operator compares two Date, DateTime, or Time values to the specified precision to determine whether the first argument is the same or after the second argument. The comparison is performed by considering each precision in order, beginning with years (or hours for time values). If the values are the same, comparison proceeds to the next precision; if the first value is greater than the second, the result is true; if the first value is less than the second, the result is false; if either input has no value for the precision, the comparison stops and the result is null; if the specified precision has been reached, the comparison stops and the result is true.</p>
</div>
<div class="paragraph">
<p>If no precision is specified, the comparison is performed beginning with years (or hours for time values) and proceeding to the finest precision specified in either input.</p>
</div>
<div class="paragraph">
<p>For Date values, precision must be one of year, month, or day.</p>
</div>
<div class="paragraph">
<p>For DateTime values, precision must be one of year, month, day, hour, minute, second, or millisecond.</p>
</div>
<div class="paragraph">
<p>For Time values, precision must be one of hour, minute, second, or millisecond.</p>
</div>
<div class="paragraph">
<p>Note specifically that due to variability in the way week numbers are determined, comparisons involving weeks are not supported.</p>
</div>
<div class="paragraph">
<p>When comparing DateTime values with different timezone offsets, implementations should normalize to the timezone offset of the evaluation request timestamp, but only when the comparison precision is hours, minutes, seconds, or milliseconds.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="subtract-2"><a class="anchor" href="#subtract-2"></a>18.17. Subtract</h3>
<div class="paragraph">
<p>Refer to the <a href="#subtract">Subtract section</a> in the Arithmetic Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="time"><a class="anchor" href="#time"></a>18.18. Time</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Time : OperatorExpression
  ¦
  1..1 --&gt; hour : Expression
  ¦
  0..1 --&gt; minute : Expression
  ¦
  0..1 --&gt; second : Expression
  ¦
  0..1 --&gt; millisecond : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Time operator constructs a time value from the given components.</p>
</div>
<div class="paragraph">
<p>At least one component other than timezoneOffset must be specified, and no component may be specified at a precision below an unspecified precision. For example, minute may be null, but if it is, second, and millisecond must all be null as well.</p>
</div>
<div class="paragraph">
<p>Although the milliseconds are specified with a separate component, seconds and milliseconds are combined and represented as a <span class="id">Decimal</span> for the purposes of comparison.</p>
</div>
</div>
<div class="sect2">
<h3 id="timefrom"><a class="anchor" href="#timefrom"></a>18.19. TimeFrom</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">TimeFrom : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The TimeFrom operator returns the Time of the argument.</p>
</div>
<div class="paragraph">
<p>When extracting the Time from a DateTime value, implementations should normalize to the timezone offset of the evaluation request timestamp.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="timezoneoffsetfrom"><a class="anchor" href="#timezoneoffsetfrom"></a>18.20. TimezoneOffsetFrom</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">TimezoneOffsetFrom : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The TimezoneOffsetFrom operator returns the timezone offset of the argument.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="timeofday"><a class="anchor" href="#timeofday"></a>18.21. TimeOfDay</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">TimeOfDay : OperatorExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The TimeOfDay operator returns the time-of-day of the start timestamp associated with the evaluation request. See the Now operator for more information on the rationale for defining the TimeOfDay operator in this way.</p>
</div>
</div>
<div class="sect2">
<h3 id="today"><a class="anchor" href="#today"></a>18.22. Today</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Today : OperatorExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Today operator returns the date (with no time component) of the start timestamp associated with the evaluation request. See the Now operator for more information on the rationale for defining the Today operator in this way.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="interval-operators"><a class="anchor" href="#interval-operators"></a>19. Interval Operators</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ELM defines a complete set of operators for use in defining and manipulating interval values.</p>
</div>
<div class="paragraph">
<p>Constructing an interval is performed with the <em>Interval</em> expression, which allows the beginning and ending of the interval to be specified, as well as whether the interval beginning and ending is exclusive (open), or inclusive (closed).</p>
</div>
<div class="paragraph">
<p>ELM defines support for basic operations on intervals including determining length, accessing interval properties, and determining interval boundaries.</p>
</div>
<div class="paragraph">
<p>ELM also supports complete operations involving comparisons of intervals, including equality, membership testing, and inclusion testing.</p>
</div>
<div class="paragraph">
<p>In addition, the language supports operators for combining and manipulating intervals.</p>
</div>
<div class="paragraph">
<p>Note that ELM does not include a definition for During because it is synonymous with IncludedIn.</p>
</div>
<div class="paragraph">
<p>For more information on the semantics of these operators, refer to the <a href="09-b-cqlreference.html#interval-operators-3">Interval Operators</a> section in the <a href="09-b-cqlreference.html">CQL Reference</a>.</p>
</div>
<div class="sect2">
<h3 id="interval"><a class="anchor" href="#interval"></a>19.1. Interval</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Interval : Expression
  ¦
  0..1 --&gt; low : Expression
  ¦
  0..1 --&gt; lowClosedExpression : Expression
  ¦
  0..1 --&gt; high : Expression
  ¦
  0..1 --&gt; highClosedExpression : Expression
  ¦
  0..1 --&gt; lowClosed
  ¦
  0..1 --&gt; highClosed</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Interval selector defines an interval value. An interval must be defined using a point type that supports comparison, as well as Successor and Predecessor operations, and Minimum and Maximum Value operations.</p>
</div>
<div class="paragraph">
<p>The low and high bounds of the interval may each be defined as open or closed. Following standard terminology usage in interval mathematics, an open interval is defined to exclude the specified point, whereas a closed interval includes the point. The default is closed, indicating an inclusive interval.</p>
</div>
<div class="paragraph">
<p>The low and high elements are both optional. If the low element is not specified, the low bound of the resulting interval is null. If the high element is not specified, the high bound of the resulting interval is null.</p>
</div>
<div class="paragraph">
<p>The static type of the low bound determines the type of the interval, and the high bound must be of the same type.</p>
</div>
<div class="paragraph">
<p>If the low bound of the interval is null and open, the low bound of the interval is interpreted as unknown and represented as an uncertainty from the minimum value for the point type to the high boundary (inclusive); computations involving the low boundary may result in null.</p>
</div>
<div class="paragraph">
<p>If the low bound of the interval is null and closed, the interval is interpreted to start at the minimum value of the point type, and computations involving the low boundary will be performed with that value.</p>
</div>
<div class="paragraph">
<p>If the high bound of the interval is null and open, the high bound of the interval is unknown and represented as an uncertainty from the low boundary (inclusive) to the maximum value for the point type; computations involving the high boundary may result in null.</p>
</div>
<div class="paragraph">
<p>If the high bound of the interval is null and closed, the interval is interpreted to end at the maximum value of the point type, and computations involving the high boundary will be performed with that interpretation.</p>
</div>
</div>
<div class="sect2">
<h3 id="after-1"><a class="anchor" href="#after-1"></a>19.2. After</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">After : BinaryExpression
  ¦
  0..1 --&gt; precision</code></pre>
</div>
</div>
<div class="paragraph">
<p>The After operator is defined for Intervals, as well as Date, DateTime, and Time values.</p>
</div>
<div class="paragraph">
<p>For the Interval overload, the After operator returns true if the first interval starts after the second one ends. In other words, if the starting point of the first interval is greater than the ending point of the second interval using the semantics described in the Start and End operators to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>For the Date, DateTime, and Time overloads, the After operator returns true if the first datetime is after the second datetime at the specified level of precision. The comparison is performed by considering each precision in order, beginning with years (or hours for time values). If the values are the same, comparison proceeds to the next precision; if the first value is greater than the second, the result is true; if the first value is less than the second, the result is false; if either input has no value for the precision, the comparison stops and the result is null; if the specified precision has been reached, the comparison stops and the result is false.</p>
</div>
<div class="paragraph">
<p>If no precision is specified, the comparison is performed beginning with years (or hours for time values) and proceeding to the finest precision specified in either input.</p>
</div>
<div class="paragraph">
<p>For Date values, precision must be one of year, month, or day.</p>
</div>
<div class="paragraph">
<p>For DateTime values, precision must be one of year, month, day, hour, minute, second, or millisecond.</p>
</div>
<div class="paragraph">
<p>For Time values, precision must be one of hour, minute, second, or millisecond.</p>
</div>
<div class="paragraph">
<p>Note specifically that due to variability in the way week numbers are determined, comparisons involving weeks are not supported.</p>
</div>
<div class="paragraph">
<p>When comparing DateTime values with different timezone offsets, implementations should normalize to the timezone offset of the evaluation request timestamp, but only when the comparison precision is hours, minutes, seconds, or milliseconds.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="before-1"><a class="anchor" href="#before-1"></a>19.3. Before</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Before : BinaryExpression
  ¦
  0..1 --&gt; precision</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Before operator is defined for Intervals, as well as Date, DateTime, and Time values.</p>
</div>
<div class="paragraph">
<p>For the Interval overload, the Before operator returns true if the first interval ends before the second one starts. In other words, if the ending point of the first interval is less than the starting point of the second interval, using the semantics described in the Start and End operators to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>For the Date, DateTime, and Time overloads, the comparison is performed by considering each precision in order, beginning with years (or hours for time values). If the values are the same, comparison proceeds to the next precision; if the first value is less than the second, the result is true; if the first value is greater than the second, the result is false; if either input has no value for the precision, the comparison stops and the result is null; if the specified precision has been reached, the comparison stops and the result is false.</p>
</div>
<div class="paragraph">
<p>If no precision is specified, the comparison is performed beginning with years (or hours for time values) and proceeding to the finest precision specified in either input.</p>
</div>
<div class="paragraph">
<p>For Date values, precision must be one of year, month, or day.</p>
</div>
<div class="paragraph">
<p>For DateTime values, precision must be one of year, month, day, hour, minute, second, or millisecond.</p>
</div>
<div class="paragraph">
<p>For Time values, precision must be one of hour, minute, second, or millisecond.</p>
</div>
<div class="paragraph">
<p>Note specifically that due to variability in the way week numbers are determined, comparisons involving weeks are not supported.</p>
</div>
<div class="paragraph">
<p>When comparing DateTime values with different timezone offsets, implementations should normalize to the timezone offset of the evaluation request timestamp, but only when the comparison precision is hours, minutes, seconds, or milliseconds.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="collapse"><a class="anchor" href="#collapse"></a>19.4. Collapse</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Collapse : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Collapse operator returns the unique set of intervals that completely covers the ranges present in the given list of intervals. In other words, adjacent intervals within a sorted list are merged if they either overlap or meet.</p>
</div>
<div class="paragraph">
<p>The operation is performed by combining successive intervals in the input that either overlap or meet, using the semantics defined for the Overlaps and Meets operators. Note that because those operators are themselves defined in terms of interval successor and predecessor operators, sets of Date-, DateTime-, and Time-based intervals that are only defined to a particular precision will calculate meets and overlaps at that precision. For example, a list of DateTime-based intervals where the boundaries are all specified to the hour will collapse at the hour precision, unless the collapse precision is overridden with the per argument.</p>
</div>
<div class="paragraph">
<p>The per argument determines the precision at which the collapse is computed and must be a quantity-valued expression compatible with the interval point type. For numeric intervals, this means a quantity with the default unit '1' (not to be confused with the quantity value, which may be any valid positive decimal). For Date-, DateTime-, and Time-valued intervals, this means a quantity with a temporal unit (e.g., 'year', 'month', etc).</p>
</div>
<div class="paragraph">
<p>Conceptually, the per argument to the collapse operator partitions the value-space for the operation into units of size 'per', and the intervals will be collapsed aligning with those partitions. Note that the 'per' partitions start from the starting boundary of the first input interval, ordered.</p>
</div>
<div class="paragraph">
<p>If the per argument is null, a per value will be constructed based on the coarsest precision of the boundaries of the intervals in the input set. For example, a list of DateTime-based intervals where the boundaries are a mixture of hours and minutes will collapse at the hour precision.</p>
</div>
<div class="paragraph">
<p>If the list of intervals is empty, the result is empty. If the list of intervals contains a single interval, the result is a list with that interval. If the list of intervals contains nulls, they will be excluded from the resulting list.</p>
</div>
<div class="paragraph">
<p>If the source argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="contains"><a class="anchor" href="#contains"></a>19.5. Contains</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Contains : BinaryExpression
  ¦
  0..1 --&gt; precision</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Contains operator returns true if the first operand contains the second.</p>
</div>
<div class="paragraph">
<p>There are two overloads of this operator:
1. List, T : The type of T must be the same as the element type of the list.
2. Interval, T : The type of T must be the same as the point type of the interval.</p>
</div>
<div class="paragraph">
<p>For the List, T overload, this operator returns true if the given element is in the list, using equality semantics, with the exception that null elements are considered equal. If the first argument is null, the result is false. If the second argument is null, the result is true if the list contains any null elements, and false otherwise.</p>
</div>
<div class="paragraph">
<p>For the Interval, T overload, this operator returns true if the given point is equal to the starting or ending point of the interval, or greater than the starting point and less than the ending point. For open interval boundaries, exclusive comparison operators are used. For closed interval boundaries, if the interval boundary is null, the result of the boundary comparison is considered true. If precision is specified and the point type is a Date, DateTime, or Time type, comparisons used in the operation are performed at the specified precision. If the first argument is null, the result is false. If the second argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="end"><a class="anchor" href="#end"></a>19.6. End</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">End : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The End operator returns the ending point of an interval.</p>
</div>
<div class="paragraph">
<p>If the high boundary of the interval is open, this operator returns the Predecessor of the high value of the interval. Note that if the high value of the interval is null, the result is null.</p>
</div>
<div class="paragraph">
<p>If the high boundary of the interval is closed and the high value of the interval is not null, this operator returns the high value of the interval. Otherwise, the result is the maximum value of the point type of the interval.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="ends"><a class="anchor" href="#ends"></a>19.7. Ends</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Ends : BinaryExpression
  ¦
  0..1 --&gt; precision</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Ends operator returns true if the first interval ends the second. In other words, if the starting point of the first interval is greater than or equal to the starting point of the second, and the ending point of the first interval is equal to the ending point of the second.</p>
</div>
<div class="paragraph">
<p>This operator uses the semantics described in the Start and End operators to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>If precision is specified and the point type is a Date, DateTime, or Time type, comparisons used in the operation are performed at the specified precision.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="equal-4"><a class="anchor" href="#equal-4"></a>19.8. Equal</h3>
<div class="paragraph">
<p>Refer to the <a href="#equal">Equal section</a> in the Comparison Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="equivalent-4"><a class="anchor" href="#equivalent-4"></a>19.9. Equivalent</h3>
<div class="paragraph">
<p>Refer to the <a href="#equivalent">Equivalent section</a> in the Comparison Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="except"><a class="anchor" href="#except"></a>19.10. Except</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Except : NaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Except operator returns the set difference of the two arguments.</p>
</div>
<div class="paragraph">
<p>This operator has two overloads:
1. List, List
2. Interval, Interval</p>
</div>
<div class="paragraph">
<p>For the list overload, this operator returns a list with the elements that appear in the first operand, that do not appear in the second operand, using equality semantics, with the exception that null elements are considered equal for the purposes of determining the result. The operator is defined with set semantics, meaning that each element will appear in the result at most once, and that there is no expectation that the order of the inputs will be preserved in the results.</p>
</div>
<div class="paragraph">
<p>For the interval overload, this operator returns the portion of the first interval that does not overlap with the second. If the second argument is properly contained within the first and does not start or end it, this operator returns null.</p>
</div>
<div class="paragraph">
<p>If the first argument is null, the result is null. If the second argument is null, the operation is performed as though the second argument was an empty list.</p>
</div>
</div>
<div class="sect2">
<h3 id="expand"><a class="anchor" href="#expand"></a>19.11. Expand</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Expand : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Expand operator returns the set of intervals of size per for all the ranges present in the given list of intervals, or the list of points covering the range of the given interval, if invoked on a single interval.</p>
</div>
<div class="paragraph">
<p>The per argument determines the size of the resulting intervals and must be a quantity-valued expression compatible with the interval point type. For numeric intervals, this means a quantity with the default unit '1' (not to be confused with the quantity value, which may be any valid positive decimal).  For Date-, DateTime-, and Time-valued intervals, this means a quantity with a temporal unit (e.g., 'year', 'month', etc).</p>
</div>
<div class="paragraph">
<p>Conceptually, the per argument to the expand operator partitions the value-space for the operation into units of size 'per', and the intervals will be expanded aligning with those partitions. Note that the 'per' partitions start from the starting boundary of the first input interval, ordered.</p>
</div>
<div class="paragraph">
<p>If the per argument is null, a per value will be constructed based on the coarsest precision of the boundaries of the intervals in the input set. For example, a list of DateTime-based intervals where the boundaries are a mixture of hours and minutes will expand at the hour precision.</p>
</div>
<div class="paragraph">
<p>Note that if the values in the intervals are more precise than the per quantity, the more precise values will be truncated to the precision specified by the per quantity.</p>
</div>
<div class="paragraph">
<p>If the input argument is an interval, rather than a list of intervals, the result is a list of points, rather than a list of intervals. In this case, the calculation is performed the same way, but the starting point of each resulting interval is returned, rather than the interval.</p>
</div>
<div class="paragraph">
<p>If the list of intervals is empty, the result is empty. If the list of intervals contains nulls, they will be excluded from the resulting list.</p>
</div>
<div class="paragraph">
<p>If the source argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="in"><a class="anchor" href="#in"></a>19.12. In</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">In : BinaryExpression
  ¦
  0..1 --&gt; precision</code></pre>
</div>
</div>
<div class="paragraph">
<p>The In operator tests for membership in an interval or list.</p>
</div>
<div class="paragraph">
<p>There are two overloads of this operator:
1. T, List : The type of T must be the same as the element type of the list.
2. T, Interval : The type of T must be the same as the point type of the interval.</p>
</div>
<div class="paragraph">
<p>For the T, List overload, this operator returns true if the given element is in the given list, using equality semantics, with the exception that <span class="kw">null</span> elements are considered equal. If the first argument is null, the result is true if the list contains any null elements, and false otherwise. If the second argument is null, the result is false.</p>
</div>
<div class="paragraph">
<p>For the T, Interval overload, this operator returns true if the given point is equal to the starting or ending point of the interval, or greater than the starting point and less than the ending point. For open interval boundaries, exclusive comparison operators are used. For closed interval boundaries, if the interval boundary is null, the result of the boundary comparison is considered true. If precision is specified and the point type is a Date, DateTime, or Time type, comparisons used in the operation are performed at the specified precision. If the first argument is null, the result is null. If the second argument is null, the result is false.</p>
</div>
</div>
<div class="sect2">
<h3 id="includes"><a class="anchor" href="#includes"></a>19.13. Includes</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Includes : BinaryExpression
  ¦
  0..1 --&gt; precision</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Includes operator returns true if the first operand completely includes the second.</p>
</div>
<div class="paragraph">
<p>There are two overloads of this operator:
1. List, List : The element type of both lists must be the same.
2. Interval, Interval : The point type of both intervals must be the same.</p>
</div>
<div class="paragraph">
<p>For the List, List overload, this operator returns true if the first operand includes every element of the second operand, using equality semantics, with the exception that null elements are considered equal.</p>
</div>
<div class="paragraph">
<p>For the Interval, Interval overload, this operator returns true if starting point of the first interval is less than or equal to the starting point of the second interval, and the ending point of the first interval is greater than or equal to the ending point of the second interval. If precision is specified and the point type is a Date, DateTime, or Time type, comparisons used in the operation are performed at the specified precision.</p>
</div>
<div class="paragraph">
<p>This operator uses the semantics described in the Start and End operators to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="included-in"><a class="anchor" href="#included-in"></a>19.14. IncludedIn</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">IncludedIn : BinaryExpression
  ¦
  0..1 --&gt; precision</code></pre>
</div>
</div>
<div class="paragraph">
<p>The IncludedIn operator returns true if the first operand is completely included in the second.</p>
</div>
<div class="paragraph">
<p>There are two overloads of this operator:
1. List, List : The element type of both lists must be the same.
2. Interval, Interval : The point type of both intervals must be the same.</p>
</div>
<div class="paragraph">
<p>For the List, List overload, this operator returns true if every element in the first list is included in the second list, using equality semantics, with the exception that null elements are considered equal.</p>
</div>
<div class="paragraph">
<p>For the Interval, Interval overload, this operator returns true if the starting point of the first interval is greater than or equal to the starting point of the second interval, and the ending point of the first interval is less than or equal to the ending point of the second interval. If precision is specified and the point type is a Date, DateTime, or Time type, comparisons used in the operation are performed at the specified precision.</p>
</div>
<div class="paragraph">
<p>This operator uses the semantics described in the Start and End operators to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="intersect"><a class="anchor" href="#intersect"></a>19.15. Intersect</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Intersect : NaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Intersect operator returns the intersection of its arguments.</p>
</div>
<div class="paragraph">
<p>This operator has two overloads:
	List
	Interval</p>
</div>
<div class="paragraph">
<p>For the list overload, this operator returns a list with the elements that appear in both lists, using equality semantics, with the exception that null elements are considered equal for the purposes of the intersection. The operator is defined with set semantics, meaning that each element will appear in the result at most once, and that there is no expectation that the order of the inputs will be preserved in the results.</p>
</div>
<div class="paragraph">
<p>For the interval overload, this operator returns the interval that defines the overlapping portion of both arguments. If the arguments do not overlap, this operator returns null.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="meets"><a class="anchor" href="#meets"></a>19.16. Meets</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Meets : BinaryExpression
  ¦
  0..1 --&gt; precision</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Meets operator returns true if the first interval ends immediately before the second interval starts, or if the first interval starts immediately after the second interval ends. In other words, if the ending point of the first interval is equal to the predecessor of the starting point of the second, or if the starting point of the first interval is equal to the successor of the ending point of the second.</p>
</div>
<div class="paragraph">
<p>This operator uses the semantics described in the Start and End operators to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>If precision is specified and the point type is a Date, DateTime, or Time type, comparisons used in the operation are performed at the specified precision.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="meetsbefore"><a class="anchor" href="#meetsbefore"></a>19.17. MeetsBefore</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">MeetsBefore : BinaryExpression
  ¦
  0..1 --&gt; precision</code></pre>
</div>
</div>
<div class="paragraph">
<p>The MeetsBefore operator returns true if the first interval ends immediately before the second interval starts. In other words, if the ending point of the first interval is equal to the predecessor of the starting point of the second.</p>
</div>
<div class="paragraph">
<p>This operator uses the semantics described in the Start and End operators to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>If precision is specified and the point type is a Date, DateTime, or Time type, comparisons used in the operation are performed at the specified precision.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="meetsafter"><a class="anchor" href="#meetsafter"></a>19.18. MeetsAfter</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">MeetsAfter : BinaryExpression
  ¦
  0..1 --&gt; precision</code></pre>
</div>
</div>
<div class="paragraph">
<p>The MeetsAfter operator returns true if the first interval starts immediately after the second interval ends. In other words, if the starting point of the first interval is equal to the successor of the ending point of the second.</p>
</div>
<div class="paragraph">
<p>This operator uses the semantics described in the Start and End operators to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>If precision is specified and the point type is a Date, DateTime, or Time type, comparisons used in the operation are performed at the specified precision.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="not-equal-4"><a class="anchor" href="#not-equal-4"></a>19.19. Not Equal</h3>
<div class="paragraph">
<p>Refer to the <a href="#not-equal">Not Equal section</a> in the Comparison Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="overlaps"><a class="anchor" href="#overlaps"></a>19.20. Overlaps</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Overlaps : BinaryExpression
  ¦
  0..1 --&gt; precision</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Overlaps operator returns true if the first interval overlaps the second. In other words, if the starting or ending point of either interval is in the other, or if the ending point of the first interval is greater than or equal to the starting point of the second interval, and the starting point of the first interval is less than or equal to the ending point of the second interval.</p>
</div>
<div class="paragraph">
<p>This operator uses the semantics described in the Start and End operators to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>If precision is specified and the point type is a Date, DateTime, or Time type, comparisons used in the operation are performed at the specified precision.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="overlapsbefore"><a class="anchor" href="#overlapsbefore"></a>19.21. OverlapsBefore</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">OverlapsBefore : BinaryExpression
  ¦
  0..1 --&gt; precision</code></pre>
</div>
</div>
<div class="paragraph">
<p>The OverlapsBefore operator returns true if the first interval starts before and overlaps the second. In other words, if the first interval starts before and ends on or after the start of the second interval.</p>
</div>
<div class="paragraph">
<p>This operator uses the semantics described in the Start and End operators to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>If precision is specified and the point type is a Date, DateTime, or Time type, comparisons used in the operation are performed at the specified precision.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="overlapsafter"><a class="anchor" href="#overlapsafter"></a>19.22. OverlapsAfter</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">OverlapsAfter : BinaryExpression
  ¦
  0..1 --&gt; precision</code></pre>
</div>
</div>
<div class="paragraph">
<p>The OverlapsAfter operator returns true if the first interval overlaps and ends after the second. In other words, if the first interval ends after and starts on or before the end of the second interval.</p>
</div>
<div class="paragraph">
<p>This operator uses the semantics described in the Start and End operators to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>If precision is specified and the point type is a Date, DateTime, or Time type, comparisons used in the operation are performed at the specified precision.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="pointfrom"><a class="anchor" href="#pointfrom"></a>19.23. PointFrom</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">PointFrom : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The PointFrom expression extracts the single point from the source interval. The source interval must be a unit interval (meaning an interval with the same starting and ending boundary), otherwise, a run-time error is thrown. If the source interval is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="proper-contains"><a class="anchor" href="#proper-contains"></a>19.24. ProperContains</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ProperContains : BinaryExpression
  ¦
  0..1 --&gt; precision</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ProperContains operator returns true if the first operand properly contains the second.</p>
</div>
<div class="paragraph">
<p>There are two overloads of this operator:
	List, T: The type of T must be the same as the element type of the list.
	Interval, T : The type of T must be the same as the point type of the interval.</p>
</div>
<div class="paragraph">
<p>For the List, T overload, this operator returns <span class="kw">true</span> if the given element is in the list, and it is not the only element in the list, using equality semantics, with the exception that <span class="kw">null</span> elements are considered equal. If the first argument is <span class="kw">null</span>, the result is <span class="kw">false</span>. If the second argument is <span class="kw">null</span>, the result is <span class="kw">true</span> if the list contains any <span class="kw">null</span> elements and at least one other element, and <span class="kw">false</span> otherwise.</p>
</div>
<div class="paragraph">
<p>For the Interval, T overload, this operator returns <span class="kw">true</span> if the given point is greater than the starting point of the interval, and less than the ending point of the interval, as determined by the <span class="id">Start</span> and <span class="id">End</span> operators.  If precision is specified and the point type is a <span class="id">Date</span>, <span class="id">DateTime</span>, or <span class="id">Time</span> type, comparisons used in the operation are performed at the specified precision. If the first argument is <span class="kw">null</span>, the result is <span class="kw">false</span>. If the second argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="proper-in"><a class="anchor" href="#proper-in"></a>19.25. ProperIn</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ProperIn : BinaryExpression
  ¦
  0..1 --&gt; precision</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ProperIn operator tests for proper membership in an interval or list.</p>
</div>
<div class="paragraph">
<p>There are two overloads of this operator:
	T, List : The type of T must be the same as the element type of the list.
	T, Interval : The type of T must be the same as the point type of the interval.</p>
</div>
<div class="paragraph">
<p>For the T, List overload, this operator returns if the given element is in the given list, and it is not the only element in the list, using equality semantics, with the exception that null elements are considered equal. If the first argument is null, the result is true if the list contains any null elements and at least one other element, and false otherwise. If the second argument is null, the result is false.</p>
</div>
<div class="paragraph">
<p>For the T, Interval overload, this operator returns true if the given point is greater than the starting point, and less than the ending point of the interval, as determined by the Start and End operators. If precision is specified and the point type is a Date, DateTime, or Time type, comparisons used in the operation are performed at the specified precision. If the first argument is null, the result is null. If the second argument is null the result is false.</p>
</div>
</div>
<div class="sect2">
<h3 id="proper-includes"><a class="anchor" href="#proper-includes"></a>19.26. ProperIncludes</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ProperIncludes : BinaryExpression
  ¦
  0..1 --&gt; precision</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ProperIncludes operator returns true if the first operand includes the second, and is strictly larger.</p>
</div>
<div class="paragraph">
<p>There are two overloads of this operator:
	List, List : The element type of both lists must be the same.
	Interval, Interval : The point type of both intervals must be the same.</p>
</div>
<div class="paragraph">
<p>For the List, List overload, this operator returns true if the first list is strictly larger, and the first list includes every element of the second list, using equality semantics, with the exception that null elements are considered equal.</p>
</div>
<div class="paragraph">
<p>For the Interval, Interval overload, this operator returns true if the first interval includes the second interval, and the intervals are not equal. If precision is specified and the point type is a Date, DateTime, or Time type, comparisons used in the operation are performed at the specified precision.</p>
</div>
<div class="paragraph">
<p>This operator uses the semantics described in the Start and End operators to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="proper-included-in"><a class="anchor" href="#proper-included-in"></a>19.27. ProperIncludedIn</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ProperIncludedIn : BinaryExpression
  ¦
  0..1 --&gt; precision</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ProperIncludedIn operator returns true if the first operand is included in the second, and is strictly smaller.</p>
</div>
<div class="paragraph">
<p>There are two overloads of this operator:
	List, List : The element type of both lists must be the same.
	Interval, Interval : The point type of both intervals must be the same.</p>
</div>
<div class="paragraph">
<p>For the List, List overload, this operator returns true if the first list is strictly smaller, and every element of the first list is included in the second list, using equality semantics, with the exception that null elements are considered equal.</p>
</div>
<div class="paragraph">
<p>For the Interval, Interval overload, this operator returns true if the first interval is included in the second interval, and the intervals are not equal. If precision is specified and the point type is a Date, DateTime, or Time type, comparisons used in the operation are performed at the specified precision.</p>
</div>
<div class="paragraph">
<p>This operator uses the semantics described in the Start and End operators to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="size"><a class="anchor" href="#size"></a>19.28. Size</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Size : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Size operator returns the size of an interval.</p>
</div>
<div class="paragraph">
<p>The result of this operator is equivalent to invoking: End(i) - Start(i) + point-size, where the point-size for the point type of the interval is determined by: Successor(Minimum_T) - Minimum_T.</p>
</div>
<div class="paragraph">
<p>Note that this operator is not defined for intervals of type Date, DateTime, and Time.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="start"><a class="anchor" href="#start"></a>19.29. Start</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Start : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Start operator returns the starting point of an interval.</p>
</div>
<div class="paragraph">
<p>If the low boundary of the interval is open, this operator returns the Successor of the low value of the interval. Note that if the low value of the interval is null, the result is null.</p>
</div>
<div class="paragraph">
<p>If the low boundary of the interval is closed and the low value of the interval is not null, this operator returns the low value of the interval. Otherwise, the result is the minimum value of the point type of the interval.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="starts"><a class="anchor" href="#starts"></a>19.30. Starts</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Starts : BinaryExpression
  ¦
  0..1 --&gt; precision</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Starts operator returns true if the first interval starts the second. In other words, if the starting point of the first is equal to the starting point of the second interval and the ending point of the first interval is less than or equal to the ending point of the second interval.</p>
</div>
<div class="paragraph">
<p>This operator uses the semantics described in the Start and End operators to determine interval boundaries.</p>
</div>
<div class="paragraph">
<p>If precision is specified and the point type is a Date, DateTime, or Time type, comparisons used in the operation are performed at the specified precision.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="union"><a class="anchor" href="#union"></a>19.31. Union</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Union : NaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Union operator returns the union of its arguments.</p>
</div>
<div class="paragraph">
<p>This operator has two overloads:
	List
	Interval</p>
</div>
<div class="paragraph">
<p>For the list overload, this operator returns a list with all unique elements from both arguments, using equality semantics, with the exception that null elements are considered equal.</p>
</div>
<div class="paragraph">
<p>For the interval overload, this operator returns the interval that starts at the earliest starting point in either argument, and ends at the latest starting point in either argument. If the arguments do not overlap or meet, this operator returns null.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the operation is performed as though the argument was an empty list.</p>
</div>
</div>
<div class="sect2">
<h3 id="width"><a class="anchor" href="#width"></a>19.32. Width</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Width : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Width operator returns the width of an interval. The result of this operator is equivalent to invoking: End(i) - Start(i).</p>
</div>
<div class="paragraph">
<p>Note that this operator is not defined for intervals of type Date, DateTime, and Time.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="list-operators"><a class="anchor" href="#list-operators"></a>20. List Operators</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ELM allows for the expression and manipulation of lists of values of any type. The most basic list operation is the <em>List</em> class, which represents a simple list selector.</p>
</div>
<div class="paragraph">
<p>Basic list operations include testing for membership, indexing, and content. ELM also supports comparison of lists, including equality and inclusion determination (subset/superset). Supported operations on single lists include filtering, sorting, and computation. For multiple lists, ELM supports combining through union and intersection, as well as computing the difference.</p>
</div>
<div class="paragraph">
<p>The use of the scope attribute allows for more complex expressions such as correlated subqueries.</p>
</div>
<div class="paragraph">
<p>ELM also supports a flattening operator, <em>Flatten</em> to construct a single list from a list of lists.</p>
</div>
<div class="paragraph">
<p>For more information on the semantics of these operators, refer to the <a href="09-b-cqlreference.html#list-operators-2">List Operators</a> section in the <a href="09-b-cqlreference.html">CQL Reference</a>.</p>
</div>
<div class="sect2">
<h3 id="list"><a class="anchor" href="#list"></a>20.1. List</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">List : Expression
  ¦
  0..1 --&gt; typeSpecifier : TypeSpecifier
  ¦
  0..* --&gt; element : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The List selector returns a value of type List, whose elements are the result of evaluating the arguments to the List selector, in order.</p>
</div>
<div class="paragraph">
<p>If a typeSpecifier element is provided, the list is of that type. Otherwise, the static type of the first argument determines the type of the resulting list, and each subsequent argument must be of that same type.</p>
</div>
<div class="paragraph">
<p>If any argument is null, the resulting list will have null for that element.</p>
</div>
</div>
<div class="sect2">
<h3 id="contains-2"><a class="anchor" href="#contains-2"></a>20.2. Contains</h3>
<div class="paragraph">
<p>Refer to the <a href="#contains">Contains section</a> in the Interval Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="current"><a class="anchor" href="#current"></a>20.3. Current</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Current : Expression
  ¦
  0..1 --&gt; scope</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Current expression returns the value of the object currently in scope. For example, within a ForEach expression, this returns the current element being considered in the iteration.</p>
</div>
<div class="paragraph">
<p>It is an error to invoke the Current operator outside the context of a scoped operation.</p>
</div>
</div>
<div class="sect2">
<h3 id="distinct"><a class="anchor" href="#distinct"></a>20.4. Distinct</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Distinct : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Distinct operator takes a list of elements and returns a list containing only the unique elements within the input. For example, given the list of integers { 1, 1, 1, 2, 2, 3, 4, 4 }, the result of Distinct would be { 1, 2, 3, 4 }.</p>
</div>
<div class="paragraph">
<p>The operator uses equality comparison semantics as defined in the Equal operator, with the exception that nulls are considered equal for the purposes of distinct determination. This means that multiple nulls in the input will result in a single null in the output.</p>
</div>
<div class="paragraph">
<p>If the source argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="equal-5"><a class="anchor" href="#equal-5"></a>20.5. Equal</h3>
<div class="paragraph">
<p>Refer to the <a href="#equal">Equal section</a> in the Comparison Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="equivalent-5"><a class="anchor" href="#equivalent-5"></a>20.6. Equivalent</h3>
<div class="paragraph">
<p>Refer to the <a href="#equivalent">Equivalent section</a> in the Comparison Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="except-2"><a class="anchor" href="#except-2"></a>20.7. Except</h3>
<div class="paragraph">
<p>Refer to the <a href="#except">Except section</a> in the Interval Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="exists"><a class="anchor" href="#exists"></a>20.8. Exists</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Exists : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Exists operator returns true if the list contains any non-null elements.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is false.</p>
</div>
</div>
<div class="sect2">
<h3 id="filter"><a class="anchor" href="#filter"></a>20.9. Filter</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Filter : Expression
  ¦
  1..1 --&gt; source : Expression
  ¦
  1..1 --&gt; condition : Expression
  ¦
  0..1 --&gt; scope</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Filter operator returns a list with only those elements in the source list for which the condition element evaluates to true.</p>
</div>
<div class="paragraph">
<p>If the source argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="first"><a class="anchor" href="#first"></a>20.10. First</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">First : OperatorExpression
  ¦
  1..1 --&gt; source : Expression
  ¦
  0..1 --&gt; orderBy</code></pre>
</div>
</div>
<div class="paragraph">
<p>The First operator returns the first element in a list. If the order by attribute is specified, the list is sorted by that ordering prior to returning the first element.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="flatten"><a class="anchor" href="#flatten"></a>20.11. Flatten</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Flatten : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Flatten operator flattens a list of lists into a single list.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="foreach"><a class="anchor" href="#foreach"></a>20.12. ForEach</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ForEach : Expression
  ¦
  1..1 --&gt; source : Expression
  ¦
  1..1 --&gt; element : Expression
  ¦
  0..1 --&gt; scope</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ForEach expression iterates over the list of elements in the source element, and returns a list with the same number of elements, where each element in the new list is the result of evaluating the element expression for each element in the source list.</p>
</div>
<div class="paragraph">
<p>If the source argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>If the element argument evaluates to null for some item in the source list, the resulting list will contain a null for that element.</p>
</div>
</div>
<div class="sect2">
<h3 id="in-2"><a class="anchor" href="#in-2"></a>20.13. In</h3>
<div class="paragraph">
<p>Refer to the <a href="#in">In section</a> in the Interval Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="includes-2"><a class="anchor" href="#includes-2"></a>20.14. Includes</h3>
<div class="paragraph">
<p>Refer to the <a href="#includes">Includes section</a> in the Interval Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="includedin"><a class="anchor" href="#includedin"></a>20.15. IncludedIn</h3>
<div class="paragraph">
<p>Refer to the <a href="#included-in">IncludedIn section</a> in the Interval Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="indexof"><a class="anchor" href="#indexof"></a>20.16. IndexOf</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">IndexOf : OperatorExpression
  ¦
  1..1 --&gt; source : Expression
  ¦
  1..1 --&gt; element : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The IndexOf operator returns the 0-based index of the given element in the given source list.</p>
</div>
<div class="paragraph">
<p>The operator uses equality semantics as defined in the Equal operator to determine the index. The search is linear, and returns the index of the first element for which the equality comparison returns true.</p>
</div>
<div class="paragraph">
<p>If the list is empty, or no element is found, the result is -1.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="intersect-2"><a class="anchor" href="#intersect-2"></a>20.17. Intersect</h3>
<div class="paragraph">
<p>Refer to the <a href="#intersect">Intersect section</a> in the Interval Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="last"><a class="anchor" href="#last"></a>20.18. Last</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Last : OperatorExpression
  ¦
  1..1 --&gt; source : Expression
  ¦
  0..1 --&gt; orderBy</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Last operator returns the last element in a list. If the order by attribute is specified, the list is sorted by that ordering prior to returning the last element.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="not-equal-5"><a class="anchor" href="#not-equal-5"></a>20.19. Not Equal</h3>
<div class="paragraph">
<p>Refer to the <a href="#not-equal">Not Equal section</a> in the Comparison Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="propercontains"><a class="anchor" href="#propercontains"></a>20.20. ProperContains</h3>
<div class="paragraph">
<p>Refer to the <a href="#proper-contains">ProperContains section</a> in the Interval Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="properin"><a class="anchor" href="#properin"></a>20.21. ProperIn</h3>
<div class="paragraph">
<p>Refer to the <a href="#proper-in">ProperIn section</a> in the Interval Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="properincludes"><a class="anchor" href="#properincludes"></a>20.22. ProperIncludes</h3>
<div class="paragraph">
<p>Refer to the <a href="#proper-includes">ProperIncludes section</a> in the Interval Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="properincludedin"><a class="anchor" href="#properincludedin"></a>20.23. ProperIncludedIn</h3>
<div class="paragraph">
<p>Refer to the <a href="#proper-included-in">ProperIncludedIn section</a> in the Interval Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="repeat"><a class="anchor" href="#repeat"></a>20.24. Repeat</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Repeat : Expression
  ¦
  1..1 --&gt; source : Expression
  ¦
  1..1 --&gt; element : Expression
  ¦
  0..1 --&gt; scope</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Repeat expression performs successive ForEach until no new elements are returned.</p>
</div>
<div class="paragraph">
<p>The operator uses equality comparison semantics as defined in the Equal operator.</p>
</div>
<div class="paragraph">
<p>If the source argument is null, the result is null.</p>
</div>
<div class="paragraph">
<p>If the element argument evaluates to null for some item in the source list, the resulting list will contain a null for that element.</p>
</div>
</div>
<div class="sect2">
<h3 id="singletonfrom"><a class="anchor" href="#singletonfrom"></a>20.25. SingletonFrom</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">SingletonFrom : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The SingletonFrom expression extracts a single element from the source list. If the source list is empty, the result is null. If the source list contains one element, that element is returned. If the list contains more than one element, a run-time error is thrown. If the source list is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="slice"><a class="anchor" href="#slice"></a>20.26. Slice</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Slice : OperatorExpression
  ¦
  1..1 --&gt; source : Expression
  ¦
  1..1 --&gt; startIndex : Expression
  ¦
  1..1 --&gt; endIndex : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Slice operator returns a portion of the elements in a list, beginning at the start index and ending just before the ending index.</p>
</div>
<div class="paragraph">
<p>If the source list is null, the result is null.</p>
</div>
<div class="paragraph">
<p>If the startIndex is null, the slice begins at the first element of the list.</p>
</div>
<div class="paragraph">
<p>If the endIndex is null, the slice continues to the last element of the list.</p>
</div>
<div class="paragraph">
<p>If the startIndex or endIndex is less than 0, or if the endIndex is less than the startIndex, the result is an empty list.</p>
</div>
</div>
<div class="sect2">
<h3 id="sort"><a class="anchor" href="#sort"></a>20.27. Sort</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Sort : Expression
  ¦
  1..1 --&gt; source : Expression
  ¦
  1..* --&gt; by : SortByItem</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Sort operator returns a list with all the elements in source, sorted as described by the by element.</p>
</div>
<div class="paragraph">
<p>When the sort elements do not provide a unique ordering (i.e. there is a possibility of duplicate sort values in the result), the order of duplicates is unspecified.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="times"><a class="anchor" href="#times"></a>20.28. Times</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Times : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Times operator performs the cartesian product of two lists of tuples. The return type of a Times operator is a tuple with all the components from the tuple types of both arguments. The result will contain a tuple for each possible combination of tuples from both arguments with the values for each component derived from the pairing of the source tuples.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="union-2"><a class="anchor" href="#union-2"></a>20.29. Union</h3>
<div class="paragraph">
<p>Refer to the <a href="#union">Union section</a> in the Interval Operators.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="aggregate-operators"><a class="anchor" href="#aggregate-operators"></a>21. Aggregate Operators</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For computing aggregate quantities, ELM defines several aggregate operators. These operators perform computations on lists of values, either on the elements of the list directly, or on a specific property of each element in the list.</p>
</div>
<div class="paragraph">
<p>Unless noted in the documentation for each operator, aggregate operators deal with missing information by excluding elements which have no value before performing the aggregation. In addition, an aggregate operation performed over an empty list is defined to return null, except as noted in the documentation for each operator (e.g. Count).</p>
</div>
<div class="paragraph">
<p>In general, operations that cause arithmetic overflow or underflow, or otherwise cannot be performed (such as division by 0) will result in null, rather than a run-time error.</p>
</div>
<div class="paragraph">
<p>For more information on the semantics of these operators, refer to the <a href="09-b-cqlreference.html#aggregate-functions">Aggregate Functions</a> section in the <a href="09-b-cqlreference.html">CQL Reference</a>.</p>
</div>
<div class="sect2">
<h3 id="alltrue"><a class="anchor" href="#alltrue"></a>21.1. AllTrue</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">AllTrue : AggregateExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The AllTrue operator returns true if all the non-null elements in source are true.</p>
</div>
<div class="paragraph">
<p>If a path is specified, elements with no value for the property specified by the path are ignored.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, true is returned.</p>
</div>
<div class="paragraph">
<p>If the source is null, the result is true.</p>
</div>
</div>
<div class="sect2">
<h3 id="anytrue"><a class="anchor" href="#anytrue"></a>21.2. AnyTrue</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">AnyTrue : AggregateExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The AnyTrue operator returns true if any non-null element in source is true.</p>
</div>
<div class="paragraph">
<p>If a path is specified, elements with no value for the property specified by the path are ignored.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, false is returned.</p>
</div>
<div class="paragraph">
<p>If the source is null, the result is false.</p>
</div>
</div>
<div class="sect2">
<h3 id="avg"><a class="anchor" href="#avg"></a>21.3. Avg</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Avg : AggregateExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Avg operator returns the average of the non-null elements in source.</p>
</div>
<div class="paragraph">
<p>If a path is specified, elements with no value for the property specified by the path are ignored.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, null is returned.</p>
</div>
<div class="paragraph">
<p>If the source is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="count"><a class="anchor" href="#count"></a>21.4. Count</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Count : AggregateExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Count operator returns the number of non-null elements in the source.</p>
</div>
<div class="paragraph">
<p>If a path is specified, the count returns the number of elements that have a value for the property specified by the path.</p>
</div>
<div class="paragraph">
<p>If the list is empty, the result is 0.</p>
</div>
<div class="paragraph">
<p>If the list is null, the result is 0.</p>
</div>
</div>
<div class="sect2">
<h3 id="geometricmean"><a class="anchor" href="#geometricmean"></a>21.5. GeometricMean</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">GeometricMean : AggregateExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The GeometricMean operator returns the geometric mean of the non-null elements in source.</p>
</div>
<div class="paragraph">
<p>If a path is specified, elements with no value for the property specified by the path are ignored.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, null is returned.</p>
</div>
<div class="paragraph">
<p>If the source is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="product"><a class="anchor" href="#product"></a>21.6. Product</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Product : AggregateExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Product operator returns the geometric product of non-null elements in the source.</p>
</div>
<div class="paragraph">
<p>If a path is specified, elements with no value for the property specified by the path are ignored.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, null is returned.</p>
</div>
<div class="paragraph">
<p>If the list is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="max"><a class="anchor" href="#max"></a>21.7. Max</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Max : AggregateExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Max operator returns the maximum element in the source. Comparison semantics are defined by the comparison operators for the type of the values being aggregated.</p>
</div>
<div class="paragraph">
<p>If a path is specified, elements with no value for the property specified by the path are ignored.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, null is returned.</p>
</div>
<div class="paragraph">
<p>If the source is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="median"><a class="anchor" href="#median"></a>21.8. Median</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Median : AggregateExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Median operator returns the median of the elements in source.</p>
</div>
<div class="paragraph">
<p>If a path is specified, elements with no value for the property specified by the path are ignored.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, null is returned.</p>
</div>
<div class="paragraph">
<p>If the source is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="min"><a class="anchor" href="#min"></a>21.9. Min</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Min : AggregateExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Min operator returns the minimum element in the source. Comparison semantics are defined by the comparison operators for the type of the values being aggregated.</p>
</div>
<div class="paragraph">
<p>If a path is specified, elements with no value for the property specified by the path are ignored.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, null is returned.</p>
</div>
<div class="paragraph">
<p>If the source is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="mode"><a class="anchor" href="#mode"></a>21.10. Mode</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Mode : AggregateExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Mode operator returns the statistical mode of the elements in source.</p>
</div>
<div class="paragraph">
<p>If a path is specified, elements with no value for the property specified by the path are ignored.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, null is returned.</p>
</div>
<div class="paragraph">
<p>If the source is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="populationvariance"><a class="anchor" href="#populationvariance"></a>21.11. PopulationVariance</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">PopulationVariance : AggregateExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The PopulationVariance operator returns the statistical population variance of the elements in source.</p>
</div>
<div class="paragraph">
<p>If a path is specified, elements with no value for the property specified by the path are ignored.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, null is returned.</p>
</div>
<div class="paragraph">
<p>If the source is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="populationstddev"><a class="anchor" href="#populationstddev"></a>21.12. PopulationStdDev</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">PopulationStdDev : AggregateExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The PopulationStdDev operator returns the statistical standard deviation of the elements in source.</p>
</div>
<div class="paragraph">
<p>If a path is specified, elements with no value for the property specified by the path are ignored.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, null is returned.</p>
</div>
<div class="paragraph">
<p>If the source is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="sum"><a class="anchor" href="#sum"></a>21.13. Sum</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Sum : AggregateExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Sum operator returns the sum of non-null elements in the source.</p>
</div>
<div class="paragraph">
<p>If a path is specified, elements with no value for the property specified by the path are ignored.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, null is returned.</p>
</div>
<div class="paragraph">
<p>If the list is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="stddev"><a class="anchor" href="#stddev"></a>21.14. StdDev</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">StdDev : AggregateExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The StdDev operator returns the statistical standard deviation of the elements in source.</p>
</div>
<div class="paragraph">
<p>If a path is specified, elements with no value for the property specified by the path are ignored.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, null is returned.</p>
</div>
<div class="paragraph">
<p>If the list is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="variance"><a class="anchor" href="#variance"></a>21.15. Variance</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Variance : AggregateExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Variance operator returns the statistical variance of the elements in source.</p>
</div>
<div class="paragraph">
<p>If a path is specified, elements with no value for the property specified by the path are ignored.</p>
</div>
<div class="paragraph">
<p>If the source contains no non-null elements, null is returned.</p>
</div>
<div class="paragraph">
<p>If the source is null, the result is null.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="type-operators"><a class="anchor" href="#type-operators"></a>22. Type Operators</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For more information on the semantics of these operators, refer to the <a href="09-b-cqlreference.html#type-operators-1">Type Operators</a> section in the <a href="09-b-cqlreference.html">CQL Reference</a>.</p>
</div>
<div class="sect2">
<h3 id="as"><a class="anchor" href="#as"></a>22.1. As</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">As : UnaryExpression
  ¦
  0..1 --&gt; asTypeSpecifier : TypeSpecifier
  ¦
  0..1 --&gt; asType
  ¦
  0..1 --&gt; strict</code></pre>
</div>
</div>
<div class="paragraph">
<p>The As operator allows the result of an expression to be cast as a given target type. This allows expressions to be written that are statically typed against the expected run-time type of the argument. If the argument is not of the specified type, and the strict attribute is false (the default), the result is null. If the argument is not of the specified type and the strict attribute is true, an exception is thrown.</p>
</div>
</div>
<div class="sect2">
<h3 id="canconvert"><a class="anchor" href="#canconvert"></a>22.2. CanConvert</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">CanConvert : UnaryExpression
  ¦
  0..1 --&gt; toTypeSpecifier : TypeSpecifier
  ¦
  0..1 --&gt; toType</code></pre>
</div>
</div>
<div class="paragraph">
<p>The CanConvert operator returns true if the given value can be converted to a specific type, and false otherwise.</p>
</div>
<div class="paragraph">
<p>This operator returns true for conversion:</p>
</div>
<div class="paragraph">
<p>Between String and each of Boolean, Integer, Long, Decimal, Quantity, Ratio, Date, DateTime, and Time,</p>
</div>
<div class="paragraph">
<p>as well as:</p>
</div>
<div class="paragraph">
<p>From Integer to Long, Decimal, or Quantity<br/>
From Decimal to Quantity<br/>
Between Date and DateTime<br/>
From Code to Concept<br/>
Between Concept and List&lt;Code&gt;</p>
</div>
<div class="paragraph">
<p>Conversion between String and Date/DateTime/Time is checked using the ISO-8601 standard format: <strong>YYYY-MM-DDThh:mm:ss(+|-)hh:mm</strong>.</p>
</div>
<div class="paragraph">
<p>See <a href="09-b-cqlreference.html#formatting-strings">Formatting Strings</a> for a description of the formatting strings used in this specification.</p>
</div>
</div>
<div class="sect2">
<h3 id="canconvertquantity"><a class="anchor" href="#canconvertquantity"></a>22.3. CanConvertQuantity</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">CanConvertQuantity : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The CanConvertQuantity operator returns true if the Quantity can be converted to an equivalent Quantity with the given Unit. Otherwise, the result is false.</p>
</div>
<div class="paragraph">
<p>Note that implementations are not required to support quantity conversion, and so may return false, even if the conversion is valid. Implementations that do support unit conversion shall do so according to the conversion specified by UCUM.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="children"><a class="anchor" href="#children"></a>22.4. Children</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Children : OperatorExpression
  ¦
  1..1 --&gt; source : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>For structured types, the Children operator returns a list of all the values of the elements of the type. List-valued elements are expanded and added to the result individually, rather than as a single list.</p>
</div>
<div class="paragraph">
<p>For list types, the result is the same as invoking Children on each element in the list and flattening the resulting lists into a single result.</p>
</div>
<div class="paragraph">
<p>If the source is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="convert"><a class="anchor" href="#convert"></a>22.5. Convert</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Convert : UnaryExpression
  ¦
  0..1 --&gt; toTypeSpecifier : TypeSpecifier
  ¦
  0..1 --&gt; toType</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Convert operator converts a value to a specific type. The result of the operator is the value of the argument converted to the target type, if possible.</p>
</div>
<div class="paragraph">
<p>If no valid conversion exists from the actual value to the target type, the result is null.</p>
</div>
<div class="paragraph">
<p>This operator supports conversion:</p>
</div>
<div class="paragraph">
<p>Between String and each of Boolean, Integer, Long, Decimal, Quantity, Ratio, Date, DateTime, and Time</p>
</div>
<div class="paragraph">
<p>as well as:</p>
</div>
<div class="paragraph">
<p>From Integer to Long, Decimal, or Quantity<br/>
From Decimal to Quantity<br/>
Between Date and DateTime<br/>
From Code to Concept<br/>
Between Concept and List&lt;Code&gt;</p>
</div>
<div class="paragraph">
<p>Conversion between String and Date/DateTime/Time is performed using the ISO-8601 standard format: YYYY-MM-DDThh:mm:ss(+|-)hh:mm.</p>
</div>
<div class="paragraph">
<p>See <a href="09-b-cqlreference.html#formatting-strings">Formatting Strings</a> for a description of the formatting strings used in this specification.</p>
</div>
</div>
<div class="sect2">
<h3 id="convertquantity"><a class="anchor" href="#convertquantity"></a>22.6. ConvertQuantity</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ConvertQuantity : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ConvertQuantity operator converts a Quantity to an equivalent Quantity with the given unit. If the unit of the input quantity can be converted to the target unit, the result is an equivalent Quantity with the target unit. Otherwise, the result is null.</p>
</div>
<div class="paragraph">
<p>Note that implementations are not required to support quantity conversion. Implementations that do support unit conversion shall do so according to the conversion specified by UCUM. Implementations that do not support unit conversion shall throw an error if an unsupported unit conversion is requested with this operation.</p>
</div>
<div class="paragraph">
<p>If either argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="convertstoboolean"><a class="anchor" href="#convertstoboolean"></a>22.7. ConvertsToBoolean</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ConvertsToBoolean : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ConvertsToBoolean operator returns true if the value of its argument is or can be converted to a Boolean value.</p>
</div>
<div class="paragraph">
<p>The operator accepts 'true', 't', 'yes', 'y', and '1' as string representations of true, and 'false', 'f', 'no', 'n', and '0' as string representations of false, ignoring case.</p>
</div>
<div class="paragraph">
<p>If the input cannot be interpreted as a valid Boolean value, the result is false.</p>
</div>
<div class="paragraph">
<p>If the input is an Integer or Long, the result is true if the integer is 1 or 0.</p>
</div>
<div class="paragraph">
<p>If the input is a Decimal, the result is true if the decimal is 1.0 or 0.0.</p>
</div>
<div class="paragraph">
<p>If the argument is null the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="convertstodate"><a class="anchor" href="#convertstodate"></a>22.8. ConvertsToDate</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ConvertsToDate : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ConvertsToDate operator returns true if the value of its argument is or can be converted to a Date value.</p>
</div>
<div class="paragraph">
<p>For String values, The operator expects the string to be formatted using the ISO-8601 date representation:</p>
</div>
<div class="paragraph">
<p><strong>YYYY-MM-DD</strong></p>
</div>
<div class="paragraph">
<p>See <a href="09-b-cqlreference.html#formatting-strings">Formatting Strings</a> for a description of the formatting strings used in this specification.</p>
</div>
<div class="paragraph">
<p>In addition, the string must be interpretable as a valid date value.</p>
</div>
<div class="paragraph">
<p>Note that the operator can take time formatted strings and will ignore the time portions.</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or does not represent a valid date value, the result is false.</p>
</div>
<div class="paragraph">
<p>As with date literals, date values may be specified to any precision.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="convertstodatetime"><a class="anchor" href="#convertstodatetime"></a>22.9. ConvertsToDateTime</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ConvertsToDateTime : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ConvertsToDateTime operator returns true if the value of its argument is or can be converted to a DateTime value.</p>
</div>
<div class="paragraph">
<p>For String values, the operator expects the string to be formatted using the ISO-8601 datetime representation:</p>
</div>
<div class="paragraph">
<p><strong>YYYY-MM-DDThh:mm:ss.fff(Z|+|-)hh:mm</strong></p>
</div>
<div class="paragraph">
<p>See <a href="09-b-cqlreference.html#formatting-strings">Formatting Strings</a> for a description of the formatting strings used in this specification.</p>
</div>
<div class="paragraph">
<p>In addition, the string must be interpretable as a valid DateTime value.</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or does not represent a valid DateTime value, the result is false.</p>
</div>
<div class="paragraph">
<p>As with Date and Time literals, DateTime values may be specified to any precision. If no timezone offset is supplied, the timezone offset of the evaluation request timestamp is assumed.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="convertstodecimal"><a class="anchor" href="#convertstodecimal"></a>22.10. ConvertsToDecimal</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ConvertsToDecimal : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ConvertsToDecimal operator returns true if the value of its argument is or can be converted to a Decimal value. The operator accepts strings using the following format:</p>
</div>
<div class="paragraph">
<p><strong>(+|-)?#0(.0#)?</strong></p>
</div>
<div class="paragraph">
<p>Meaning an optional polarity indicator, followed by any number of digits (including none), followed by at least one digit, followed optionally by a decimal point, at least one digit, and any number of additional digits (including none).</p>
</div>
<div class="paragraph">
<p>See <a href="09-b-cqlreference.html#formatting-strings">Formatting Strings</a> for a description of the formatting strings used in this specification.</p>
</div>
<div class="paragraph">
<p>Note that for this operator to return true, the input value must be limited in precision and scale to the maximum precision and scale representable for Decimal values within CQL.</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or cannot be interpreted as a valid Decimal value, the result is false.</p>
</div>
<div class="paragraph">
<p>If the input is a Boolean, the result is true.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="convertstolong"><a class="anchor" href="#convertstolong"></a>22.11. ConvertsToLong</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ConvertsToLong : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ConvertsToLong operator returns true if the value of its argument is or can be converted to a Long value. The operator accepts strings using the following format:</p>
</div>
<div class="paragraph">
<p><strong>(+|-)?#0</strong></p>
</div>
<div class="paragraph">
<p>Meaning an optional polarity indicator, followed by any number of digits (including none), followed by at least one digit.</p>
</div>
<div class="paragraph">
<p>See <a href="09-b-cqlreference.html#formatting-strings">Formatting Strings</a> for a description of the formatting strings used in this specification.</p>
</div>
<div class="paragraph">
<p>Note that for this operator to return true, the input must be a valid value in the range representable for Long values in CQL.</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or cannot be interpreted as a valid Long value, the result is false.</p>
</div>
<div class="paragraph">
<p>If the input is a Boolean, the result is true.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="convertstointeger"><a class="anchor" href="#convertstointeger"></a>22.12. ConvertsToInteger</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ConvertsToInteger : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ConvertsToInteger operator returns true if the value of its argument is or can be converted to an Integer value. The operator accepts strings using the following format:</p>
</div>
<div class="paragraph">
<p><strong>(+|-)?#0</strong></p>
</div>
<div class="paragraph">
<p>Meaning an optional polarity indicator, followed by any number of digits (including none), followed by at least one digit.</p>
</div>
<div class="paragraph">
<p>See <a href="09-b-cqlreference.html#formatting-strings">Formatting Strings</a> for a description of the formatting strings used in this specification.</p>
</div>
<div class="paragraph">
<p>Note that for this operator to return true, the input must be a valid value in the range representable for Integer values in CQL.</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or cannot be interpreted as a valid Integer value, the result is false.</p>
</div>
<div class="paragraph">
<p>If the input is a Boolean, the result is true</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="convertstoquantity"><a class="anchor" href="#convertstoquantity"></a>22.13. ConvertsToQuantity</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ConvertsToQuantity : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ConvertsToQuantity operator returns true if the value of its argument is or can be converted to a Quantity value. The operator may be used with Integer, Decimal, Ratio, or String values.</p>
</div>
<div class="paragraph">
<p>For String values, the operator accepts strings using the following format:</p>
</div>
<div class="paragraph">
<p><strong>(+|-)?#0(.0#)?('&lt;unit&gt;')?</strong></p>
</div>
<div class="paragraph">
<p>Meaning an optional polarity indicator, followed by any number of digits (including none) followed by at least one digit, optionally followed by a decimal point, at least one digit, and any number of additional digits, all optionally followed by a unit designator as a string literal specifying a valid UCUM unit of measure or calendar duration keyword, singular or plural. Spaces are allowed between the quantity value and the unit designator.</p>
</div>
<div class="paragraph">
<p>See <a href="09-b-cqlreference.html#formatting-strings">Formatting Strings</a> for a description of the formatting strings used in this specification.</p>
</div>
<div class="paragraph">
<p>Note that the decimal value of the quantity returned by this operator must be a valid value in the range representable for Decimal values in CQL.</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or cannot be interpreted as a valid Quantity value, the result is false.</p>
</div>
<div class="paragraph">
<p>For Integer, Decimal, and Ratio values, the operator simply returns true.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="convertstoratio"><a class="anchor" href="#convertstoratio"></a>22.14. ConvertsToRatio</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ConvertsToRatio : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ConvertsToRatio operator returns true if the value of its argument is or can be converted to a Ratio value. The operator accepts strings using the following format:</p>
</div>
<div class="paragraph">
<p><strong>&lt;quantity&gt;:&lt;quantity&gt;</strong></p>
</div>
<div class="paragraph">
<p>Meaning a quantity, followed by a colon (:), followed by another quantity. The operator accepts quantity strings using the same format as the ToQuantity operator.</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or cannot be interpreted as a valid Ratio value, the result is false.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="convertstostring"><a class="anchor" href="#convertstostring"></a>22.15. ConvertsToString</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ConvertsToString : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ConvertsToString operator returns true if the value of its argument is or can be converted to a String value.</p>
</div>
<div class="paragraph">
<p>The operator returns true if the argument is any of the following types:</p>
</div>
<div class="paragraph">
<p>Boolean<br/>
Integer<br/>
Long<br/>
Decimal<br/>
DateTime<br/>
Date<br/>
Time<br/>
Quantity<br/>
Ratio<br/>
String</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="convertstotime"><a class="anchor" href="#convertstotime"></a>22.16. ConvertsToTime</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ConvertsToTime : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ConvertsToTime operator returns true if the value of its argument is or can be converted to a Time value.</p>
</div>
<div class="paragraph">
<p>For String values, the operator expects the string to be formatted using ISO-8601 time representation:</p>
</div>
<div class="paragraph">
<p><strong>hh:mm:ss.fff</strong></p>
</div>
<div class="paragraph">
<p>See <a href="09-b-cqlreference.html#formatting-strings">Formatting Strings</a> for a description of the formatting strings used in this specification.</p>
</div>
<div class="paragraph">
<p>In addition, the string must be interpretable as a valid time-of-day value.</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or does not represent a valid time-of-day value, the result is false.</p>
</div>
<div class="paragraph">
<p>As with time-of-day literals, time-of-day values may be specified to any precision. If no timezone offset is supplied, the timezone offset of the evaluation request timestamp is assumed.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="descendents"><a class="anchor" href="#descendents"></a>22.17. Descendents</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Descendents : OperatorExpression
  ¦
  1..1 --&gt; source : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>For structured types, the Descendents operator returns a list of all the values of the elements of the type, recursively. List-valued elements are expanded and added to the result individually, rather than as a single list.</p>
</div>
<div class="paragraph">
<p>For list types, the result is the same as invoking Descendents on each element in the list and flattening the resulting lists into a single result.</p>
</div>
<div class="paragraph">
<p>If the source is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="is"><a class="anchor" href="#is"></a>22.18. Is</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Is : UnaryExpression
  ¦
  0..1 --&gt; isTypeSpecifier : TypeSpecifier
  ¦
  0..1 --&gt; isType</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Is operator allows the type of a result to be tested. The language must support the ability to test against any type. If the run-time type of the argument is of the type being tested, the result of the operator is true; otherwise, the result is false.</p>
</div>
</div>
<div class="sect2">
<h3 id="toboolean"><a class="anchor" href="#toboolean"></a>22.19. ToBoolean</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ToBoolean : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ToBoolean operator converts the value of its argument to a Boolean value.</p>
</div>
<div class="paragraph">
<p>The operator accepts 'true', 't', 'yes', 'y', and '1' as string representations of true, and 'false', 'f', 'no', 'n', and '0' as string representations of false, ignoring case.</p>
</div>
<div class="paragraph">
<p>If the input is an Integer or Long, the result is true if the integer is 1, false if the integer is 0.</p>
</div>
<div class="paragraph">
<p>If the input is a Decimal, the result is true if the decimal is 1.0, false if the decimal is 0.0.</p>
</div>
<div class="paragraph">
<p>If the input cannot be interpreted as a valid Boolean value, the result is null.</p>
</div>
<div class="paragraph">
<p>If the argument is null the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="tochars"><a class="anchor" href="#tochars"></a>22.20. ToChars</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ToChars : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ToChars operator takes a string and returns a list with one string for each character in the input, in the order in which they appear in the string.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="toconcept"><a class="anchor" href="#toconcept"></a>22.21. ToConcept</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ToConcept : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ToConcept operator converts a value of type Code to a Concept value with the given Code as its primary and only Code. If the Code has a display value, the resulting Concept will have the same display value.</p>
</div>
<div class="paragraph">
<p>If the input is a list of Codes, the resulting Concept will have all the input Codes, and will not have a display value.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="todate"><a class="anchor" href="#todate"></a>22.22. ToDate</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ToDate : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ToDate operator converts the value of its argument to a Date value.</p>
</div>
<div class="paragraph">
<p>For String values, the operator expects the string to be formatted using the ISO-8601 date representation:</p>
</div>
<div class="paragraph">
<p><strong>YYYY-MM-DD</strong></p>
</div>
<div class="paragraph">
<p>See <a href="09-b-cqlreference.html#formatting-strings">Formatting Strings</a> for a description of the formatting strings used in this specification.</p>
</div>
<div class="paragraph">
<p>In addition, the string must be interpretable as a valid date value.</p>
</div>
<div class="paragraph">
<p>Note that the operator can take datetime formatted strings and will ignore the time portions.</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or does not represent a valid date value, the result is null.</p>
</div>
<div class="paragraph">
<p>As with date literals, date values may be specified to any precision.</p>
</div>
<div class="paragraph">
<p>For DateTime values, the result is equivalent to extracting the Date component of the DateTime value.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="todatetime"><a class="anchor" href="#todatetime"></a>22.23. ToDateTime</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ToDateTime : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ToDateTime operator converts the value of its argument to a DateTime value.</p>
</div>
<div class="paragraph">
<p>For String values, the operator expects the string to be formatted using the ISO-8601 datetime representation:</p>
</div>
<div class="paragraph">
<p><strong>YYYY-MM-DDThh:mm:ss.fff(Z|+|-)hh:mm</strong></p>
</div>
<div class="paragraph">
<p>See <a href="09-b-cqlreference.html#formatting-strings">Formatting Strings</a> for a description of the formatting strings used in this specification.</p>
</div>
<div class="paragraph">
<p>In addition, the string must be interpretable as a valid DateTime value.</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or does not represent a valid DateTime value, the result is null.</p>
</div>
<div class="paragraph">
<p>As with Date and Time literals, DateTime values may be specified to any precision. If no timezone offset is supplied, the timezone offset of the evaluation request timestamp is assumed.</p>
</div>
<div class="paragraph">
<p>For Date values, the result is a DateTime with the time components unspecified, except the timezone offset, which is set to the timezone offset of the evaluation request timestamp.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="todecimal"><a class="anchor" href="#todecimal"></a>22.24. ToDecimal</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ToDecimal : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <span class="id">ToDecimal</span> operator converts the value of its argument to a <span class="id">Decimal</span> value. The operator accepts strings using the following format:</p>
</div>
<div class="paragraph">
<p><strong>(+|-)?#0(.0#)?</strong></p>
</div>
<div class="paragraph">
<p>Meaning an optional polarity indicator, followed by any number of digits (including none), followed by at least one digit, followed optionally by a decimal point, at least one digit, and any number of additional digits (including none).</p>
</div>
<div class="paragraph">
<p>See <a href="09-b-cqlreference.html#formatting-strings">Formatting Strings</a> for a description of the formatting strings used in this specification.</p>
</div>
<div class="paragraph">
<p>Note that the <span class="id">Decimal</span> value returned by this operator will be limited in precision and scale to the maximum precision and scale representable by the implementation (at least 28 digits of precision, and 8 digits of scale).</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or cannot be interpreted as a valid <span class="id">Decimal</span> value, the result is <span class="kw">null</span>.</p>
</div>
<div class="paragraph">
<p>If the input is Boolean, true will result in 1.0, false will result in 0.0.</p>
</div>
<div class="paragraph">
<p>If the argument is <span class="kw">null</span>, the result is <span class="kw">null</span>.</p>
</div>
</div>
<div class="sect2">
<h3 id="tointeger"><a class="anchor" href="#tointeger"></a>22.25. ToInteger</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ToInteger : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ToInteger operator converts the value of its argument to an Integer value. The operator accepts strings using the following format:</p>
</div>
<div class="paragraph">
<p><strong>(+|-)?#0</strong></p>
</div>
<div class="paragraph">
<p>Meaning an optional polarity indicator, followed by any number of digits (including none), followed by at least one digit.</p>
</div>
<div class="paragraph">
<p>See <a href="09-b-cqlreference.html#formatting-strings">Formatting Strings</a> for a description of the formatting strings used in this specification.</p>
</div>
<div class="paragraph">
<p>Note that the integer value returned by this operator must be a valid value in the range representable for Integer values in CQL.</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or cannot be interpreted as a valid Integer value, the result is null.</p>
</div>
<div class="paragraph">
<p>If the input is Boolean, true will result in 1, false will result in 0.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="tolist"><a class="anchor" href="#tolist"></a>22.26. ToList</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ToList : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ToList operator returns its argument as a List value. The operator accepts a singleton value of any type and returns a list with the value as the single element.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the operator returns an empty list.</p>
</div>
<div class="paragraph">
<p>The operator is effectively shorthand for "if operand is null then { } else { operand }".</p>
</div>
<div class="paragraph">
<p>The operator is used to implement list promotion efficiently.</p>
</div>
</div>
<div class="sect2">
<h3 id="tolong"><a class="anchor" href="#tolong"></a>22.27. ToLong</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ToLong : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ToLong operator converts the value of its argument to a Long value. The operator accepts strings using the following format:</p>
</div>
<div class="paragraph">
<p><strong>(+|-)?#0</strong></p>
</div>
<div class="paragraph">
<p>Meaning an optional polarity indicator, followed by any number of digits (including none), followed by at least one digit.</p>
</div>
<div class="paragraph">
<p>See <a href="09-b-cqlreference.html#formatting-strings">Formatting Strings</a> for a description of the formatting strings used in this specification.</p>
</div>
<div class="paragraph">
<p>Note that the long value returned by this operator must be a valid value in the range representable for Long values in CQL.</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or cannot be interpreted as a valid Long value, the result is null.</p>
</div>
<div class="paragraph">
<p>If the input is Boolean, true will result in 1, false will result in 0.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="toquantity"><a class="anchor" href="#toquantity"></a>22.28. ToQuantity</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ToQuantity : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ToQuantity operator converts the value of its argument to a Quantity value. The operator may be used with Integer, Decimal, Ratio, or String values. The operation does not perform any unit conversion, that capability is supported by the <a href="#convertquantity">ConvertQuantity</a> operator.</p>
</div>
<div class="paragraph">
<p>For String values, the operator accepts strings using the following format:</p>
</div>
<div class="paragraph">
<p><strong>(+|-)?#0(.0#)?('&lt;unit&gt;')?</strong></p>
</div>
<div class="paragraph">
<p>Meaning an optional polarity indicator, followed by any number of digits (including none) followed by at least one digit, optionally followed by a decimal point, at least one digit, and any number of additional digits, all optionally followed by a unit designator as a string literal specifying a valid UCUM unit of measure or calendar duration keyword, singular or plural. Spaces are allowed between the quantity value and the unit designator.</p>
</div>
<div class="paragraph">
<p>Note that the decimal value of the quantity returned by this operator must be a valid value in the range representable for Decimal values in CQL.</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or cannot be interpreted as a valid Quantity value, the result is null.</p>
</div>
<div class="paragraph">
<p>For Integer and Decimal values, the result is a Quantity with the value of the integer or decimal input, and the default unit ('1').</p>
</div>
<div class="paragraph">
<p>For Ratio values, the operation is equivalent to the result of dividing the numerator of the ratio by the denominator.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="toratio"><a class="anchor" href="#toratio"></a>22.29. ToRatio</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ToRatio : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ToRatio operator converts the value of its argument to a Ratio value. The operator accepts strings using the following format:</p>
</div>
<div class="paragraph">
<p><strong>&lt;quantity&gt;:&lt;quantity&gt;</strong></p>
</div>
<div class="paragraph">
<p>Meaning a quantity, followed by a colon (:), followed by another quantity. The operator accepts quantity strings using the same format as the ToQuantity operator.</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or cannot be interpreted as a valid Ratio value, the result is null.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="tostring"><a class="anchor" href="#tostring"></a>22.30. ToString</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ToString : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ToString operator converts the value of its argument to a String value. The operator uses the following string representations for each type</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 50%;">
<colgroup>
<col style="width: 50%;"/>
<col style="width: 50%;"/>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true|false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>(-)?#0</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>(-)?#0</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decimal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>(-)?#0.0#</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quantity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>(-)?#0.0# '&lt;unit&gt;'</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>YYYY-MM-DD</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DateTime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>YYYY-MM-DDThh:mm:ss.fff(+|-)hh:mm</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>hh:mm:ss.fff</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ratio</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>&lt;quantity&gt;:&lt;quantity&gt;</strong></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>See <a href="09-b-cqlreference.html#formatting-strings">Formatting Strings</a> for a description of the formatting strings used in this specification.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="totime"><a class="anchor" href="#totime"></a>22.31. ToTime</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ToTime : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ToTime operator converts the value of its argument to a Time value.</p>
</div>
<div class="paragraph">
<p>For String values, the operator expects the string to be formatted using ISO-8601 time representation:</p>
</div>
<div class="paragraph">
<p><strong>hh:mm:ss.fff</strong></p>
</div>
<div class="paragraph">
<p>See <a href="09-b-cqlreference.html#formatting-strings">Formatting Strings</a> for a description of the formatting strings used in this specification.</p>
</div>
<div class="paragraph">
<p>In addition, the string must be interpretable as a valid time-of-day value.</p>
</div>
<div class="paragraph">
<p>If the input string is not formatted correctly, or does not represent a valid time-of-day value, the result is null.</p>
</div>
<div class="paragraph">
<p>As with time-of-day literals, time-of-day values may be specified to any precision.</p>
</div>
<div class="paragraph">
<p>For DateTime values, the result is the same as extracting the Time component from the DateTime value.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="clinical-operators"><a class="anchor" href="#clinical-operators"></a>23. Clinical Operators</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For working with clinical data, ELM defines operators for terminology sets, quantities, and calculating age.</p>
</div>
<div class="sect2">
<h3 id="anyincodesystem"><a class="anchor" href="#anyincodesystem"></a>23.1. AnyInCodeSystem</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">AnyInCodeSystem : OperatorExpression
  ¦
  1..1 --&gt; codes : Expression
  ¦
  0..1 --&gt; codesystem : CodeSystemRef
  |
  0..1 --&gt; codesystemExpression : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The AnyInCodeSystem operator returns true if any of the given codes are in the given code system.</p>
</div>
<div class="paragraph">
<p>The first argument is expected to be a list of String, Code, or Concept.</p>
</div>
<div class="paragraph">
<p>The second argument is a CodeSystemRef. This allows for static analysis of code system references within an artifact and preserves backwards compatibility with the 1.4 ELM.</p>
</div>
<div class="paragraph">
<p>The third argument is expected to be of type CodeSystem, allowing references to code systems to be preserved as references.</p>
</div>
</div>
<div class="sect2">
<h3 id="anyinvalueset"><a class="anchor" href="#anyinvalueset"></a>23.2. AnyInValueSet</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">AnyInValueSet : OperatorExpression
  ¦
  1..1 --&gt; codes : Expression
  ¦
  0..1 --&gt; valueset : ValueSetRef
  |
  0..1 --&gt; valuesetExpression : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The AnyInValueSet operator returns true if any of the given codes are in the given value set.</p>
</div>
<div class="paragraph">
<p>The first argument is expected to be a list of String, Code, or Concept.</p>
</div>
<div class="paragraph">
<p>The second argument is statically a ValueSetRef. This allows for both static analysis of the value set references within an artifact, as well as the implementation of valueset membership by the target environment as a service call to a terminology server, if desired.</p>
</div>
<div class="paragraph">
<p>The third argument is expected to be of type ValueSet, allowing references to value sets to be preserved as references.</p>
</div>
</div>
<div class="sect2">
<h3 id="calculateage"><a class="anchor" href="#calculateage"></a>23.3. CalculateAge</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">CalculateAge : UnaryExpression
  ¦
  0..1 --&gt; precision</code></pre>
</div>
</div>
<div class="paragraph">
<p>Calculates the age in the specified precision of a person born on the given date.</p>
</div>
<div class="paragraph">
<p>The CalculateAge operator is defined for Date and DateTime.</p>
</div>
<div class="paragraph">
<p>For the Date overload, the calculation is performed using Today(), the precision must be one of year, month, week, or day, and the result is the number of whole calendar periods that have elapsed between the given date and today.</p>
</div>
<div class="paragraph">
<p>For the DateTime overload, the calculation is performed using Now(), and the result is the number of whole calendar periods that have elapsed between the given datetime and now.</p>
</div>
</div>
<div class="sect2">
<h3 id="calculateageat"><a class="anchor" href="#calculateageat"></a>23.4. CalculateAgeAt</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">CalculateAgeAt : BinaryExpression
  ¦
  0..1 --&gt; precision</code></pre>
</div>
</div>
<div class="paragraph">
<p>Calculates the age in the specified precision of a person born on a given date, as of another given date.</p>
</div>
<div class="paragraph">
<p>The CalculateAgeAt operator has two signatures:
  (Date, Date)
  (DateTime, DateTime)</p>
</div>
<div class="paragraph">
<p>For the Date overload, precision must be one of year, month, week, or day, and the result is the number of whole calendar periods that have elapsed between the first date and the second date.</p>
</div>
<div class="paragraph">
<p>For the DateTime overload, the result is the number of whole calendar periods that have elapsed between the first datetime and the second datetime.</p>
</div>
</div>
<div class="sect2">
<h3 id="equal-6"><a class="anchor" href="#equal-6"></a>23.5. Equal</h3>
<div class="paragraph">
<p>Refer to the <a href="#equal">Equal section</a> in the Comparison Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="equivalent-6"><a class="anchor" href="#equivalent-6"></a>23.6. Equivalent</h3>
<div class="paragraph">
<p>Refer to the <a href="#equivalent">Equivalent section</a> in the Comparison Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="incodesystem"><a class="anchor" href="#incodesystem"></a>23.7. InCodeSystem</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">InCodeSystem : OperatorExpression
  ¦
  1..1 --&gt; code : Expression
  ¦
  0..1 --&gt; codesystem : CodeSystemRef
  |
  0..1 --&gt; codesystemExpression : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The InCodeSystem operator returns true if the given code is in the given code system.</p>
</div>
<div class="paragraph">
<p>The first argument is expected to be a String, Code, or Concept.</p>
</div>
<div class="paragraph">
<p>The second argument is statically a CodeSystemRef. This This allows for both static analysis of the code system references within an artifact, as well as the implementation of code system membership by the target environment as a service call to a terminology server, if desired.</p>
</div>
<div class="paragraph">
<p>The third argument is expected to be a CodeSystem, allowing references to code systems to be preserved as references.</p>
</div>
</div>
<div class="sect2">
<h3 id="invalueset"><a class="anchor" href="#invalueset"></a>23.8. InValueSet</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">InValueSet : OperatorExpression
  ¦
  1..1 --&gt; code : Expression
  ¦
  0..1 --&gt; valueset : ValueSetRef
  |
  0..1 --&gt; valuesetExpression : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The InValueSet operator returns true if the given code is in the given value set.</p>
</div>
<div class="paragraph">
<p>The first argument is expected to be a String, Code, or Concept.</p>
</div>
<div class="paragraph">
<p>The second argument is statically a ValueSetRef. This allows for both static analysis of the value set references within an artifact, as well as the implementation of valueset membership by the target environment as a service call to a terminology server, if desired.</p>
</div>
<div class="paragraph">
<p>The third argument is expected to be a ValueSet, allowing references to value sets to be preserved as references.</p>
</div>
</div>
<div class="sect2">
<h3 id="expandvalueset"><a class="anchor" href="#expandvalueset"></a>23.9. ExpandValueSet</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">ExpandValueSet : UnaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ExpandValueSet operator returns the current expansion for the given value set.</p>
</div>
<div class="paragraph">
<p>The operation expects a single argument of type ValueSet. This may be a static reference to a value set (i.e. a ValueSetRef), or a ValueSet value to support dynamic value set usage. The operation is used as the implicit conversion from a ValueSet reference to a list of codes.</p>
</div>
<div class="paragraph">
<p>If the argument is null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="not-equal-6"><a class="anchor" href="#not-equal-6"></a>23.10. Not Equal</h3>
<div class="paragraph">
<p>Refer to the <a href="#not-equal">Not Equal section</a> in the Comparison Operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="subsumedby"><a class="anchor" href="#subsumedby"></a>23.11. SubsumedBy</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">SubsumedBy : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The SubsumedBy operator returns true if the given codes are equivalent, or if the first code is subsumed by the second code (i.e. the first code is a descendent of the second code in a subsumption hierarchy), and false otherwise.</p>
</div>
<div class="paragraph">
<p>For the Concept overload, this operator returns true if any code in the first concept is subsumed by any code in the second.</p>
</div>
<div class="paragraph">
<p>If either or both arguments are null, the result is null.</p>
</div>
</div>
<div class="sect2">
<h3 id="subsumes"><a class="anchor" href="#subsumes"></a>23.12. Subsumes</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Subsumes : BinaryExpression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Subsumes operator returns true if the given codes are equivalent, or if the first code subsumes the second (i.e. the first code is an ancestor of the second in a subsumption hierarchy), and false otherwise.</p>
</div>
<div class="paragraph">
<p>For the Concept overload, this operator returns true if any code in the first concept subsumes any code in the second.</p>
</div>
<div class="paragraph">
<p>If either or both arguments are null, the result is null.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="errors-and-messages"><a class="anchor" href="#errors-and-messages"></a>24. Errors and Messages</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ELM defines a utility operation that is useful for generating run-time messages, warnings, traces, and errors. The operator is a single, general-purpose function intended to provide a single implementation point for messaging and run-time error functionality when those messages are generated from ELM logic.</p>
</div>
<div class="sect2">
<h3 id="message"><a class="anchor" href="#message"></a>24.1. Message</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-elm" data-lang="elm">Message : OperatorExpression
  ¦
  1..1 --&gt; source : Expression
  ¦
  0..1 --&gt; condition : Expression
  ¦
  0..1 --&gt; code : Expression
  ¦
  0..1 --&gt; severity : Expression
  ¦
  0..1 --&gt; message : Expression</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Message operator is used to support errors, warnings, messages, and tracing in an ELM evaluation environment.</p>
</div>
<div class="paragraph">
<p>The operator is defined to return the input source.</p>
</div>
<div class="paragraph">
<p>If the severity is Error, the operator is expected to raise a run-time error and return the message to the calling environment. This is the only severity that stops processing. All other severities continue evaluation of the expression.</p>
</div>
<div class="paragraph">
<p>If the severity is Trace, the operator is expected to make the message available to a tracing mechanism such as a debug log in the calling environment.</p>
</div>
<div class="paragraph">
<p>If the severity is Warning, the operator is expected to provide the message as a warning to the calling environment.</p>
</div>
<div class="paragraph">
<p>If the severity is Message, the operator is expected to provide the message as information to the calling environment.</p>
</div>
</div>
</div>
</div>


</div>


				</div>  <!-- /inner-wrapper -->
            </div>  <!-- /row -->
        </div>  <!-- /container -->

    </div>  <!-- /segment-content -->


	<div id="segment-footer" class="segment">  <!-- segment-footer -->
		<div class="container">  <!-- container -->
			<div class="inner-wrapper">
				<p>
        &copy; HL7.org 2014+. CQL (Release) (<a href="http://www.hl7.org/Special/committees/dss/index.cfm">Clinical Decision Support WG</a>). hl7.cql#1.5.2 generated on 2023-01-20 11:08:31 +1100
        <span style="color: #FFFF77">|
<!--               <a style="color: #81BEF7" href="http://services.w3.org/htmldiff?doc1=http%3A%2F%2Fcql.hl7.org%2FSTU2%2F<%rellink%>&amp;doc2=<%baseURL%><%rellink%>">Compare to STU2</a> | -->
               <a style="color: #81BEF7" rel="license" href="license.html">License</a> |
               <a style="color: #81BEF7" rel="history" href="http://cql.hl7.org/history.html">Version History</a> |
               <a style="color: #81BEF7" target="_blank" href="https://jira.hl7.org/issues">Propose a change</a>
        </span>
        </p>
			</div>  <!-- /inner-wrapper -->
		</div>  <!-- /container -->
	</div>  <!-- /segment-footer -->

	<div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
		<div class="container">  <!-- container -->
		</div>  <!-- /container -->
	</div>  <!-- /segment-post-footer -->

      <!-- JS and analytics only. -->
      <!-- Bootstrap core JavaScript
================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
<script src="dist/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
<script src="dist/bootstrap.min.js"> </script>
<script src="dist/respond.min.js"> </script>
<script src="dist/fhir.js"> </script>
<script src="dist/sidebar.js"> </script>
<script src="dist/prism.js"> </script>
<script src="dist/cql.js"> </script>

  <!-- Analytics Below
================================================== -->


<div id="feedly-mini" title="feedly Mini tookit"></div></body></html>
